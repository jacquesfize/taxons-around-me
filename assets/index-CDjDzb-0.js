(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))g(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&g(m)}).observe(document,{childList:!0,subtree:!0});function f(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function g(a){if(a.ep)return;a.ep=!0;const c=f(a);fetch(a.href,c)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Oa(s){const u=Object.create(null);for(const f of s.split(","))u[f]=1;return f=>f in u}const ae={},br=[],Hn=()=>{},Vh=()=>!1,Io=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Ra=s=>s.startsWith("onUpdate:"),je=Object.assign,Da=(s,u)=>{const f=s.indexOf(u);f>-1&&s.splice(f,1)},Wh=Object.prototype.hasOwnProperty,ee=(s,u)=>Wh.call(s,u),Ft=Array.isArray,Tr=s=>So(s)==="[object Map]",al=s=>So(s)==="[object Set]",Ht=s=>typeof s=="function",Le=s=>typeof s=="string",wi=s=>typeof s=="symbol",_e=s=>s!==null&&typeof s=="object",ul=s=>(_e(s)||Ht(s))&&Ht(s.then)&&Ht(s.catch),ll=Object.prototype.toString,So=s=>ll.call(s),Xh=s=>So(s).slice(8,-1),hl=s=>So(s)==="[object Object]",Aa=s=>Le(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,ps=Oa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Po=s=>{const u=Object.create(null);return f=>u[f]||(u[f]=s(f))},jh=/-(\w)/g,ki=Po(s=>s.replace(jh,(u,f)=>f?f.toUpperCase():"")),Kh=/\B([A-Z])/g,$i=Po(s=>s.replace(Kh,"-$1").toLowerCase()),cl=Po(s=>s.charAt(0).toUpperCase()+s.slice(1)),Qo=Po(s=>s?`on${cl(s)}`:""),Li=(s,u)=>!Object.is(s,u),so=(s,...u)=>{for(let f=0;f<s.length;f++)s[f](...u)},fl=(s,u,f,g=!1)=>{Object.defineProperty(s,u,{configurable:!0,enumerable:!1,writable:g,value:f})},ga=s=>{const u=parseFloat(s);return isNaN(u)?s:u};let lu;const Co=()=>lu||(lu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function za(s){if(Ft(s)){const u={};for(let f=0;f<s.length;f++){const g=s[f],a=Le(g)?tc(g):za(g);if(a)for(const c in a)u[c]=a[c]}return u}else if(Le(s)||_e(s))return s}const $h=/;(?![^(]*\))/g,Jh=/:([^]+)/,Qh=/\/\*[^]*?\*\//g;function tc(s){const u={};return s.replace(Qh,"").split($h).forEach(f=>{if(f){const g=f.split(Jh);g.length>1&&(u[g[0].trim()]=g[1].trim())}}),u}function Ir(s){let u="";if(Le(s))u=s;else if(Ft(s))for(let f=0;f<s.length;f++){const g=Ir(s[f]);g&&(u+=g+" ")}else if(_e(s))for(const f in s)s[f]&&(u+=f+" ");return u.trim()}const ec="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nc=Oa(ec);function dl(s){return!!s||s===""}const gl=s=>!!(s&&s.__v_isRef===!0),Wi=s=>Le(s)?s:s==null?"":Ft(s)||_e(s)&&(s.toString===ll||!Ht(s.toString))?gl(s)?Wi(s.value):JSON.stringify(s,_l,2):String(s),_l=(s,u)=>gl(u)?_l(s,u.value):Tr(u)?{[`Map(${u.size})`]:[...u.entries()].reduce((f,[g,a],c)=>(f[ta(g,c)+" =>"]=a,f),{})}:al(u)?{[`Set(${u.size})`]:[...u.values()].map(f=>ta(f))}:wi(u)?ta(u):_e(u)&&!Ft(u)&&!hl(u)?String(u):u,ta=(s,u="")=>{var f;return wi(s)?`Symbol(${(f=s.description)!=null?f:u})`:s};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let an;class ic{constructor(u=!1){this.detached=u,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=an,!u&&an&&(this.index=(an.scopes||(an.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let u,f;if(this.scopes)for(u=0,f=this.scopes.length;u<f;u++)this.scopes[u].pause();for(u=0,f=this.effects.length;u<f;u++)this.effects[u].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let u,f;if(this.scopes)for(u=0,f=this.scopes.length;u<f;u++)this.scopes[u].resume();for(u=0,f=this.effects.length;u<f;u++)this.effects[u].resume()}}run(u){if(this._active){const f=an;try{return an=this,u()}finally{an=f}}}on(){an=this}off(){an=this.parent}stop(u){if(this._active){this._active=!1;let f,g;for(f=0,g=this.effects.length;f<g;f++)this.effects[f].stop();for(this.effects.length=0,f=0,g=this.cleanups.length;f<g;f++)this.cleanups[f]();if(this.cleanups.length=0,this.scopes){for(f=0,g=this.scopes.length;f<g;f++)this.scopes[f].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!u){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function rc(){return an}let ue;const ea=new WeakSet;class ml{constructor(u){this.fn=u,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,an&&an.active&&an.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ea.has(this)&&(ea.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hu(this),yl(this);const u=ue,f=Sn;ue=this,Sn=!0;try{return this.fn()}finally{xl(this),ue=u,Sn=f,this.flags&=-3}}stop(){if(this.flags&1){for(let u=this.deps;u;u=u.nextDep)Ga(u);this.deps=this.depsTail=void 0,hu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ea.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_a(this)&&this.run()}get dirty(){return _a(this)}}let pl=0,vs,ys;function vl(s,u=!1){if(s.flags|=8,u){s.next=ys,ys=s;return}s.next=vs,vs=s}function Fa(){pl++}function Ba(){if(--pl>0)return;if(ys){let u=ys;for(ys=void 0;u;){const f=u.next;u.next=void 0,u.flags&=-9,u=f}}let s;for(;vs;){let u=vs;for(vs=void 0;u;){const f=u.next;if(u.next=void 0,u.flags&=-9,u.flags&1)try{u.trigger()}catch(g){s||(s=g)}u=f}}if(s)throw s}function yl(s){for(let u=s.deps;u;u=u.nextDep)u.version=-1,u.prevActiveLink=u.dep.activeLink,u.dep.activeLink=u}function xl(s){let u,f=s.depsTail,g=f;for(;g;){const a=g.prevDep;g.version===-1?(g===f&&(f=a),Ga(g),sc(g)):u=g,g.dep.activeLink=g.prevActiveLink,g.prevActiveLink=void 0,g=a}s.deps=u,s.depsTail=f}function _a(s){for(let u=s.deps;u;u=u.nextDep)if(u.dep.version!==u.version||u.dep.computed&&(Ll(u.dep.computed)||u.dep.version!==u.version))return!0;return!!s._dirty}function Ll(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===ws))return;s.globalVersion=ws;const u=s.dep;if(s.flags|=2,u.version>0&&!s.isSSR&&s.deps&&!_a(s)){s.flags&=-3;return}const f=ue,g=Sn;ue=s,Sn=!0;try{yl(s);const a=s.fn(s._value);(u.version===0||Li(a,s._value))&&(s._value=a,u.version++)}catch(a){throw u.version++,a}finally{ue=f,Sn=g,xl(s),s.flags&=-3}}function Ga(s,u=!1){const{dep:f,prevSub:g,nextSub:a}=s;if(g&&(g.nextSub=a,s.prevSub=void 0),a&&(a.prevSub=g,s.nextSub=void 0),f.subs===s&&(f.subs=g,!g&&f.computed)){f.computed.flags&=-5;for(let c=f.computed.deps;c;c=c.nextDep)Ga(c,!0)}!u&&!--f.sc&&f.map&&f.map.delete(f.key)}function sc(s){const{prevDep:u,nextDep:f}=s;u&&(u.nextDep=f,s.prevDep=void 0),f&&(f.prevDep=u,s.nextDep=void 0)}let Sn=!0;const kl=[];function Ei(){kl.push(Sn),Sn=!1}function bi(){const s=kl.pop();Sn=s===void 0?!0:s}function hu(s){const{cleanup:u}=s;if(s.cleanup=void 0,u){const f=ue;ue=void 0;try{u()}finally{ue=f}}}let ws=0;class oc{constructor(u,f){this.sub=u,this.dep=f,this.version=f.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ua{constructor(u){this.computed=u,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(u){if(!ue||!Sn||ue===this.computed)return;let f=this.activeLink;if(f===void 0||f.sub!==ue)f=this.activeLink=new oc(ue,this),ue.deps?(f.prevDep=ue.depsTail,ue.depsTail.nextDep=f,ue.depsTail=f):ue.deps=ue.depsTail=f,wl(f);else if(f.version===-1&&(f.version=this.version,f.nextDep)){const g=f.nextDep;g.prevDep=f.prevDep,f.prevDep&&(f.prevDep.nextDep=g),f.prevDep=ue.depsTail,f.nextDep=void 0,ue.depsTail.nextDep=f,ue.depsTail=f,ue.deps===f&&(ue.deps=g)}return f}trigger(u){this.version++,ws++,this.notify(u)}notify(u){Fa();try{for(let f=this.subs;f;f=f.prevSub)f.sub.notify()&&f.sub.dep.notify()}finally{Ba()}}}function wl(s){if(s.dep.sc++,s.sub.flags&4){const u=s.dep.computed;if(u&&!s.dep.subs){u.flags|=20;for(let g=u.deps;g;g=g.nextDep)wl(g)}const f=s.dep.subs;f!==s&&(s.prevSub=f,f&&(f.nextSub=s)),s.dep.subs=s}}const ma=new WeakMap,Vi=Symbol(""),pa=Symbol(""),Es=Symbol("");function Fe(s,u,f){if(Sn&&ue){let g=ma.get(s);g||ma.set(s,g=new Map);let a=g.get(f);a||(g.set(f,a=new Ua),a.map=g,a.key=f),a.track()}}function ni(s,u,f,g,a,c){const m=ma.get(s);if(!m){ws++;return}const p=w=>{w&&w.trigger()};if(Fa(),u==="clear")m.forEach(p);else{const w=Ft(s),S=w&&Aa(f);if(w&&f==="length"){const E=Number(g);m.forEach((I,M)=>{(M==="length"||M===Es||!wi(M)&&M>=E)&&p(I)})}else switch((f!==void 0||m.has(void 0))&&p(m.get(f)),S&&p(m.get(Es)),u){case"add":w?S&&p(m.get("length")):(p(m.get(Vi)),Tr(s)&&p(m.get(pa)));break;case"delete":w||(p(m.get(Vi)),Tr(s)&&p(m.get(pa)));break;case"set":Tr(s)&&p(m.get(Vi));break}}Ba()}function Lr(s){const u=te(s);return u===s?u:(Fe(u,"iterate",Es),kn(s)?u:u.map(Be))}function Mo(s){return Fe(s=te(s),"iterate",Es),s}const ac={__proto__:null,[Symbol.iterator](){return na(this,Symbol.iterator,Be)},concat(...s){return Lr(this).concat(...s.map(u=>Ft(u)?Lr(u):u))},entries(){return na(this,"entries",s=>(s[1]=Be(s[1]),s))},every(s,u){return ti(this,"every",s,u,void 0,arguments)},filter(s,u){return ti(this,"filter",s,u,f=>f.map(Be),arguments)},find(s,u){return ti(this,"find",s,u,Be,arguments)},findIndex(s,u){return ti(this,"findIndex",s,u,void 0,arguments)},findLast(s,u){return ti(this,"findLast",s,u,Be,arguments)},findLastIndex(s,u){return ti(this,"findLastIndex",s,u,void 0,arguments)},forEach(s,u){return ti(this,"forEach",s,u,void 0,arguments)},includes(...s){return ia(this,"includes",s)},indexOf(...s){return ia(this,"indexOf",s)},join(s){return Lr(this).join(s)},lastIndexOf(...s){return ia(this,"lastIndexOf",s)},map(s,u){return ti(this,"map",s,u,void 0,arguments)},pop(){return hs(this,"pop")},push(...s){return hs(this,"push",s)},reduce(s,...u){return cu(this,"reduce",s,u)},reduceRight(s,...u){return cu(this,"reduceRight",s,u)},shift(){return hs(this,"shift")},some(s,u){return ti(this,"some",s,u,void 0,arguments)},splice(...s){return hs(this,"splice",s)},toReversed(){return Lr(this).toReversed()},toSorted(s){return Lr(this).toSorted(s)},toSpliced(...s){return Lr(this).toSpliced(...s)},unshift(...s){return hs(this,"unshift",s)},values(){return na(this,"values",Be)}};function na(s,u,f){const g=Mo(s),a=g[u]();return g!==s&&!kn(s)&&(a._next=a.next,a.next=()=>{const c=a._next();return c.value&&(c.value=f(c.value)),c}),a}const uc=Array.prototype;function ti(s,u,f,g,a,c){const m=Mo(s),p=m!==s&&!kn(s),w=m[u];if(w!==uc[u]){const I=w.apply(s,c);return p?Be(I):I}let S=f;m!==s&&(p?S=function(I,M){return f.call(this,Be(I),M,s)}:f.length>2&&(S=function(I,M){return f.call(this,I,M,s)}));const E=w.call(m,S,g);return p&&a?a(E):E}function cu(s,u,f,g){const a=Mo(s);let c=f;return a!==s&&(kn(s)?f.length>3&&(c=function(m,p,w){return f.call(this,m,p,w,s)}):c=function(m,p,w){return f.call(this,m,Be(p),w,s)}),a[u](c,...g)}function ia(s,u,f){const g=te(s);Fe(g,"iterate",Es);const a=g[u](...f);return(a===-1||a===!1)&&Ya(f[0])?(f[0]=te(f[0]),g[u](...f)):a}function hs(s,u,f=[]){Ei(),Fa();const g=te(s)[u].apply(s,f);return Ba(),bi(),g}const lc=Oa("__proto__,__v_isRef,__isVue"),El=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(wi));function hc(s){wi(s)||(s=String(s));const u=te(this);return Fe(u,"has",s),u.hasOwnProperty(s)}class bl{constructor(u=!1,f=!1){this._isReadonly=u,this._isShallow=f}get(u,f,g){if(f==="__v_skip")return u.__v_skip;const a=this._isReadonly,c=this._isShallow;if(f==="__v_isReactive")return!a;if(f==="__v_isReadonly")return a;if(f==="__v_isShallow")return c;if(f==="__v_raw")return g===(a?c?xc:Pl:c?Sl:Il).get(u)||Object.getPrototypeOf(u)===Object.getPrototypeOf(g)?u:void 0;const m=Ft(u);if(!a){let w;if(m&&(w=ac[f]))return w;if(f==="hasOwnProperty")return hc}const p=Reflect.get(u,f,Ge(u)?u:g);return(wi(f)?El.has(f):lc(f))||(a||Fe(u,"get",f),c)?p:Ge(p)?m&&Aa(f)?p:p.value:_e(p)?a?Cl(p):Ha(p):p}}class Tl extends bl{constructor(u=!1){super(!1,u)}set(u,f,g,a){let c=u[f];if(!this._isShallow){const w=Xi(c);if(!kn(g)&&!Xi(g)&&(c=te(c),g=te(g)),!Ft(u)&&Ge(c)&&!Ge(g))return w?!1:(c.value=g,!0)}const m=Ft(u)&&Aa(f)?Number(f)<u.length:ee(u,f),p=Reflect.set(u,f,g,Ge(u)?u:a);return u===te(a)&&(m?Li(g,c)&&ni(u,"set",f,g):ni(u,"add",f,g)),p}deleteProperty(u,f){const g=ee(u,f);u[f];const a=Reflect.deleteProperty(u,f);return a&&g&&ni(u,"delete",f,void 0),a}has(u,f){const g=Reflect.has(u,f);return(!wi(f)||!El.has(f))&&Fe(u,"has",f),g}ownKeys(u){return Fe(u,"iterate",Ft(u)?"length":Vi),Reflect.ownKeys(u)}}class cc extends bl{constructor(u=!1){super(!0,u)}set(u,f){return!0}deleteProperty(u,f){return!0}}const fc=new Tl,dc=new cc,gc=new Tl(!0);const va=s=>s,$s=s=>Reflect.getPrototypeOf(s);function _c(s,u,f){return function(...g){const a=this.__v_raw,c=te(a),m=Tr(c),p=s==="entries"||s===Symbol.iterator&&m,w=s==="keys"&&m,S=a[s](...g),E=f?va:u?ya:Be;return!u&&Fe(c,"iterate",w?pa:Vi),{next(){const{value:I,done:M}=S.next();return M?{value:I,done:M}:{value:p?[E(I[0]),E(I[1])]:E(I),done:M}},[Symbol.iterator](){return this}}}}function Js(s){return function(...u){return s==="delete"?!1:s==="clear"?void 0:this}}function mc(s,u){const f={get(a){const c=this.__v_raw,m=te(c),p=te(a);s||(Li(a,p)&&Fe(m,"get",a),Fe(m,"get",p));const{has:w}=$s(m),S=u?va:s?ya:Be;if(w.call(m,a))return S(c.get(a));if(w.call(m,p))return S(c.get(p));c!==m&&c.get(a)},get size(){const a=this.__v_raw;return!s&&Fe(te(a),"iterate",Vi),Reflect.get(a,"size",a)},has(a){const c=this.__v_raw,m=te(c),p=te(a);return s||(Li(a,p)&&Fe(m,"has",a),Fe(m,"has",p)),a===p?c.has(a):c.has(a)||c.has(p)},forEach(a,c){const m=this,p=m.__v_raw,w=te(p),S=u?va:s?ya:Be;return!s&&Fe(w,"iterate",Vi),p.forEach((E,I)=>a.call(c,S(E),S(I),m))}};return je(f,s?{add:Js("add"),set:Js("set"),delete:Js("delete"),clear:Js("clear")}:{add(a){!u&&!kn(a)&&!Xi(a)&&(a=te(a));const c=te(this);return $s(c).has.call(c,a)||(c.add(a),ni(c,"add",a,a)),this},set(a,c){!u&&!kn(c)&&!Xi(c)&&(c=te(c));const m=te(this),{has:p,get:w}=$s(m);let S=p.call(m,a);S||(a=te(a),S=p.call(m,a));const E=w.call(m,a);return m.set(a,c),S?Li(c,E)&&ni(m,"set",a,c):ni(m,"add",a,c),this},delete(a){const c=te(this),{has:m,get:p}=$s(c);let w=m.call(c,a);w||(a=te(a),w=m.call(c,a)),p&&p.call(c,a);const S=c.delete(a);return w&&ni(c,"delete",a,void 0),S},clear(){const a=te(this),c=a.size!==0,m=a.clear();return c&&ni(a,"clear",void 0,void 0),m}}),["keys","values","entries",Symbol.iterator].forEach(a=>{f[a]=_c(a,s,u)}),f}function Za(s,u){const f=mc(s,u);return(g,a,c)=>a==="__v_isReactive"?!s:a==="__v_isReadonly"?s:a==="__v_raw"?g:Reflect.get(ee(f,a)&&a in g?f:g,a,c)}const pc={get:Za(!1,!1)},vc={get:Za(!1,!0)},yc={get:Za(!0,!1)};const Il=new WeakMap,Sl=new WeakMap,Pl=new WeakMap,xc=new WeakMap;function Lc(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kc(s){return s.__v_skip||!Object.isExtensible(s)?0:Lc(Xh(s))}function Ha(s){return Xi(s)?s:qa(s,!1,fc,pc,Il)}function wc(s){return qa(s,!1,gc,vc,Sl)}function Cl(s){return qa(s,!0,dc,yc,Pl)}function qa(s,u,f,g,a){if(!_e(s)||s.__v_raw&&!(u&&s.__v_isReactive))return s;const c=a.get(s);if(c)return c;const m=kc(s);if(m===0)return s;const p=new Proxy(s,m===2?g:f);return a.set(s,p),p}function Sr(s){return Xi(s)?Sr(s.__v_raw):!!(s&&s.__v_isReactive)}function Xi(s){return!!(s&&s.__v_isReadonly)}function kn(s){return!!(s&&s.__v_isShallow)}function Ya(s){return s?!!s.__v_raw:!1}function te(s){const u=s&&s.__v_raw;return u?te(u):s}function Ec(s){return!ee(s,"__v_skip")&&Object.isExtensible(s)&&fl(s,"__v_skip",!0),s}const Be=s=>_e(s)?Ha(s):s,ya=s=>_e(s)?Cl(s):s;function Ge(s){return s?s.__v_isRef===!0:!1}function ve(s){return Ml(s,!1)}function fu(s){return Ml(s,!0)}function Ml(s,u){return Ge(s)?s:new bc(s,u)}class bc{constructor(u,f){this.dep=new Ua,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=f?u:te(u),this._value=f?u:Be(u),this.__v_isShallow=f}get value(){return this.dep.track(),this._value}set value(u){const f=this._rawValue,g=this.__v_isShallow||kn(u)||Xi(u);u=g?u:te(u),Li(u,f)&&(this._rawValue=u,this._value=g?u:Be(u),this.dep.trigger())}}function Tc(s){return Ge(s)?s.value:s}const Ic={get:(s,u,f)=>u==="__v_raw"?s:Tc(Reflect.get(s,u,f)),set:(s,u,f,g)=>{const a=s[u];return Ge(a)&&!Ge(f)?(a.value=f,!0):Reflect.set(s,u,f,g)}};function Nl(s){return Sr(s)?s:new Proxy(s,Ic)}class Sc{constructor(u,f,g){this.fn=u,this.setter=f,this._value=void 0,this.dep=new Ua(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ws-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!f,this.isSSR=g}notify(){if(this.flags|=16,!(this.flags&8)&&ue!==this)return vl(this,!0),!0}get value(){const u=this.dep.track();return Ll(this),u&&(u.version=this.dep.version),this._value}set value(u){this.setter&&this.setter(u)}}function Pc(s,u,f=!1){let g,a;return Ht(s)?g=s:(g=s.get,a=s.set),new Sc(g,a,f)}const Qs={},fo=new WeakMap;let Yi;function Cc(s,u=!1,f=Yi){if(f){let g=fo.get(f);g||fo.set(f,g=[]),g.push(s)}}function Mc(s,u,f=ae){const{immediate:g,deep:a,once:c,scheduler:m,augmentJob:p,call:w}=f,S=V=>a?V:kn(V)||a===!1||a===0?ii(V,1):ii(V);let E,I,M,D,R=!1,Z=!1;if(Ge(s)?(I=()=>s.value,R=kn(s)):Sr(s)?(I=()=>S(s),R=!0):Ft(s)?(Z=!0,R=s.some(V=>Sr(V)||kn(V)),I=()=>s.map(V=>{if(Ge(V))return V.value;if(Sr(V))return S(V);if(Ht(V))return w?w(V,2):V()})):Ht(s)?u?I=w?()=>w(s,2):s:I=()=>{if(M){Ei();try{M()}finally{bi()}}const V=Yi;Yi=E;try{return w?w(s,3,[D]):s(D)}finally{Yi=V}}:I=Hn,u&&a){const V=I,tt=a===!0?1/0:a;I=()=>ii(V(),tt)}const ct=rc(),ht=()=>{E.stop(),ct&&ct.active&&Da(ct.effects,E)};if(c&&u){const V=u;u=(...tt)=>{V(...tt),ht()}}let st=Z?new Array(s.length).fill(Qs):Qs;const H=V=>{if(!(!(E.flags&1)||!E.dirty&&!V))if(u){const tt=E.run();if(a||R||(Z?tt.some((W,et)=>Li(W,st[et])):Li(tt,st))){M&&M();const W=Yi;Yi=E;try{const et=[tt,st===Qs?void 0:Z&&st[0]===Qs?[]:st,D];w?w(u,3,et):u(...et),st=tt}finally{Yi=W}}}else E.run()};return p&&p(H),E=new ml(I),E.scheduler=m?()=>m(H,!1):H,D=V=>Cc(V,!1,E),M=E.onStop=()=>{const V=fo.get(E);if(V){if(w)w(V,4);else for(const tt of V)tt();fo.delete(E)}},u?g?H(!0):st=E.run():m?m(H.bind(null,!0),!0):E.run(),ht.pause=E.pause.bind(E),ht.resume=E.resume.bind(E),ht.stop=ht,ht}function ii(s,u=1/0,f){if(u<=0||!_e(s)||s.__v_skip||(f=f||new Set,f.has(s)))return s;if(f.add(s),u--,Ge(s))ii(s.value,u,f);else if(Ft(s))for(let g=0;g<s.length;g++)ii(s[g],u,f);else if(al(s)||Tr(s))s.forEach(g=>{ii(g,u,f)});else if(hl(s)){for(const g in s)ii(s[g],u,f);for(const g of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,g)&&ii(s[g],u,f)}return s}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ps(s,u,f,g){try{return g?s(...g):s()}catch(a){No(a,u,f)}}function qn(s,u,f,g){if(Ht(s)){const a=Ps(s,u,f,g);return a&&ul(a)&&a.catch(c=>{No(c,u,f)}),a}if(Ft(s)){const a=[];for(let c=0;c<s.length;c++)a.push(qn(s[c],u,f,g));return a}}function No(s,u,f,g=!0){const a=u?u.vnode:null,{errorHandler:c,throwUnhandledErrorInProduction:m}=u&&u.appContext.config||ae;if(u){let p=u.parent;const w=u.proxy,S=`https://vuejs.org/error-reference/#runtime-${f}`;for(;p;){const E=p.ec;if(E){for(let I=0;I<E.length;I++)if(E[I](s,w,S)===!1)return}p=p.parent}if(c){Ei(),Ps(c,null,10,[s,w,S]),bi();return}}Nc(s,f,a,g,m)}function Nc(s,u,f,g=!0,a=!1){if(a)throw s;console.error(s)}const Ve=[];let Gn=-1;const Pr=[];let yi=null,wr=0;const Ol=Promise.resolve();let go=null;function Oc(s){const u=go||Ol;return s?u.then(this?s.bind(this):s):u}function Rc(s){let u=Gn+1,f=Ve.length;for(;u<f;){const g=u+f>>>1,a=Ve[g],c=bs(a);c<s||c===s&&a.flags&2?u=g+1:f=g}return u}function Va(s){if(!(s.flags&1)){const u=bs(s),f=Ve[Ve.length-1];!f||!(s.flags&2)&&u>=bs(f)?Ve.push(s):Ve.splice(Rc(u),0,s),s.flags|=1,Rl()}}function Rl(){go||(go=Ol.then(Al))}function Dc(s){Ft(s)?Pr.push(...s):yi&&s.id===-1?yi.splice(wr+1,0,s):s.flags&1||(Pr.push(s),s.flags|=1),Rl()}function du(s,u,f=Gn+1){for(;f<Ve.length;f++){const g=Ve[f];if(g&&g.flags&2){if(s&&g.id!==s.uid)continue;Ve.splice(f,1),f--,g.flags&4&&(g.flags&=-2),g(),g.flags&4||(g.flags&=-2)}}}function Dl(s){if(Pr.length){const u=[...new Set(Pr)].sort((f,g)=>bs(f)-bs(g));if(Pr.length=0,yi){yi.push(...u);return}for(yi=u,wr=0;wr<yi.length;wr++){const f=yi[wr];f.flags&4&&(f.flags&=-2),f.flags&8||f(),f.flags&=-2}yi=null,wr=0}}const bs=s=>s.id==null?s.flags&2?-1:1/0:s.id;function Al(s){try{for(Gn=0;Gn<Ve.length;Gn++){const u=Ve[Gn];u&&!(u.flags&8)&&(u.flags&4&&(u.flags&=-2),Ps(u,u.i,u.i?15:14),u.flags&4||(u.flags&=-2))}}finally{for(;Gn<Ve.length;Gn++){const u=Ve[Gn];u&&(u.flags&=-2)}Gn=-1,Ve.length=0,Dl(),go=null,(Ve.length||Pr.length)&&Al()}}let Ln=null,zl=null;function _o(s){const u=Ln;return Ln=s,zl=s&&s.type.__scopeId||null,u}function Ac(s,u=Ln,f){if(!u||s._n)return s;const g=(...a)=>{g._d&&ku(-1);const c=_o(u);let m;try{m=s(...a)}finally{_o(c),g._d&&ku(1)}return m};return g._n=!0,g._c=!0,g._d=!0,g}function ra(s,u){if(Ln===null)return s;const f=Ao(Ln),g=s.dirs||(s.dirs=[]);for(let a=0;a<u.length;a++){let[c,m,p,w=ae]=u[a];c&&(Ht(c)&&(c={mounted:c,updated:c}),c.deep&&ii(m),g.push({dir:c,instance:f,value:m,oldValue:void 0,arg:p,modifiers:w}))}return s}function Hi(s,u,f,g){const a=s.dirs,c=u&&u.dirs;for(let m=0;m<a.length;m++){const p=a[m];c&&(p.oldValue=c[m].value);let w=p.dir[g];w&&(Ei(),qn(w,f,8,[s.el,p,s,u]),bi())}}const zc=Symbol("_vte"),Fc=s=>s.__isTeleport;function Wa(s,u){s.shapeFlag&6&&s.component?(s.transition=u,Wa(s.component.subTree,u)):s.shapeFlag&128?(s.ssContent.transition=u.clone(s.ssContent),s.ssFallback.transition=u.clone(s.ssFallback)):s.transition=u}function Fl(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function mo(s,u,f,g,a=!1){if(Ft(s)){s.forEach((R,Z)=>mo(R,u&&(Ft(u)?u[Z]:u),f,g,a));return}if(xs(g)&&!a){g.shapeFlag&512&&g.type.__asyncResolved&&g.component.subTree.component&&mo(s,u,f,g.component.subTree);return}const c=g.shapeFlag&4?Ao(g.component):g.el,m=a?null:c,{i:p,r:w}=s,S=u&&u.r,E=p.refs===ae?p.refs={}:p.refs,I=p.setupState,M=te(I),D=I===ae?()=>!1:R=>ee(M,R);if(S!=null&&S!==w&&(Le(S)?(E[S]=null,D(S)&&(I[S]=null)):Ge(S)&&(S.value=null)),Ht(w))Ps(w,p,12,[m,E]);else{const R=Le(w),Z=Ge(w);if(R||Z){const ct=()=>{if(s.f){const ht=R?D(w)?I[w]:E[w]:w.value;a?Ft(ht)&&Da(ht,c):Ft(ht)?ht.includes(c)||ht.push(c):R?(E[w]=[c],D(w)&&(I[w]=E[w])):(w.value=[c],s.k&&(E[s.k]=w.value))}else R?(E[w]=m,D(w)&&(I[w]=m)):Z&&(w.value=m,s.k&&(E[s.k]=m))};m?(ct.id=-1,on(ct,f)):ct()}}}Co().requestIdleCallback;Co().cancelIdleCallback;const xs=s=>!!s.type.__asyncLoader,Bl=s=>s.type.__isKeepAlive;function Bc(s,u){Gl(s,"a",u)}function Gc(s,u){Gl(s,"da",u)}function Gl(s,u,f=Xe){const g=s.__wdc||(s.__wdc=()=>{let a=f;for(;a;){if(a.isDeactivated)return;a=a.parent}return s()});if(Oo(u,g,f),f){let a=f.parent;for(;a&&a.parent;)Bl(a.parent.vnode)&&Uc(g,u,f,a),a=a.parent}}function Uc(s,u,f,g){const a=Oo(u,s,g,!0);Zl(()=>{Da(g[u],a)},f)}function Oo(s,u,f=Xe,g=!1){if(f){const a=f[s]||(f[s]=[]),c=u.__weh||(u.__weh=(...m)=>{Ei();const p=Cs(f),w=qn(u,f,s,m);return p(),bi(),w});return g?a.unshift(c):a.push(c),c}}const si=s=>(u,f=Xe)=>{(!Is||s==="sp")&&Oo(s,(...g)=>u(...g),f)},Zc=si("bm"),Ul=si("m"),Hc=si("bu"),qc=si("u"),Yc=si("bum"),Zl=si("um"),Vc=si("sp"),Wc=si("rtg"),Xc=si("rtc");function jc(s,u=Xe){Oo("ec",s,u)}const Kc=Symbol.for("v-ndc");function Hl(s,u,f,g){let a;const c=f,m=Ft(s);if(m||Le(s)){const p=m&&Sr(s);let w=!1;p&&(w=!kn(s),s=Mo(s)),a=new Array(s.length);for(let S=0,E=s.length;S<E;S++)a[S]=u(w?Be(s[S]):s[S],S,void 0,c)}else if(typeof s=="number"){a=new Array(s);for(let p=0;p<s;p++)a[p]=u(p+1,p,void 0,c)}else if(_e(s))if(s[Symbol.iterator])a=Array.from(s,(p,w)=>u(p,w,void 0,c));else{const p=Object.keys(s);a=new Array(p.length);for(let w=0,S=p.length;w<S;w++){const E=p[w];a[w]=u(s[E],E,w,c)}}else a=[];return a}const xa=s=>s?hh(s)?Ao(s):xa(s.parent):null,Ls=je(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>xa(s.parent),$root:s=>xa(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>Yl(s),$forceUpdate:s=>s.f||(s.f=()=>{Va(s.update)}),$nextTick:s=>s.n||(s.n=Oc.bind(s.proxy)),$watch:s=>yf.bind(s)}),sa=(s,u)=>s!==ae&&!s.__isScriptSetup&&ee(s,u),$c={get({_:s},u){if(u==="__v_skip")return!0;const{ctx:f,setupState:g,data:a,props:c,accessCache:m,type:p,appContext:w}=s;let S;if(u[0]!=="$"){const D=m[u];if(D!==void 0)switch(D){case 1:return g[u];case 2:return a[u];case 4:return f[u];case 3:return c[u]}else{if(sa(g,u))return m[u]=1,g[u];if(a!==ae&&ee(a,u))return m[u]=2,a[u];if((S=s.propsOptions[0])&&ee(S,u))return m[u]=3,c[u];if(f!==ae&&ee(f,u))return m[u]=4,f[u];La&&(m[u]=0)}}const E=Ls[u];let I,M;if(E)return u==="$attrs"&&Fe(s.attrs,"get",""),E(s);if((I=p.__cssModules)&&(I=I[u]))return I;if(f!==ae&&ee(f,u))return m[u]=4,f[u];if(M=w.config.globalProperties,ee(M,u))return M[u]},set({_:s},u,f){const{data:g,setupState:a,ctx:c}=s;return sa(a,u)?(a[u]=f,!0):g!==ae&&ee(g,u)?(g[u]=f,!0):ee(s.props,u)||u[0]==="$"&&u.slice(1)in s?!1:(c[u]=f,!0)},has({_:{data:s,setupState:u,accessCache:f,ctx:g,appContext:a,propsOptions:c}},m){let p;return!!f[m]||s!==ae&&ee(s,m)||sa(u,m)||(p=c[0])&&ee(p,m)||ee(g,m)||ee(Ls,m)||ee(a.config.globalProperties,m)},defineProperty(s,u,f){return f.get!=null?s._.accessCache[u]=0:ee(f,"value")&&this.set(s,u,f.value,null),Reflect.defineProperty(s,u,f)}};function gu(s){return Ft(s)?s.reduce((u,f)=>(u[f]=null,u),{}):s}let La=!0;function Jc(s){const u=Yl(s),f=s.proxy,g=s.ctx;La=!1,u.beforeCreate&&_u(u.beforeCreate,s,"bc");const{data:a,computed:c,methods:m,watch:p,provide:w,inject:S,created:E,beforeMount:I,mounted:M,beforeUpdate:D,updated:R,activated:Z,deactivated:ct,beforeDestroy:ht,beforeUnmount:st,destroyed:H,unmounted:V,render:tt,renderTracked:W,renderTriggered:et,errorCaptured:_t,serverPrefetch:ft,expose:Bt,inheritAttrs:St,components:Mt,directives:ne,filters:it}=u;if(S&&Qc(S,g,null),m)for(const bt in m){const nt=m[bt];Ht(nt)&&(g[bt]=nt.bind(f))}if(a){const bt=a.call(f,f);_e(bt)&&(s.data=Ha(bt))}if(La=!0,c)for(const bt in c){const nt=c[bt],ie=Ht(nt)?nt.bind(f,f):Ht(nt.get)?nt.get.bind(f,f):Hn,q=!Ht(nt)&&Ht(nt.set)?nt.set.bind(f):Hn,Ct=Lo({get:ie,set:q});Object.defineProperty(g,bt,{enumerable:!0,configurable:!0,get:()=>Ct.value,set:Dt=>Ct.value=Dt})}if(p)for(const bt in p)ql(p[bt],g,f,bt);if(w){const bt=Ht(w)?w.call(f):w;Reflect.ownKeys(bt).forEach(nt=>{of(nt,bt[nt])})}E&&_u(E,s,"c");function yt(bt,nt){Ft(nt)?nt.forEach(ie=>bt(ie.bind(f))):nt&&bt(nt.bind(f))}if(yt(Zc,I),yt(Ul,M),yt(Hc,D),yt(qc,R),yt(Bc,Z),yt(Gc,ct),yt(jc,_t),yt(Xc,W),yt(Wc,et),yt(Yc,st),yt(Zl,V),yt(Vc,ft),Ft(Bt))if(Bt.length){const bt=s.exposed||(s.exposed={});Bt.forEach(nt=>{Object.defineProperty(bt,nt,{get:()=>f[nt],set:ie=>f[nt]=ie})})}else s.exposed||(s.exposed={});tt&&s.render===Hn&&(s.render=tt),St!=null&&(s.inheritAttrs=St),Mt&&(s.components=Mt),ne&&(s.directives=ne),ft&&Fl(s)}function Qc(s,u,f=Hn){Ft(s)&&(s=ka(s));for(const g in s){const a=s[g];let c;_e(a)?"default"in a?c=oo(a.from||g,a.default,!0):c=oo(a.from||g):c=oo(a),Ge(c)?Object.defineProperty(u,g,{enumerable:!0,configurable:!0,get:()=>c.value,set:m=>c.value=m}):u[g]=c}}function _u(s,u,f){qn(Ft(s)?s.map(g=>g.bind(u.proxy)):s.bind(u.proxy),u,f)}function ql(s,u,f,g){let a=g.includes(".")?rh(f,g):()=>f[g];if(Le(s)){const c=u[s];Ht(c)&&ri(a,c)}else if(Ht(s))ri(a,s.bind(f));else if(_e(s))if(Ft(s))s.forEach(c=>ql(c,u,f,g));else{const c=Ht(s.handler)?s.handler.bind(f):u[s.handler];Ht(c)&&ri(a,c,s)}}function Yl(s){const u=s.type,{mixins:f,extends:g}=u,{mixins:a,optionsCache:c,config:{optionMergeStrategies:m}}=s.appContext,p=c.get(u);let w;return p?w=p:!a.length&&!f&&!g?w=u:(w={},a.length&&a.forEach(S=>po(w,S,m,!0)),po(w,u,m)),_e(u)&&c.set(u,w),w}function po(s,u,f,g=!1){const{mixins:a,extends:c}=u;c&&po(s,c,f,!0),a&&a.forEach(m=>po(s,m,f,!0));for(const m in u)if(!(g&&m==="expose")){const p=tf[m]||f&&f[m];s[m]=p?p(s[m],u[m]):u[m]}return s}const tf={data:mu,props:pu,emits:pu,methods:ds,computed:ds,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:ds,directives:ds,watch:nf,provide:mu,inject:ef};function mu(s,u){return u?s?function(){return je(Ht(s)?s.call(this,this):s,Ht(u)?u.call(this,this):u)}:u:s}function ef(s,u){return ds(ka(s),ka(u))}function ka(s){if(Ft(s)){const u={};for(let f=0;f<s.length;f++)u[s[f]]=s[f];return u}return s}function Ye(s,u){return s?[...new Set([].concat(s,u))]:u}function ds(s,u){return s?je(Object.create(null),s,u):u}function pu(s,u){return s?Ft(s)&&Ft(u)?[...new Set([...s,...u])]:je(Object.create(null),gu(s),gu(u??{})):u}function nf(s,u){if(!s)return u;if(!u)return s;const f=je(Object.create(null),s);for(const g in u)f[g]=Ye(s[g],u[g]);return f}function Vl(){return{app:null,config:{isNativeTag:Vh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rf=0;function sf(s,u){return function(g,a=null){Ht(g)||(g=je({},g)),a!=null&&!_e(a)&&(a=null);const c=Vl(),m=new WeakSet,p=[];let w=!1;const S=c.app={_uid:rf++,_component:g,_props:a,_container:null,_context:c,_instance:null,version:Bf,get config(){return c.config},set config(E){},use(E,...I){return m.has(E)||(E&&Ht(E.install)?(m.add(E),E.install(S,...I)):Ht(E)&&(m.add(E),E(S,...I))),S},mixin(E){return c.mixins.includes(E)||c.mixins.push(E),S},component(E,I){return I?(c.components[E]=I,S):c.components[E]},directive(E,I){return I?(c.directives[E]=I,S):c.directives[E]},mount(E,I,M){if(!w){const D=S._ceVNode||ln(g,a);return D.appContext=c,M===!0?M="svg":M===!1&&(M=void 0),s(D,E,M),w=!0,S._container=E,E.__vue_app__=S,Ao(D.component)}},onUnmount(E){p.push(E)},unmount(){w&&(qn(p,S._instance,16),s(null,S._container),delete S._container.__vue_app__)},provide(E,I){return c.provides[E]=I,S},runWithContext(E){const I=Cr;Cr=S;try{return E()}finally{Cr=I}}};return S}}let Cr=null;function of(s,u){if(Xe){let f=Xe.provides;const g=Xe.parent&&Xe.parent.provides;g===f&&(f=Xe.provides=Object.create(g)),f[s]=u}}function oo(s,u,f=!1){const g=Xe||Ln;if(g||Cr){const a=Cr?Cr._context.provides:g?g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides:void 0;if(a&&s in a)return a[s];if(arguments.length>1)return f&&Ht(u)?u.call(g&&g.proxy):u}}const Wl={},Xl=()=>Object.create(Wl),jl=s=>Object.getPrototypeOf(s)===Wl;function af(s,u,f,g=!1){const a={},c=Xl();s.propsDefaults=Object.create(null),Kl(s,u,a,c);for(const m in s.propsOptions[0])m in a||(a[m]=void 0);f?s.props=g?a:wc(a):s.type.props?s.props=a:s.props=c,s.attrs=c}function uf(s,u,f,g){const{props:a,attrs:c,vnode:{patchFlag:m}}=s,p=te(a),[w]=s.propsOptions;let S=!1;if((g||m>0)&&!(m&16)){if(m&8){const E=s.vnode.dynamicProps;for(let I=0;I<E.length;I++){let M=E[I];if(Ro(s.emitsOptions,M))continue;const D=u[M];if(w)if(ee(c,M))D!==c[M]&&(c[M]=D,S=!0);else{const R=ki(M);a[R]=wa(w,p,R,D,s,!1)}else D!==c[M]&&(c[M]=D,S=!0)}}}else{Kl(s,u,a,c)&&(S=!0);let E;for(const I in p)(!u||!ee(u,I)&&((E=$i(I))===I||!ee(u,E)))&&(w?f&&(f[I]!==void 0||f[E]!==void 0)&&(a[I]=wa(w,p,I,void 0,s,!0)):delete a[I]);if(c!==p)for(const I in c)(!u||!ee(u,I))&&(delete c[I],S=!0)}S&&ni(s.attrs,"set","")}function Kl(s,u,f,g){const[a,c]=s.propsOptions;let m=!1,p;if(u)for(let w in u){if(ps(w))continue;const S=u[w];let E;a&&ee(a,E=ki(w))?!c||!c.includes(E)?f[E]=S:(p||(p={}))[E]=S:Ro(s.emitsOptions,w)||(!(w in g)||S!==g[w])&&(g[w]=S,m=!0)}if(c){const w=te(f),S=p||ae;for(let E=0;E<c.length;E++){const I=c[E];f[I]=wa(a,w,I,S[I],s,!ee(S,I))}}return m}function wa(s,u,f,g,a,c){const m=s[f];if(m!=null){const p=ee(m,"default");if(p&&g===void 0){const w=m.default;if(m.type!==Function&&!m.skipFactory&&Ht(w)){const{propsDefaults:S}=a;if(f in S)g=S[f];else{const E=Cs(a);g=S[f]=w.call(null,u),E()}}else g=w;a.ce&&a.ce._setProp(f,g)}m[0]&&(c&&!p?g=!1:m[1]&&(g===""||g===$i(f))&&(g=!0))}return g}const lf=new WeakMap;function $l(s,u,f=!1){const g=f?lf:u.propsCache,a=g.get(s);if(a)return a;const c=s.props,m={},p=[];let w=!1;if(!Ht(s)){const E=I=>{w=!0;const[M,D]=$l(I,u,!0);je(m,M),D&&p.push(...D)};!f&&u.mixins.length&&u.mixins.forEach(E),s.extends&&E(s.extends),s.mixins&&s.mixins.forEach(E)}if(!c&&!w)return _e(s)&&g.set(s,br),br;if(Ft(c))for(let E=0;E<c.length;E++){const I=ki(c[E]);vu(I)&&(m[I]=ae)}else if(c)for(const E in c){const I=ki(E);if(vu(I)){const M=c[E],D=m[I]=Ft(M)||Ht(M)?{type:M}:je({},M),R=D.type;let Z=!1,ct=!0;if(Ft(R))for(let ht=0;ht<R.length;++ht){const st=R[ht],H=Ht(st)&&st.name;if(H==="Boolean"){Z=!0;break}else H==="String"&&(ct=!1)}else Z=Ht(R)&&R.name==="Boolean";D[0]=Z,D[1]=ct,(Z||ee(D,"default"))&&p.push(I)}}const S=[m,p];return _e(s)&&g.set(s,S),S}function vu(s){return s[0]!=="$"&&!ps(s)}const Jl=s=>s[0]==="_"||s==="$stable",Xa=s=>Ft(s)?s.map(Un):[Un(s)],hf=(s,u,f)=>{if(u._n)return u;const g=Ac((...a)=>Xa(u(...a)),f);return g._c=!1,g},Ql=(s,u,f)=>{const g=s._ctx;for(const a in s){if(Jl(a))continue;const c=s[a];if(Ht(c))u[a]=hf(a,c,g);else if(c!=null){const m=Xa(c);u[a]=()=>m}}},th=(s,u)=>{const f=Xa(u);s.slots.default=()=>f},eh=(s,u,f)=>{for(const g in u)(f||g!=="_")&&(s[g]=u[g])},cf=(s,u,f)=>{const g=s.slots=Xl();if(s.vnode.shapeFlag&32){const a=u._;a?(eh(g,u,f),f&&fl(g,"_",a,!0)):Ql(u,g)}else u&&th(s,u)},ff=(s,u,f)=>{const{vnode:g,slots:a}=s;let c=!0,m=ae;if(g.shapeFlag&32){const p=u._;p?f&&p===1?c=!1:eh(a,u,f):(c=!u.$stable,Ql(u,a)),m=u}else u&&(th(s,u),m={default:1});if(c)for(const p in a)!Jl(p)&&m[p]==null&&delete a[p]},on=Tf;function df(s){return gf(s)}function gf(s,u){const f=Co();f.__VUE__=!0;const{insert:g,remove:a,patchProp:c,createElement:m,createText:p,createComment:w,setText:S,setElementText:E,parentNode:I,nextSibling:M,setScopeId:D=Hn,insertStaticContent:R}=s,Z=(k,N,U,j=null,X=null,$=null,lt=void 0,z=null,rt=!!N.dynamicChildren)=>{if(k===N)return;k&&!cs(k,N)&&(j=Ne(k),Dt(k,X,$,!0),k=null),N.patchFlag===-2&&(rt=!1,N.dynamicChildren=null);const{type:J,ref:Lt,shapeFlag:dt}=N;switch(J){case Do:ct(k,N,U,j);break;case ji:ht(k,N,U,j);break;case aa:k==null&&st(N,U,j,lt);break;case In:Mt(k,N,U,j,X,$,lt,z,rt);break;default:dt&1?tt(k,N,U,j,X,$,lt,z,rt):dt&6?ne(k,N,U,j,X,$,lt,z,rt):(dt&64||dt&128)&&J.process(k,N,U,j,X,$,lt,z,rt,Xt)}Lt!=null&&X&&mo(Lt,k&&k.ref,$,N||k,!N)},ct=(k,N,U,j)=>{if(k==null)g(N.el=p(N.children),U,j);else{const X=N.el=k.el;N.children!==k.children&&S(X,N.children)}},ht=(k,N,U,j)=>{k==null?g(N.el=w(N.children||""),U,j):N.el=k.el},st=(k,N,U,j)=>{[k.el,k.anchor]=R(k.children,N,U,j,k.el,k.anchor)},H=({el:k,anchor:N},U,j)=>{let X;for(;k&&k!==N;)X=M(k),g(k,U,j),k=X;g(N,U,j)},V=({el:k,anchor:N})=>{let U;for(;k&&k!==N;)U=M(k),a(k),k=U;a(N)},tt=(k,N,U,j,X,$,lt,z,rt)=>{N.type==="svg"?lt="svg":N.type==="math"&&(lt="mathml"),k==null?W(N,U,j,X,$,lt,z,rt):ft(k,N,X,$,lt,z,rt)},W=(k,N,U,j,X,$,lt,z)=>{let rt,J;const{props:Lt,shapeFlag:dt,transition:Q,dirs:Tt}=k;if(rt=k.el=m(k.type,$,Lt&&Lt.is,Lt),dt&8?E(rt,k.children):dt&16&&_t(k.children,rt,null,j,X,oa(k,$),lt,z),Tt&&Hi(k,null,j,"created"),et(rt,k,k.scopeId,lt,j),Lt){for(const Kt in Lt)Kt!=="value"&&!ps(Kt)&&c(rt,Kt,null,Lt[Kt],$,j);"value"in Lt&&c(rt,"value",null,Lt.value,$),(J=Lt.onVnodeBeforeMount)&&Bn(J,j,k)}Tt&&Hi(k,null,j,"beforeMount");const Gt=_f(X,Q);Gt&&Q.beforeEnter(rt),g(rt,N,U),((J=Lt&&Lt.onVnodeMounted)||Gt||Tt)&&on(()=>{J&&Bn(J,j,k),Gt&&Q.enter(rt),Tt&&Hi(k,null,j,"mounted")},X)},et=(k,N,U,j,X)=>{if(U&&D(k,U),j)for(let $=0;$<j.length;$++)D(k,j[$]);if(X){let $=X.subTree;if(N===$||oh($.type)&&($.ssContent===N||$.ssFallback===N)){const lt=X.vnode;et(k,lt,lt.scopeId,lt.slotScopeIds,X.parent)}}},_t=(k,N,U,j,X,$,lt,z,rt=0)=>{for(let J=rt;J<k.length;J++){const Lt=k[J]=z?xi(k[J]):Un(k[J]);Z(null,Lt,N,U,j,X,$,lt,z)}},ft=(k,N,U,j,X,$,lt)=>{const z=N.el=k.el;let{patchFlag:rt,dynamicChildren:J,dirs:Lt}=N;rt|=k.patchFlag&16;const dt=k.props||ae,Q=N.props||ae;let Tt;if(U&&qi(U,!1),(Tt=Q.onVnodeBeforeUpdate)&&Bn(Tt,U,N,k),Lt&&Hi(N,k,U,"beforeUpdate"),U&&qi(U,!0),(dt.innerHTML&&Q.innerHTML==null||dt.textContent&&Q.textContent==null)&&E(z,""),J?Bt(k.dynamicChildren,J,z,U,j,oa(N,X),$):lt||nt(k,N,z,null,U,j,oa(N,X),$,!1),rt>0){if(rt&16)St(z,dt,Q,U,X);else if(rt&2&&dt.class!==Q.class&&c(z,"class",null,Q.class,X),rt&4&&c(z,"style",dt.style,Q.style,X),rt&8){const Gt=N.dynamicProps;for(let Kt=0;Kt<Gt.length;Kt++){const at=Gt[Kt],ke=dt[at],It=Q[at];(It!==ke||at==="value")&&c(z,at,ke,It,X,U)}}rt&1&&k.children!==N.children&&E(z,N.children)}else!lt&&J==null&&St(z,dt,Q,U,X);((Tt=Q.onVnodeUpdated)||Lt)&&on(()=>{Tt&&Bn(Tt,U,N,k),Lt&&Hi(N,k,U,"updated")},j)},Bt=(k,N,U,j,X,$,lt)=>{for(let z=0;z<N.length;z++){const rt=k[z],J=N[z],Lt=rt.el&&(rt.type===In||!cs(rt,J)||rt.shapeFlag&70)?I(rt.el):U;Z(rt,J,Lt,null,j,X,$,lt,!0)}},St=(k,N,U,j,X)=>{if(N!==U){if(N!==ae)for(const $ in N)!ps($)&&!($ in U)&&c(k,$,N[$],null,X,j);for(const $ in U){if(ps($))continue;const lt=U[$],z=N[$];lt!==z&&$!=="value"&&c(k,$,z,lt,X,j)}"value"in U&&c(k,"value",N.value,U.value,X)}},Mt=(k,N,U,j,X,$,lt,z,rt)=>{const J=N.el=k?k.el:p(""),Lt=N.anchor=k?k.anchor:p("");let{patchFlag:dt,dynamicChildren:Q,slotScopeIds:Tt}=N;Tt&&(z=z?z.concat(Tt):Tt),k==null?(g(J,U,j),g(Lt,U,j),_t(N.children||[],U,Lt,X,$,lt,z,rt)):dt>0&&dt&64&&Q&&k.dynamicChildren?(Bt(k.dynamicChildren,Q,U,X,$,lt,z),(N.key!=null||X&&N===X.subTree)&&nh(k,N,!0)):nt(k,N,U,Lt,X,$,lt,z,rt)},ne=(k,N,U,j,X,$,lt,z,rt)=>{N.slotScopeIds=z,k==null?N.shapeFlag&512?X.ctx.activate(N,U,j,lt,rt):it(N,U,j,X,$,lt,rt):Rt(k,N,rt)},it=(k,N,U,j,X,$,lt)=>{const z=k.component=Of(k,j,X);if(Bl(k)&&(z.ctx.renderer=Xt),Rf(z,!1,lt),z.asyncDep){if(X&&X.registerDep(z,yt,lt),!k.el){const rt=z.subTree=ln(ji);ht(null,rt,N,U)}}else yt(z,k,N,U,X,$,lt)},Rt=(k,N,U)=>{const j=N.component=k.component;if(Ef(k,N,U))if(j.asyncDep&&!j.asyncResolved){bt(j,N,U);return}else j.next=N,j.update();else N.el=k.el,j.vnode=N},yt=(k,N,U,j,X,$,lt)=>{const z=()=>{if(k.isMounted){let{next:dt,bu:Q,u:Tt,parent:Gt,vnode:Kt}=k;{const Ke=ih(k);if(Ke){dt&&(dt.el=Kt.el,bt(k,dt,lt)),Ke.asyncDep.then(()=>{k.isUnmounted||z()});return}}let at=dt,ke;qi(k,!1),dt?(dt.el=Kt.el,bt(k,dt,lt)):dt=Kt,Q&&so(Q),(ke=dt.props&&dt.props.onVnodeBeforeUpdate)&&Bn(ke,Gt,dt,Kt),qi(k,!0);const It=xu(k),kt=k.subTree;k.subTree=It,Z(kt,It,I(kt.el),Ne(kt),k,X,$),dt.el=It.el,at===null&&bf(k,It.el),Tt&&on(Tt,X),(ke=dt.props&&dt.props.onVnodeUpdated)&&on(()=>Bn(ke,Gt,dt,Kt),X)}else{let dt;const{el:Q,props:Tt}=N,{bm:Gt,m:Kt,parent:at,root:ke,type:It}=k,kt=xs(N);qi(k,!1),Gt&&so(Gt),!kt&&(dt=Tt&&Tt.onVnodeBeforeMount)&&Bn(dt,at,N),qi(k,!0);{ke.ce&&ke.ce._injectChildStyle(It);const Ke=k.subTree=xu(k);Z(null,Ke,U,j,k,X,$),N.el=Ke.el}if(Kt&&on(Kt,X),!kt&&(dt=Tt&&Tt.onVnodeMounted)){const Ke=N;on(()=>Bn(dt,at,Ke),X)}(N.shapeFlag&256||at&&xs(at.vnode)&&at.vnode.shapeFlag&256)&&k.a&&on(k.a,X),k.isMounted=!0,N=U=j=null}};k.scope.on();const rt=k.effect=new ml(z);k.scope.off();const J=k.update=rt.run.bind(rt),Lt=k.job=rt.runIfDirty.bind(rt);Lt.i=k,Lt.id=k.uid,rt.scheduler=()=>Va(Lt),qi(k,!0),J()},bt=(k,N,U)=>{N.component=k;const j=k.vnode.props;k.vnode=N,k.next=null,uf(k,N.props,j,U),ff(k,N.children,U),Ei(),du(k),bi()},nt=(k,N,U,j,X,$,lt,z,rt=!1)=>{const J=k&&k.children,Lt=k?k.shapeFlag:0,dt=N.children,{patchFlag:Q,shapeFlag:Tt}=N;if(Q>0){if(Q&128){q(J,dt,U,j,X,$,lt,z,rt);return}else if(Q&256){ie(J,dt,U,j,X,$,lt,z,rt);return}}Tt&8?(Lt&16&&Ut(J,X,$),dt!==J&&E(U,dt)):Lt&16?Tt&16?q(J,dt,U,j,X,$,lt,z,rt):Ut(J,X,$,!0):(Lt&8&&E(U,""),Tt&16&&_t(dt,U,j,X,$,lt,z,rt))},ie=(k,N,U,j,X,$,lt,z,rt)=>{k=k||br,N=N||br;const J=k.length,Lt=N.length,dt=Math.min(J,Lt);let Q;for(Q=0;Q<dt;Q++){const Tt=N[Q]=rt?xi(N[Q]):Un(N[Q]);Z(k[Q],Tt,U,null,X,$,lt,z,rt)}J>Lt?Ut(k,X,$,!0,!1,dt):_t(N,U,j,X,$,lt,z,rt,dt)},q=(k,N,U,j,X,$,lt,z,rt)=>{let J=0;const Lt=N.length;let dt=k.length-1,Q=Lt-1;for(;J<=dt&&J<=Q;){const Tt=k[J],Gt=N[J]=rt?xi(N[J]):Un(N[J]);if(cs(Tt,Gt))Z(Tt,Gt,U,null,X,$,lt,z,rt);else break;J++}for(;J<=dt&&J<=Q;){const Tt=k[dt],Gt=N[Q]=rt?xi(N[Q]):Un(N[Q]);if(cs(Tt,Gt))Z(Tt,Gt,U,null,X,$,lt,z,rt);else break;dt--,Q--}if(J>dt){if(J<=Q){const Tt=Q+1,Gt=Tt<Lt?N[Tt].el:j;for(;J<=Q;)Z(null,N[J]=rt?xi(N[J]):Un(N[J]),U,Gt,X,$,lt,z,rt),J++}}else if(J>Q)for(;J<=dt;)Dt(k[J],X,$,!0),J++;else{const Tt=J,Gt=J,Kt=new Map;for(J=Gt;J<=Q;J++){const mt=N[J]=rt?xi(N[J]):Un(N[J]);mt.key!=null&&Kt.set(mt.key,J)}let at,ke=0;const It=Q-Gt+1;let kt=!1,Ke=0;const be=new Array(It);for(J=0;J<It;J++)be[J]=0;for(J=Tt;J<=dt;J++){const mt=k[J];if(ke>=It){Dt(mt,X,$,!0);continue}let $e;if(mt.key!=null)$e=Kt.get(mt.key);else for(at=Gt;at<=Q;at++)if(be[at-Gt]===0&&cs(mt,N[at])){$e=at;break}$e===void 0?Dt(mt,X,$,!0):(be[$e-Gt]=J+1,$e>=Ke?Ke=$e:kt=!0,Z(mt,N[$e],U,null,X,$,lt,z,rt),ke++)}const oi=kt?mf(be):br;for(at=oi.length-1,J=It-1;J>=0;J--){const mt=Gt+J,$e=N[mt],Cn=mt+1<Lt?N[mt+1].el:j;be[J]===0?Z(null,$e,U,Cn,X,$,lt,z,rt):kt&&(at<0||J!==oi[at]?Ct($e,U,Cn,2):at--)}}},Ct=(k,N,U,j,X=null)=>{const{el:$,type:lt,transition:z,children:rt,shapeFlag:J}=k;if(J&6){Ct(k.component.subTree,N,U,j);return}if(J&128){k.suspense.move(N,U,j);return}if(J&64){lt.move(k,N,U,Xt);return}if(lt===In){g($,N,U);for(let dt=0;dt<rt.length;dt++)Ct(rt[dt],N,U,j);g(k.anchor,N,U);return}if(lt===aa){H(k,N,U);return}if(j!==2&&J&1&&z)if(j===0)z.beforeEnter($),g($,N,U),on(()=>z.enter($),X);else{const{leave:dt,delayLeave:Q,afterLeave:Tt}=z,Gt=()=>g($,N,U),Kt=()=>{dt($,()=>{Gt(),Tt&&Tt()})};Q?Q($,Gt,Kt):Kt()}else g($,N,U)},Dt=(k,N,U,j=!1,X=!1)=>{const{type:$,props:lt,ref:z,children:rt,dynamicChildren:J,shapeFlag:Lt,patchFlag:dt,dirs:Q,cacheIndex:Tt}=k;if(dt===-2&&(X=!1),z!=null&&mo(z,null,U,k,!0),Tt!=null&&(N.renderCache[Tt]=void 0),Lt&256){N.ctx.deactivate(k);return}const Gt=Lt&1&&Q,Kt=!xs(k);let at;if(Kt&&(at=lt&&lt.onVnodeBeforeUnmount)&&Bn(at,N,k),Lt&6)qt(k.component,U,j);else{if(Lt&128){k.suspense.unmount(U,j);return}Gt&&Hi(k,null,N,"beforeUnmount"),Lt&64?k.type.remove(k,N,U,Xt,j):J&&!J.hasOnce&&($!==In||dt>0&&dt&64)?Ut(J,N,U,!1,!0):($===In&&dt&384||!X&&Lt&16)&&Ut(rt,N,U),j&&$t(k)}(Kt&&(at=lt&&lt.onVnodeUnmounted)||Gt)&&on(()=>{at&&Bn(at,N,k),Gt&&Hi(k,null,N,"unmounted")},U)},$t=k=>{const{type:N,el:U,anchor:j,transition:X}=k;if(N===In){vt(U,j);return}if(N===aa){V(k);return}const $=()=>{a(U),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(k.shapeFlag&1&&X&&!X.persisted){const{leave:lt,delayLeave:z}=X,rt=()=>lt(U,$);z?z(k.el,$,rt):rt()}else $()},vt=(k,N)=>{let U;for(;k!==N;)U=M(k),a(k),k=U;a(N)},qt=(k,N,U)=>{const{bum:j,scope:X,job:$,subTree:lt,um:z,m:rt,a:J}=k;yu(rt),yu(J),j&&so(j),X.stop(),$&&($.flags|=8,Dt(lt,k,N,U)),z&&on(z,N),on(()=>{k.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},Ut=(k,N,U,j=!1,X=!1,$=0)=>{for(let lt=$;lt<k.length;lt++)Dt(k[lt],N,U,j,X)},Ne=k=>{if(k.shapeFlag&6)return Ne(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const N=M(k.anchor||k.el),U=N&&N[zc];return U?M(U):N};let A=!1;const Ii=(k,N,U)=>{k==null?N._vnode&&Dt(N._vnode,null,null,!0):Z(N._vnode||null,k,N,null,null,null,U),N._vnode=k,A||(A=!0,du(),Dl(),A=!1)},Xt={p:Z,um:Dt,m:Ct,r:$t,mt:it,mc:_t,pc:nt,pbc:Bt,n:Ne,o:s};return{render:Ii,hydrate:void 0,createApp:sf(Ii)}}function oa({type:s,props:u},f){return f==="svg"&&s==="foreignObject"||f==="mathml"&&s==="annotation-xml"&&u&&u.encoding&&u.encoding.includes("html")?void 0:f}function qi({effect:s,job:u},f){f?(s.flags|=32,u.flags|=4):(s.flags&=-33,u.flags&=-5)}function _f(s,u){return(!s||s&&!s.pendingBranch)&&u&&!u.persisted}function nh(s,u,f=!1){const g=s.children,a=u.children;if(Ft(g)&&Ft(a))for(let c=0;c<g.length;c++){const m=g[c];let p=a[c];p.shapeFlag&1&&!p.dynamicChildren&&((p.patchFlag<=0||p.patchFlag===32)&&(p=a[c]=xi(a[c]),p.el=m.el),!f&&p.patchFlag!==-2&&nh(m,p)),p.type===Do&&(p.el=m.el)}}function mf(s){const u=s.slice(),f=[0];let g,a,c,m,p;const w=s.length;for(g=0;g<w;g++){const S=s[g];if(S!==0){if(a=f[f.length-1],s[a]<S){u[g]=a,f.push(g);continue}for(c=0,m=f.length-1;c<m;)p=c+m>>1,s[f[p]]<S?c=p+1:m=p;S<s[f[c]]&&(c>0&&(u[g]=f[c-1]),f[c]=g)}}for(c=f.length,m=f[c-1];c-- >0;)f[c]=m,m=u[m];return f}function ih(s){const u=s.subTree.component;if(u)return u.asyncDep&&!u.asyncResolved?u:ih(u)}function yu(s){if(s)for(let u=0;u<s.length;u++)s[u].flags|=8}const pf=Symbol.for("v-scx"),vf=()=>oo(pf);function ja(s,u){return Ka(s,null,u)}function ri(s,u,f){return Ka(s,u,f)}function Ka(s,u,f=ae){const{immediate:g,deep:a,flush:c,once:m}=f,p=je({},f),w=u&&g||!u&&c!=="post";let S;if(Is){if(c==="sync"){const D=vf();S=D.__watcherHandles||(D.__watcherHandles=[])}else if(!w){const D=()=>{};return D.stop=Hn,D.resume=Hn,D.pause=Hn,D}}const E=Xe;p.call=(D,R,Z)=>qn(D,E,R,Z);let I=!1;c==="post"?p.scheduler=D=>{on(D,E&&E.suspense)}:c!=="sync"&&(I=!0,p.scheduler=(D,R)=>{R?D():Va(D)}),p.augmentJob=D=>{u&&(D.flags|=4),I&&(D.flags|=2,E&&(D.id=E.uid,D.i=E))};const M=Mc(s,u,p);return Is&&(S?S.push(M):w&&M()),M}function yf(s,u,f){const g=this.proxy,a=Le(s)?s.includes(".")?rh(g,s):()=>g[s]:s.bind(g,g);let c;Ht(u)?c=u:(c=u.handler,f=u);const m=Cs(this),p=Ka(a,c.bind(g),f);return m(),p}function rh(s,u){const f=u.split(".");return()=>{let g=s;for(let a=0;a<f.length&&g;a++)g=g[f[a]];return g}}const xf=(s,u)=>u==="modelValue"||u==="model-value"?s.modelModifiers:s[`${u}Modifiers`]||s[`${ki(u)}Modifiers`]||s[`${$i(u)}Modifiers`];function Lf(s,u,...f){if(s.isUnmounted)return;const g=s.vnode.props||ae;let a=f;const c=u.startsWith("update:"),m=c&&xf(g,u.slice(7));m&&(m.trim&&(a=f.map(E=>Le(E)?E.trim():E)),m.number&&(a=f.map(ga)));let p,w=g[p=Qo(u)]||g[p=Qo(ki(u))];!w&&c&&(w=g[p=Qo($i(u))]),w&&qn(w,s,6,a);const S=g[p+"Once"];if(S){if(!s.emitted)s.emitted={};else if(s.emitted[p])return;s.emitted[p]=!0,qn(S,s,6,a)}}function sh(s,u,f=!1){const g=u.emitsCache,a=g.get(s);if(a!==void 0)return a;const c=s.emits;let m={},p=!1;if(!Ht(s)){const w=S=>{const E=sh(S,u,!0);E&&(p=!0,je(m,E))};!f&&u.mixins.length&&u.mixins.forEach(w),s.extends&&w(s.extends),s.mixins&&s.mixins.forEach(w)}return!c&&!p?(_e(s)&&g.set(s,null),null):(Ft(c)?c.forEach(w=>m[w]=null):je(m,c),_e(s)&&g.set(s,m),m)}function Ro(s,u){return!s||!Io(u)?!1:(u=u.slice(2).replace(/Once$/,""),ee(s,u[0].toLowerCase()+u.slice(1))||ee(s,$i(u))||ee(s,u))}function xu(s){const{type:u,vnode:f,proxy:g,withProxy:a,propsOptions:[c],slots:m,attrs:p,emit:w,render:S,renderCache:E,props:I,data:M,setupState:D,ctx:R,inheritAttrs:Z}=s,ct=_o(s);let ht,st;try{if(f.shapeFlag&4){const V=a||g,tt=V;ht=Un(S.call(tt,V,E,I,D,M,R)),st=p}else{const V=u;ht=Un(V.length>1?V(I,{attrs:p,slots:m,emit:w}):V(I,null)),st=u.props?p:kf(p)}}catch(V){ks.length=0,No(V,s,1),ht=ln(ji)}let H=ht;if(st&&Z!==!1){const V=Object.keys(st),{shapeFlag:tt}=H;V.length&&tt&7&&(c&&V.some(Ra)&&(st=wf(st,c)),H=Mr(H,st,!1,!0))}return f.dirs&&(H=Mr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(f.dirs):f.dirs),f.transition&&Wa(H,f.transition),ht=H,_o(ct),ht}const kf=s=>{let u;for(const f in s)(f==="class"||f==="style"||Io(f))&&((u||(u={}))[f]=s[f]);return u},wf=(s,u)=>{const f={};for(const g in s)(!Ra(g)||!(g.slice(9)in u))&&(f[g]=s[g]);return f};function Ef(s,u,f){const{props:g,children:a,component:c}=s,{props:m,children:p,patchFlag:w}=u,S=c.emitsOptions;if(u.dirs||u.transition)return!0;if(f&&w>=0){if(w&1024)return!0;if(w&16)return g?Lu(g,m,S):!!m;if(w&8){const E=u.dynamicProps;for(let I=0;I<E.length;I++){const M=E[I];if(m[M]!==g[M]&&!Ro(S,M))return!0}}}else return(a||p)&&(!p||!p.$stable)?!0:g===m?!1:g?m?Lu(g,m,S):!0:!!m;return!1}function Lu(s,u,f){const g=Object.keys(u);if(g.length!==Object.keys(s).length)return!0;for(let a=0;a<g.length;a++){const c=g[a];if(u[c]!==s[c]&&!Ro(f,c))return!0}return!1}function bf({vnode:s,parent:u},f){for(;u;){const g=u.subTree;if(g.suspense&&g.suspense.activeBranch===s&&(g.el=s.el),g===s)(s=u.vnode).el=f,u=u.parent;else break}}const oh=s=>s.__isSuspense;function Tf(s,u){u&&u.pendingBranch?Ft(s)?u.effects.push(...s):u.effects.push(s):Dc(s)}const In=Symbol.for("v-fgt"),Do=Symbol.for("v-txt"),ji=Symbol.for("v-cmt"),aa=Symbol.for("v-stc"),ks=[];let un=null;function We(s=!1){ks.push(un=s?null:[])}function If(){ks.pop(),un=ks[ks.length-1]||null}let Ts=1;function ku(s,u=!1){Ts+=s,s<0&&un&&u&&(un.hasOnce=!0)}function ah(s){return s.dynamicChildren=Ts>0?un||br:null,If(),Ts>0&&un&&un.push(s),s}function Pn(s,u,f,g,a,c){return ah(Ot(s,u,f,g,a,c,!0))}function vo(s,u,f,g,a){return ah(ln(s,u,f,g,a,!0))}function uh(s){return s?s.__v_isVNode===!0:!1}function cs(s,u){return s.type===u.type&&s.key===u.key}const lh=({key:s})=>s??null,ao=({ref:s,ref_key:u,ref_for:f})=>(typeof s=="number"&&(s=""+s),s!=null?Le(s)||Ge(s)||Ht(s)?{i:Ln,r:s,k:u,f:!!f}:s:null);function Ot(s,u=null,f=null,g=0,a=null,c=s===In?0:1,m=!1,p=!1){const w={__v_isVNode:!0,__v_skip:!0,type:s,props:u,key:u&&lh(u),ref:u&&ao(u),scopeId:zl,slotScopeIds:null,children:f,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:g,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Ln};return p?($a(w,f),c&128&&s.normalize(w)):f&&(w.shapeFlag|=Le(f)?8:16),Ts>0&&!m&&un&&(w.patchFlag>0||c&6)&&w.patchFlag!==32&&un.push(w),w}const ln=Sf;function Sf(s,u=null,f=null,g=0,a=null,c=!1){if((!s||s===Kc)&&(s=ji),uh(s)){const p=Mr(s,u,!0);return f&&$a(p,f),Ts>0&&!c&&un&&(p.shapeFlag&6?un[un.indexOf(s)]=p:un.push(p)),p.patchFlag=-2,p}if(Ff(s)&&(s=s.__vccOpts),u){u=Pf(u);let{class:p,style:w}=u;p&&!Le(p)&&(u.class=Ir(p)),_e(w)&&(Ya(w)&&!Ft(w)&&(w=je({},w)),u.style=za(w))}const m=Le(s)?1:oh(s)?128:Fc(s)?64:_e(s)?4:Ht(s)?2:0;return Ot(s,u,f,g,a,m,c,!0)}function Pf(s){return s?Ya(s)||jl(s)?je({},s):s:null}function Mr(s,u,f=!1,g=!1){const{props:a,ref:c,patchFlag:m,children:p,transition:w}=s,S=u?Cf(a||{},u):a,E={__v_isVNode:!0,__v_skip:!0,type:s.type,props:S,key:S&&lh(S),ref:u&&u.ref?f&&c?Ft(c)?c.concat(ao(u)):[c,ao(u)]:ao(u):c,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:p,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:u&&s.type!==In?m===-1?16:m|16:m,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:w,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Mr(s.ssContent),ssFallback:s.ssFallback&&Mr(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return w&&g&&Wa(E,w.clone(E)),E}function yo(s=" ",u=0){return ln(Do,null,s,u)}function Ea(s="",u=!1){return u?(We(),vo(ji,null,s)):ln(ji,null,s)}function Un(s){return s==null||typeof s=="boolean"?ln(ji):Ft(s)?ln(In,null,s.slice()):uh(s)?xi(s):ln(Do,null,String(s))}function xi(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Mr(s)}function $a(s,u){let f=0;const{shapeFlag:g}=s;if(u==null)u=null;else if(Ft(u))f=16;else if(typeof u=="object")if(g&65){const a=u.default;a&&(a._c&&(a._d=!1),$a(s,a()),a._c&&(a._d=!0));return}else{f=32;const a=u._;!a&&!jl(u)?u._ctx=Ln:a===3&&Ln&&(Ln.slots._===1?u._=1:(u._=2,s.patchFlag|=1024))}else Ht(u)?(u={default:u,_ctx:Ln},f=32):(u=String(u),g&64?(f=16,u=[yo(u)]):f=8);s.children=u,s.shapeFlag|=f}function Cf(...s){const u={};for(let f=0;f<s.length;f++){const g=s[f];for(const a in g)if(a==="class")u.class!==g.class&&(u.class=Ir([u.class,g.class]));else if(a==="style")u.style=za([u.style,g.style]);else if(Io(a)){const c=u[a],m=g[a];m&&c!==m&&!(Ft(c)&&c.includes(m))&&(u[a]=c?[].concat(c,m):m)}else a!==""&&(u[a]=g[a])}return u}function Bn(s,u,f,g=null){qn(s,u,7,[f,g])}const Mf=Vl();let Nf=0;function Of(s,u,f){const g=s.type,a=(u?u.appContext:s.appContext)||Mf,c={uid:Nf++,vnode:s,type:g,parent:u,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ic(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:u?u.provides:Object.create(a.provides),ids:u?u.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$l(g,a),emitsOptions:sh(g,a),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:g.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:f,suspenseId:f?f.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=u?u.root:c,c.emit=Lf.bind(null,c),s.ce&&s.ce(c),c}let Xe=null,xo,ba;{const s=Co(),u=(f,g)=>{let a;return(a=s[f])||(a=s[f]=[]),a.push(g),c=>{a.length>1?a.forEach(m=>m(c)):a[0](c)}};xo=u("__VUE_INSTANCE_SETTERS__",f=>Xe=f),ba=u("__VUE_SSR_SETTERS__",f=>Is=f)}const Cs=s=>{const u=Xe;return xo(s),s.scope.on(),()=>{s.scope.off(),xo(u)}},wu=()=>{Xe&&Xe.scope.off(),xo(null)};function hh(s){return s.vnode.shapeFlag&4}let Is=!1;function Rf(s,u=!1,f=!1){u&&ba(u);const{props:g,children:a}=s.vnode,c=hh(s);af(s,g,c,u),cf(s,a,f);const m=c?Df(s,u):void 0;return u&&ba(!1),m}function Df(s,u){const f=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,$c);const{setup:g}=f;if(g){Ei();const a=s.setupContext=g.length>1?zf(s):null,c=Cs(s),m=Ps(g,s,0,[s.props,a]),p=ul(m);if(bi(),c(),(p||s.sp)&&!xs(s)&&Fl(s),p){if(m.then(wu,wu),u)return m.then(w=>{Eu(s,w)}).catch(w=>{No(w,s,0)});s.asyncDep=m}else Eu(s,m)}else ch(s)}function Eu(s,u,f){Ht(u)?s.type.__ssrInlineRender?s.ssrRender=u:s.render=u:_e(u)&&(s.setupState=Nl(u)),ch(s)}function ch(s,u,f){const g=s.type;s.render||(s.render=g.render||Hn);{const a=Cs(s);Ei();try{Jc(s)}finally{bi(),a()}}}const Af={get(s,u){return Fe(s,"get",""),s[u]}};function zf(s){const u=f=>{s.exposed=f||{}};return{attrs:new Proxy(s.attrs,Af),slots:s.slots,emit:s.emit,expose:u}}function Ao(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Nl(Ec(s.exposed)),{get(u,f){if(f in u)return u[f];if(f in Ls)return Ls[f](s)},has(u,f){return f in u||f in Ls}})):s.proxy}function Ff(s){return Ht(s)&&"__vccOpts"in s}const Lo=(s,u)=>Pc(s,u,Is),Bf="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ta;const bu=typeof window<"u"&&window.trustedTypes;if(bu)try{Ta=bu.createPolicy("vue",{createHTML:s=>s})}catch{}const fh=Ta?s=>Ta.createHTML(s):s=>s,Gf="http://www.w3.org/2000/svg",Uf="http://www.w3.org/1998/Math/MathML",ei=typeof document<"u"?document:null,Tu=ei&&ei.createElement("template"),Zf={insert:(s,u,f)=>{u.insertBefore(s,f||null)},remove:s=>{const u=s.parentNode;u&&u.removeChild(s)},createElement:(s,u,f,g)=>{const a=u==="svg"?ei.createElementNS(Gf,s):u==="mathml"?ei.createElementNS(Uf,s):f?ei.createElement(s,{is:f}):ei.createElement(s);return s==="select"&&g&&g.multiple!=null&&a.setAttribute("multiple",g.multiple),a},createText:s=>ei.createTextNode(s),createComment:s=>ei.createComment(s),setText:(s,u)=>{s.nodeValue=u},setElementText:(s,u)=>{s.textContent=u},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>ei.querySelector(s),setScopeId(s,u){s.setAttribute(u,"")},insertStaticContent(s,u,f,g,a,c){const m=f?f.previousSibling:u.lastChild;if(a&&(a===c||a.nextSibling))for(;u.insertBefore(a.cloneNode(!0),f),!(a===c||!(a=a.nextSibling)););else{Tu.innerHTML=fh(g==="svg"?`<svg>${s}</svg>`:g==="mathml"?`<math>${s}</math>`:s);const p=Tu.content;if(g==="svg"||g==="mathml"){const w=p.firstChild;for(;w.firstChild;)p.appendChild(w.firstChild);p.removeChild(w)}u.insertBefore(p,f)}return[m?m.nextSibling:u.firstChild,f?f.previousSibling:u.lastChild]}},Hf=Symbol("_vtc");function qf(s,u,f){const g=s[Hf];g&&(u=(u?[u,...g]:[...g]).join(" ")),u==null?s.removeAttribute("class"):f?s.setAttribute("class",u):s.className=u}const Iu=Symbol("_vod"),Yf=Symbol("_vsh"),Vf=Symbol(""),Wf=/(^|;)\s*display\s*:/;function Xf(s,u,f){const g=s.style,a=Le(f);let c=!1;if(f&&!a){if(u)if(Le(u))for(const m of u.split(";")){const p=m.slice(0,m.indexOf(":")).trim();f[p]==null&&uo(g,p,"")}else for(const m in u)f[m]==null&&uo(g,m,"");for(const m in f)m==="display"&&(c=!0),uo(g,m,f[m])}else if(a){if(u!==f){const m=g[Vf];m&&(f+=";"+m),g.cssText=f,c=Wf.test(f)}}else u&&s.removeAttribute("style");Iu in s&&(s[Iu]=c?g.display:"",s[Yf]&&(g.display="none"))}const Su=/\s*!important$/;function uo(s,u,f){if(Ft(f))f.forEach(g=>uo(s,u,g));else if(f==null&&(f=""),u.startsWith("--"))s.setProperty(u,f);else{const g=jf(s,u);Su.test(f)?s.setProperty($i(g),f.replace(Su,""),"important"):s[g]=f}}const Pu=["Webkit","Moz","ms"],ua={};function jf(s,u){const f=ua[u];if(f)return f;let g=ki(u);if(g!=="filter"&&g in s)return ua[u]=g;g=cl(g);for(let a=0;a<Pu.length;a++){const c=Pu[a]+g;if(c in s)return ua[u]=c}return u}const Cu="http://www.w3.org/1999/xlink";function Mu(s,u,f,g,a,c=nc(u)){g&&u.startsWith("xlink:")?f==null?s.removeAttributeNS(Cu,u.slice(6,u.length)):s.setAttributeNS(Cu,u,f):f==null||c&&!dl(f)?s.removeAttribute(u):s.setAttribute(u,c?"":wi(f)?String(f):f)}function Nu(s,u,f,g,a){if(u==="innerHTML"||u==="textContent"){f!=null&&(s[u]=u==="innerHTML"?fh(f):f);return}const c=s.tagName;if(u==="value"&&c!=="PROGRESS"&&!c.includes("-")){const p=c==="OPTION"?s.getAttribute("value")||"":s.value,w=f==null?s.type==="checkbox"?"on":"":String(f);(p!==w||!("_value"in s))&&(s.value=w),f==null&&s.removeAttribute(u),s._value=f;return}let m=!1;if(f===""||f==null){const p=typeof s[u];p==="boolean"?f=dl(f):f==null&&p==="string"?(f="",m=!0):p==="number"&&(f=0,m=!0)}try{s[u]=f}catch{}m&&s.removeAttribute(a||u)}function Er(s,u,f,g){s.addEventListener(u,f,g)}function Kf(s,u,f,g){s.removeEventListener(u,f,g)}const Ou=Symbol("_vei");function $f(s,u,f,g,a=null){const c=s[Ou]||(s[Ou]={}),m=c[u];if(g&&m)m.value=g;else{const[p,w]=Jf(u);if(g){const S=c[u]=ed(g,a);Er(s,p,S,w)}else m&&(Kf(s,p,m,w),c[u]=void 0)}}const Ru=/(?:Once|Passive|Capture)$/;function Jf(s){let u;if(Ru.test(s)){u={};let g;for(;g=s.match(Ru);)s=s.slice(0,s.length-g[0].length),u[g[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):$i(s.slice(2)),u]}let la=0;const Qf=Promise.resolve(),td=()=>la||(Qf.then(()=>la=0),la=Date.now());function ed(s,u){const f=g=>{if(!g._vts)g._vts=Date.now();else if(g._vts<=f.attached)return;qn(nd(g,f.value),u,5,[g])};return f.value=s,f.attached=td(),f}function nd(s,u){if(Ft(u)){const f=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{f.call(s),s._stopped=!0},u.map(g=>a=>!a._stopped&&g&&g(a))}else return u}const Du=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,id=(s,u,f,g,a,c)=>{const m=a==="svg";u==="class"?qf(s,g,m):u==="style"?Xf(s,f,g):Io(u)?Ra(u)||$f(s,u,f,g,c):(u[0]==="."?(u=u.slice(1),!0):u[0]==="^"?(u=u.slice(1),!1):rd(s,u,g,m))?(Nu(s,u,g),!s.tagName.includes("-")&&(u==="value"||u==="checked"||u==="selected")&&Mu(s,u,g,m,c,u!=="value")):s._isVueCE&&(/[A-Z]/.test(u)||!Le(g))?Nu(s,ki(u),g,c,u):(u==="true-value"?s._trueValue=g:u==="false-value"&&(s._falseValue=g),Mu(s,u,g,m))};function rd(s,u,f,g){if(g)return!!(u==="innerHTML"||u==="textContent"||u in s&&Du(u)&&Ht(f));if(u==="spellcheck"||u==="draggable"||u==="translate"||u==="form"||u==="list"&&s.tagName==="INPUT"||u==="type"&&s.tagName==="TEXTAREA")return!1;if(u==="width"||u==="height"){const a=s.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Du(u)&&Le(f)?!1:u in s}const Au=s=>{const u=s.props["onUpdate:modelValue"]||!1;return Ft(u)?f=>so(u,f):u};function sd(s){s.target.composing=!0}function zu(s){const u=s.target;u.composing&&(u.composing=!1,u.dispatchEvent(new Event("input")))}const ha=Symbol("_assign"),ca={created(s,{modifiers:{lazy:u,trim:f,number:g}},a){s[ha]=Au(a);const c=g||a.props&&a.props.type==="number";Er(s,u?"change":"input",m=>{if(m.target.composing)return;let p=s.value;f&&(p=p.trim()),c&&(p=ga(p)),s[ha](p)}),f&&Er(s,"change",()=>{s.value=s.value.trim()}),u||(Er(s,"compositionstart",sd),Er(s,"compositionend",zu),Er(s,"change",zu))},mounted(s,{value:u}){s.value=u??""},beforeUpdate(s,{value:u,oldValue:f,modifiers:{lazy:g,trim:a,number:c}},m){if(s[ha]=Au(m),s.composing)return;const p=(c||s.type==="number")&&!/^0\d/.test(s.value)?ga(s.value):s.value,w=u??"";p!==w&&(document.activeElement===s&&s.type!=="range"&&(g&&u===f||a&&s.value.trim()===w)||(s.value=w))}},od=je({patchProp:id},Zf);let Fu;function ad(){return Fu||(Fu=df(od))}const ud=(...s)=>{const u=ad().createApp(...s),{mount:f}=u;return u.mount=g=>{const a=hd(g);if(!a)return;const c=u._component;!Ht(c)&&!c.render&&!c.template&&(c.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const m=f(a,!1,ld(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),m},u};function ld(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function hd(s){return Le(s)?document.querySelector(s):s}function dh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var gs={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var cd=gs.exports,Bu;function fd(){return Bu||(Bu=1,function(s,u){(function(f,g){g(u)})(cd,function(f){var g="1.9.4";function a(n){var o,h,_,y;for(h=1,_=arguments.length;h<_;h++){y=arguments[h];for(o in y)n[o]=y[o]}return n}var c=Object.create||function(){function n(){}return function(o){return n.prototype=o,new n}}();function m(n,o){var h=Array.prototype.slice;if(n.bind)return n.bind.apply(n,h.call(arguments,1));var _=h.call(arguments,2);return function(){return n.apply(o,_.length?_.concat(h.call(arguments)):arguments)}}var p=0;function w(n){return"_leaflet_id"in n||(n._leaflet_id=++p),n._leaflet_id}function S(n,o,h){var _,y,T,C;return C=function(){_=!1,y&&(T.apply(h,y),y=!1)},T=function(){_?y=arguments:(n.apply(h,arguments),setTimeout(C,o),_=!0)},T}function E(n,o,h){var _=o[1],y=o[0],T=_-y;return n===_&&h?n:((n-y)%T+T)%T+y}function I(){return!1}function M(n,o){if(o===!1)return n;var h=Math.pow(10,o===void 0?6:o);return Math.round(n*h)/h}function D(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function R(n){return D(n).split(/\s+/)}function Z(n,o){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?c(n.options):{});for(var h in o)n.options[h]=o[h];return n.options}function ct(n,o,h){var _=[];for(var y in n)_.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(n[y]));return(!o||o.indexOf("?")===-1?"?":"&")+_.join("&")}var ht=/\{ *([\w_ -]+) *\}/g;function st(n,o){return n.replace(ht,function(h,_){var y=o[_];if(y===void 0)throw new Error("No value provided for variable "+h);return typeof y=="function"&&(y=y(o)),y})}var H=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function V(n,o){for(var h=0;h<n.length;h++)if(n[h]===o)return h;return-1}var tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function W(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var et=0;function _t(n){var o=+new Date,h=Math.max(0,16-(o-et));return et=o+h,window.setTimeout(n,h)}var ft=window.requestAnimationFrame||W("RequestAnimationFrame")||_t,Bt=window.cancelAnimationFrame||W("CancelAnimationFrame")||W("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function St(n,o,h){if(h&&ft===_t)n.call(o);else return ft.call(window,m(n,o))}function Mt(n){n&&Bt.call(window,n)}var ne={__proto__:null,extend:a,create:c,bind:m,get lastId(){return p},stamp:w,throttle:S,wrapNum:E,falseFn:I,formatNum:M,trim:D,splitWords:R,setOptions:Z,getParamString:ct,template:st,isArray:H,indexOf:V,emptyImageUrl:tt,requestFn:ft,cancelFn:Bt,requestAnimFrame:St,cancelAnimFrame:Mt};function it(){}it.extend=function(n){var o=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=o.__super__=this.prototype,_=c(h);_.constructor=o,o.prototype=_;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(o[y]=this[y]);return n.statics&&a(o,n.statics),n.includes&&(Rt(n.includes),a.apply(null,[_].concat(n.includes))),a(_,n),delete _.statics,delete _.includes,_.options&&(_.options=h.options?c(h.options):{},a(_.options,n.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,C=_._initHooks.length;T<C;T++)_._initHooks[T].call(this)}},o},it.include=function(n){var o=this.prototype.options;return a(this.prototype,n),n.options&&(this.prototype.options=o,this.mergeOptions(n.options)),this},it.mergeOptions=function(n){return a(this.prototype.options,n),this},it.addInitHook=function(n){var o=Array.prototype.slice.call(arguments,1),h=typeof n=="function"?n:function(){this[n].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function Rt(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=H(n)?n:[n];for(var o=0;o<n.length;o++)n[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var yt={on:function(n,o,h){if(typeof n=="object")for(var _ in n)this._on(_,n[_],o);else{n=R(n);for(var y=0,T=n.length;y<T;y++)this._on(n[y],o,h)}return this},off:function(n,o,h){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var _ in n)this._off(_,n[_],o);else{n=R(n);for(var y=arguments.length===1,T=0,C=n.length;T<C;T++)y?this._off(n[T]):this._off(n[T],o,h)}return this},_on:function(n,o,h,_){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(n,o,h)===!1){h===this&&(h=void 0);var y={fn:o,ctx:h};_&&(y.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(y)}},_off:function(n,o,h){var _,y,T;if(this._events&&(_=this._events[n],!!_)){if(arguments.length===1){if(this._firingCount)for(y=0,T=_.length;y<T;y++)_[y].fn=I;delete this._events[n];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var C=this._listens(n,o,h);if(C!==!1){var B=_[C];this._firingCount&&(B.fn=I,this._events[n]=_=_.slice()),_.splice(C,1)}}},fire:function(n,o,h){if(!this.listens(n,h))return this;var _=a({},o,{type:n,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var y=this._events[n];if(y){this._firingCount=this._firingCount+1||1;for(var T=0,C=y.length;T<C;T++){var B=y[T],G=B.fn;B.once&&this.off(n,G,B.ctx),G.call(B.ctx||this,_)}this._firingCount--}}return h&&this._propagateEvent(_),this},listens:function(n,o,h,_){typeof n!="string"&&console.warn('"string" type argument expected');var y=o;typeof o!="function"&&(_=!!o,y=void 0,h=void 0);var T=this._events&&this._events[n];if(T&&T.length&&this._listens(n,y,h)!==!1)return!0;if(_){for(var C in this._eventParents)if(this._eventParents[C].listens(n,o,h,_))return!0}return!1},_listens:function(n,o,h){if(!this._events)return!1;var _=this._events[n]||[];if(!o)return!!_.length;h===this&&(h=void 0);for(var y=0,T=_.length;y<T;y++)if(_[y].fn===o&&_[y].ctx===h)return y;return!1},once:function(n,o,h){if(typeof n=="object")for(var _ in n)this._on(_,n[_],o,!0);else{n=R(n);for(var y=0,T=n.length;y<T;y++)this._on(n[y],o,h,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[w(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[w(n)],this},_propagateEvent:function(n){for(var o in this._eventParents)this._eventParents[o].fire(n.type,a({layer:n.target,propagatedFrom:n.target},n),!0)}};yt.addEventListener=yt.on,yt.removeEventListener=yt.clearAllEventListeners=yt.off,yt.addOneTimeEventListener=yt.once,yt.fireEvent=yt.fire,yt.hasEventListeners=yt.listens;var bt=it.extend(yt);function nt(n,o,h){this.x=h?Math.round(n):n,this.y=h?Math.round(o):o}var ie=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};nt.prototype={clone:function(){return new nt(this.x,this.y)},add:function(n){return this.clone()._add(q(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(q(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new nt(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new nt(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ie(this.x),this.y=ie(this.y),this},distanceTo:function(n){n=q(n);var o=n.x-this.x,h=n.y-this.y;return Math.sqrt(o*o+h*h)},equals:function(n){return n=q(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=q(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function q(n,o,h){return n instanceof nt?n:H(n)?new nt(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new nt(n.x,n.y):new nt(n,o,h)}function Ct(n,o){if(n)for(var h=o?[n,o]:n,_=0,y=h.length;_<y;_++)this.extend(h[_])}Ct.prototype={extend:function(n){var o,h;if(!n)return this;if(n instanceof nt||typeof n[0]=="number"||"x"in n)o=h=q(n);else if(n=Dt(n),o=n.min,h=n.max,!o||!h)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=h.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(n){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var o,h;return typeof n[0]=="number"||n instanceof nt?n=q(n):n=Dt(n),n instanceof Ct?(o=n.min,h=n.max):o=h=n,o.x>=this.min.x&&h.x<=this.max.x&&o.y>=this.min.y&&h.y<=this.max.y},intersects:function(n){n=Dt(n);var o=this.min,h=this.max,_=n.min,y=n.max,T=y.x>=o.x&&_.x<=h.x,C=y.y>=o.y&&_.y<=h.y;return T&&C},overlaps:function(n){n=Dt(n);var o=this.min,h=this.max,_=n.min,y=n.max,T=y.x>o.x&&_.x<h.x,C=y.y>o.y&&_.y<h.y;return T&&C},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var o=this.min,h=this.max,_=Math.abs(o.x-h.x)*n,y=Math.abs(o.y-h.y)*n;return Dt(q(o.x-_,o.y-y),q(h.x+_,h.y+y))},equals:function(n){return n?(n=Dt(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function Dt(n,o){return!n||n instanceof Ct?n:new Ct(n,o)}function $t(n,o){if(n)for(var h=o?[n,o]:n,_=0,y=h.length;_<y;_++)this.extend(h[_])}$t.prototype={extend:function(n){var o=this._southWest,h=this._northEast,_,y;if(n instanceof qt)_=n,y=n;else if(n instanceof $t){if(_=n._southWest,y=n._northEast,!_||!y)return this}else return n?this.extend(Ut(n)||vt(n)):this;return!o&&!h?(this._southWest=new qt(_.lat,_.lng),this._northEast=new qt(y.lat,y.lng)):(o.lat=Math.min(_.lat,o.lat),o.lng=Math.min(_.lng,o.lng),h.lat=Math.max(y.lat,h.lat),h.lng=Math.max(y.lng,h.lng)),this},pad:function(n){var o=this._southWest,h=this._northEast,_=Math.abs(o.lat-h.lat)*n,y=Math.abs(o.lng-h.lng)*n;return new $t(new qt(o.lat-_,o.lng-y),new qt(h.lat+_,h.lng+y))},getCenter:function(){return new qt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new qt(this.getNorth(),this.getWest())},getSouthEast:function(){return new qt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof qt||"lat"in n?n=Ut(n):n=vt(n);var o=this._southWest,h=this._northEast,_,y;return n instanceof $t?(_=n.getSouthWest(),y=n.getNorthEast()):_=y=n,_.lat>=o.lat&&y.lat<=h.lat&&_.lng>=o.lng&&y.lng<=h.lng},intersects:function(n){n=vt(n);var o=this._southWest,h=this._northEast,_=n.getSouthWest(),y=n.getNorthEast(),T=y.lat>=o.lat&&_.lat<=h.lat,C=y.lng>=o.lng&&_.lng<=h.lng;return T&&C},overlaps:function(n){n=vt(n);var o=this._southWest,h=this._northEast,_=n.getSouthWest(),y=n.getNorthEast(),T=y.lat>o.lat&&_.lat<h.lat,C=y.lng>o.lng&&_.lng<h.lng;return T&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,o){return n?(n=vt(n),this._southWest.equals(n.getSouthWest(),o)&&this._northEast.equals(n.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function vt(n,o){return n instanceof $t?n:new $t(n,o)}function qt(n,o,h){if(isNaN(n)||isNaN(o))throw new Error("Invalid LatLng object: ("+n+", "+o+")");this.lat=+n,this.lng=+o,h!==void 0&&(this.alt=+h)}qt.prototype={equals:function(n,o){if(!n)return!1;n=Ut(n);var h=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return h<=(o===void 0?1e-9:o)},toString:function(n){return"LatLng("+M(this.lat,n)+", "+M(this.lng,n)+")"},distanceTo:function(n){return A.distance(this,Ut(n))},wrap:function(){return A.wrapLatLng(this)},toBounds:function(n){var o=180*n/40075017,h=o/Math.cos(Math.PI/180*this.lat);return vt([this.lat-o,this.lng-h],[this.lat+o,this.lng+h])},clone:function(){return new qt(this.lat,this.lng,this.alt)}};function Ut(n,o,h){return n instanceof qt?n:H(n)&&typeof n[0]!="object"?n.length===3?new qt(n[0],n[1],n[2]):n.length===2?new qt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new qt(n.lat,"lng"in n?n.lng:n.lon,n.alt):o===void 0?null:new qt(n,o,h)}var Ne={latLngToPoint:function(n,o){var h=this.projection.project(n),_=this.scale(o);return this.transformation._transform(h,_)},pointToLatLng:function(n,o){var h=this.scale(o),_=this.transformation.untransform(n,h);return this.projection.unproject(_)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var o=this.projection.bounds,h=this.scale(n),_=this.transformation.transform(o.min,h),y=this.transformation.transform(o.max,h);return new Ct(_,y)},infinite:!1,wrapLatLng:function(n){var o=this.wrapLng?E(n.lng,this.wrapLng,!0):n.lng,h=this.wrapLat?E(n.lat,this.wrapLat,!0):n.lat,_=n.alt;return new qt(h,o,_)},wrapLatLngBounds:function(n){var o=n.getCenter(),h=this.wrapLatLng(o),_=o.lat-h.lat,y=o.lng-h.lng;if(_===0&&y===0)return n;var T=n.getSouthWest(),C=n.getNorthEast(),B=new qt(T.lat-_,T.lng-y),G=new qt(C.lat-_,C.lng-y);return new $t(B,G)}},A=a({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(n,o){var h=Math.PI/180,_=n.lat*h,y=o.lat*h,T=Math.sin((o.lat-n.lat)*h/2),C=Math.sin((o.lng-n.lng)*h/2),B=T*T+Math.cos(_)*Math.cos(y)*C*C,G=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*G}}),Ii=6378137,Xt={R:Ii,MAX_LATITUDE:85.0511287798,project:function(n){var o=Math.PI/180,h=this.MAX_LATITUDE,_=Math.max(Math.min(h,n.lat),-h),y=Math.sin(_*o);return new nt(this.R*n.lng*o,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(n){var o=180/Math.PI;return new qt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*o,n.x*o/this.R)},bounds:function(){var n=Ii*Math.PI;return new Ct([-n,-n],[n,n])}()};function xt(n,o,h,_){if(H(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=o,this._c=h,this._d=_}xt.prototype={transform:function(n,o){return this._transform(n.clone(),o)},_transform:function(n,o){return o=o||1,n.x=o*(this._a*n.x+this._b),n.y=o*(this._c*n.y+this._d),n},untransform:function(n,o){return o=o||1,new nt((n.x/o-this._b)/this._a,(n.y/o-this._d)/this._c)}};function k(n,o,h,_){return new xt(n,o,h,_)}var N=a({},A,{code:"EPSG:3857",projection:Xt,transformation:function(){var n=.5/(Math.PI*Xt.R);return k(n,.5,-n,.5)}()}),U=a({},N,{code:"EPSG:900913"});function j(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function X(n,o){var h="",_,y,T,C,B,G;for(_=0,T=n.length;_<T;_++){for(B=n[_],y=0,C=B.length;y<C;y++)G=B[y],h+=(y?"L":"M")+G.x+" "+G.y;h+=o?wt.svg?"z":"x":""}return h||"M0 0"}var $=document.documentElement.style,lt="ActiveXObject"in window,z=lt&&!document.addEventListener,rt="msLaunchUri"in navigator&&!("documentMode"in document),J=Te("webkit"),Lt=Te("android"),dt=Te("android 2")||Te("android 3"),Q=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Tt=Lt&&Te("Google")&&Q<537&&!("AudioNode"in window),Gt=!!window.opera,Kt=!rt&&Te("chrome"),at=Te("gecko")&&!J&&!Gt&&!lt,ke=!Kt&&Te("safari"),It=Te("phantom"),kt="OTransition"in $,Ke=navigator.platform.indexOf("Win")===0,be=lt&&"transition"in $,oi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!dt,mt="MozPerspective"in $,$e=!window.L_DISABLE_3D&&(be||oi||mt)&&!kt&&!It,Cn=typeof orientation<"u"||Te("mobile"),Ar=Cn&&J,Je=Cn&&oi,ai=!window.PointerEvent&&window.MSPointerEvent,nn=!!(window.PointerEvent||ai),zr="ontouchstart"in window||!!window.TouchEvent,Ji=!window.L_NO_TOUCH&&(zr||nn),zo=Cn&&Gt,Ms=Cn&&at,Vn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ot=function(){var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",I,o),window.removeEventListener("testPassiveEventSupport",I,o)}catch{}return n}(),Qi=function(){return!!document.createElement("canvas").getContext}(),ui=!!(document.createElementNS&&j("svg").createSVGRect),Si=!!ui&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ns=!ui&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var o=n.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Fr=navigator.platform.indexOf("Mac")===0,Os=navigator.platform.indexOf("Linux")===0;function Te(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var wt={ie:lt,ielt9:z,edge:rt,webkit:J,android:Lt,android23:dt,androidStock:Tt,opera:Gt,chrome:Kt,gecko:at,safari:ke,phantom:It,opera12:kt,win:Ke,ie3d:be,webkit3d:oi,gecko3d:mt,any3d:$e,mobile:Cn,mobileWebkit:Ar,mobileWebkit3d:Je,msPointer:ai,pointer:nn,touch:Ji,touchNative:zr,mobileOpera:zo,mobileGecko:Ms,retina:Vn,passiveEvents:ot,canvas:Qi,svg:ui,vml:Ns,inlineSvg:Si,mac:Fr,linux:Os},Pi=wt.msPointer?"MSPointerDown":"pointerdown",Rs=wt.msPointer?"MSPointerMove":"pointermove",Br=wt.msPointer?"MSPointerUp":"pointerup",Ds=wt.msPointer?"MSPointerCancel":"pointercancel",Oe={touchstart:Pi,touchmove:Rs,touchend:Br,touchcancel:Ds},tr={touchstart:ir,touchmove:nr,touchend:nr,touchcancel:nr},hn={},Mn=!1;function Wn(n,o,h){return o==="touchstart"&&Fo(),tr[o]?(h=tr[o].bind(this,h),n.addEventListener(Oe[o],h,!1),h):(console.warn("wrong event specified:",o),I)}function Gr(n,o,h){if(!Oe[o]){console.warn("wrong event specified:",o);return}n.removeEventListener(Oe[o],h,!1)}function er(n){hn[n.pointerId]=n}function Ci(n){hn[n.pointerId]&&(hn[n.pointerId]=n)}function me(n){delete hn[n.pointerId]}function Fo(){Mn||(document.addEventListener(Pi,er,!0),document.addEventListener(Rs,Ci,!0),document.addEventListener(Br,me,!0),document.addEventListener(Ds,me,!0),Mn=!0)}function nr(n,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var h in hn)o.touches.push(hn[h]);o.changedTouches=[o],n(o)}}function ir(n,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&fe(o),nr(n,o)}function Mi(n){var o={},h,_;for(_ in n)h=n[_],o[_]=h&&h.bind?h.bind(n):h;return n=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ur=200;function Zr(n,o){n.addEventListener("dblclick",o);var h=0,_;function y(T){if(T.detail!==1){_=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var C=Se(T);if(!(C.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!C.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var B=Date.now();B-h<=Ur?(_++,_===2&&o(Mi(T))):_=1,h=B}}}return n.addEventListener("click",y),{dblclick:o,simDblclick:y}}function As(n,o){n.removeEventListener("dblclick",o.dblclick),n.removeEventListener("click",o.simDblclick)}var Hr=ar(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Re=ar(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xn=Re==="webkitTransition"||Re==="OTransition"?Re+"End":"transitionend";function rr(n){return typeof n=="string"?document.getElementById(n):n}function cn(n,o){var h=n.style[o]||n.currentStyle&&n.currentStyle[o];if((!h||h==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(n,null);h=_?_[o]:null}return h==="auto"?null:h}function Vt(n,o,h){var _=document.createElement(n);return _.className=o||"",h&&h.appendChild(_),_}function he(n){var o=n.parentNode;o&&o.removeChild(n)}function sr(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function li(n){var o=n.parentNode;o&&o.lastChild!==n&&o.appendChild(n)}function jn(n){var o=n.parentNode;o&&o.firstChild!==n&&o.insertBefore(n,o.firstChild)}function or(n,o){if(n.classList!==void 0)return n.classList.contains(o);var h=Ni(n);return h.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(h)}function Nt(n,o){if(n.classList!==void 0)for(var h=R(o),_=0,y=h.length;_<y;_++)n.classList.add(h[_]);else if(!or(n,o)){var T=Ni(n);fn(n,(T?T+" ":"")+o)}}function Qt(n,o){n.classList!==void 0?n.classList.remove(o):fn(n,D((" "+Ni(n)+" ").replace(" "+o+" "," ")))}function fn(n,o){n.className.baseVal===void 0?n.className=o:n.className.baseVal=o}function Ni(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function we(n,o){"opacity"in n.style?n.style.opacity=o:"filter"in n.style&&Bo(n,o)}function Bo(n,o){var h=!1,_="DXImageTransform.Microsoft.Alpha";try{h=n.filters.item(_)}catch{if(o===1)return}o=Math.round(o*100),h?(h.Enabled=o!==100,h.Opacity=o):n.style.filter+=" progid:"+_+"(opacity="+o+")"}function ar(n){for(var o=document.documentElement.style,h=0;h<n.length;h++)if(n[h]in o)return n[h];return!1}function Kn(n,o,h){var _=o||new nt(0,0);n.style[Hr]=(wt.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(h?" scale("+h+")":"")}function pe(n,o){n._leaflet_pos=o,wt.any3d?Kn(n,o):(n.style.left=o.x+"px",n.style.top=o.y+"px")}function Nn(n){return n._leaflet_pos||new nt(0,0)}var wn,hi,qr;if("onselectstart"in document)wn=function(){At(window,"selectstart",fe)},hi=function(){se(window,"selectstart",fe)};else{var ci=ar(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);wn=function(){if(ci){var n=document.documentElement.style;qr=n[ci],n[ci]="none"}},hi=function(){ci&&(document.documentElement.style[ci]=qr,qr=void 0)}}function Yr(){At(window,"dragstart",fe)}function Oi(){se(window,"dragstart",fe)}var re,En;function Vr(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(fi(),re=n,En=n.style.outlineStyle,n.style.outlineStyle="none",At(window,"keydown",fi))}function fi(){re&&(re.style.outlineStyle=En,re=void 0,En=void 0,se(window,"keydown",fi))}function Ue(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ze(n){var o=n.getBoundingClientRect();return{x:o.width/n.offsetWidth||1,y:o.height/n.offsetHeight||1,boundingClientRect:o}}var ur={__proto__:null,TRANSFORM:Hr,TRANSITION:Re,TRANSITION_END:Xn,get:rr,getStyle:cn,create:Vt,remove:he,empty:sr,toFront:li,toBack:jn,hasClass:or,addClass:Nt,removeClass:Qt,setClass:fn,getClass:Ni,setOpacity:we,testProp:ar,setTransform:Kn,setPosition:pe,getPosition:Nn,get disableTextSelection(){return wn},get enableTextSelection(){return hi},disableImageDrag:Yr,enableImageDrag:Oi,preventOutline:Vr,restoreOutline:fi,getSizedParentNode:Ue,getScale:ze};function At(n,o,h,_){if(o&&typeof o=="object")for(var y in o)lr(n,y,o[y],h);else{o=R(o);for(var T=0,C=o.length;T<C;T++)lr(n,o[T],h,_)}return this}var dn="_leaflet_events";function se(n,o,h,_){if(arguments.length===1)Ri(n),delete n[dn];else if(o&&typeof o=="object")for(var y in o)jt(n,y,o[y],h);else if(o=R(o),arguments.length===2)Ri(n,function(B){return V(o,B)!==-1});else for(var T=0,C=o.length;T<C;T++)jt(n,o[T],h,_);return this}function Ri(n,o){for(var h in n[dn]){var _=h.split(/\d/)[0];(!o||o(_))&&jt(n,_,null,null,h)}}var Wr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function lr(n,o,h,_){var y=o+w(h)+(_?"_"+w(_):"");if(n[dn]&&n[dn][y])return this;var T=function(B){return h.call(_||n,B||window.event)},C=T;!wt.touchNative&&wt.pointer&&o.indexOf("touch")===0?T=Wn(n,o,T):wt.touch&&o==="dblclick"?T=Zr(n,T):"addEventListener"in n?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?n.addEventListener(Wr[o]||o,T,wt.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(T=function(B){B=B||window.event,hr(n,B)&&C(B)},n.addEventListener(Wr[o],T,!1)):n.addEventListener(o,C,!1):n.attachEvent("on"+o,T),n[dn]=n[dn]||{},n[dn][y]=T}function jt(n,o,h,_,y){y=y||o+w(h)+(_?"_"+w(_):"");var T=n[dn]&&n[dn][y];if(!T)return this;!wt.touchNative&&wt.pointer&&o.indexOf("touch")===0?Gr(n,o,T):wt.touch&&o==="dblclick"?As(n,T):"removeEventListener"in n?n.removeEventListener(Wr[o]||o,T,!1):n.detachEvent("on"+o,T),n[dn][y]=null}function Ie(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Di(n){return lr(n,"wheel",Ie),this}function di(n){return At(n,"mousedown touchstart dblclick contextmenu",Ie),n._leaflet_disable_click=!0,this}function fe(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function On(n){return fe(n),Ie(n),this}function Se(n){if(n.composedPath)return n.composedPath();for(var o=[],h=n.target;h;)o.push(h),h=h.parentNode;return o}function Xr(n,o){if(!o)return new nt(n.clientX,n.clientY);var h=ze(o),_=h.boundingClientRect;return new nt((n.clientX-_.left)/h.x-o.clientLeft,(n.clientY-_.top)/h.y-o.clientTop)}var jr=wt.linux&&wt.chrome?window.devicePixelRatio:wt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Kr(n){return wt.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/jr:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function hr(n,o){var h=o.relatedTarget;if(!h)return!0;try{for(;h&&h!==n;)h=h.parentNode}catch{return!1}return h!==n}var Go={__proto__:null,on:At,off:se,stopPropagation:Ie,disableScrollPropagation:Di,disableClickPropagation:di,preventDefault:fe,stop:On,getPropagationPath:Se,getMousePosition:Xr,getWheelDelta:Kr,isExternalTarget:hr,addListener:At,removeListener:se},$r=bt.extend({run:function(n,o,h,_){this.stop(),this._el=n,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Nn(n),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=St(this._animate,this),this._step()},_step:function(n){var o=+new Date-this._startTime,h=this._duration*1e3;o<h?this._runFrame(this._easeOut(o/h),n):(this._runFrame(1),this._complete())},_runFrame:function(n,o){var h=this._startPos.add(this._offset.multiplyBy(n));o&&h._round(),pe(this._el,h),this.fire("step")},_complete:function(){Mt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),zt=bt.extend({options:{crs:N,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,o){o=Z(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Ut(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Re&&wt.any3d&&!wt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),At(this._proxy,Xn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,o,h){if(o=o===void 0?this._zoom:this._limitZoom(o),n=this._limitCenter(Ut(n),o,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=a({animate:h.animate},h.zoom),h.pan=a({animate:h.animate,duration:h.duration},h.pan));var _=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,o,h.zoom):this._tryAnimatedPan(n,h.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(n,o,h.pan&&h.pan.noMoveStart),this},setZoom:function(n,o){return this._loaded?this.setView(this.getCenter(),n,{zoom:o}):(this._zoom=n,this)},zoomIn:function(n,o){return n=n||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,o)},zoomOut:function(n,o){return n=n||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,o)},setZoomAround:function(n,o,h){var _=this.getZoomScale(o),y=this.getSize().divideBy(2),T=n instanceof nt?n:this.latLngToContainerPoint(n),C=T.subtract(y).multiplyBy(1-1/_),B=this.containerPointToLatLng(y.add(C));return this.setView(B,o,{zoom:h})},_getBoundsCenterZoom:function(n,o){o=o||{},n=n.getBounds?n.getBounds():vt(n);var h=q(o.paddingTopLeft||o.padding||[0,0]),_=q(o.paddingBottomRight||o.padding||[0,0]),y=this.getBoundsZoom(n,!1,h.add(_));if(y=typeof o.maxZoom=="number"?Math.min(o.maxZoom,y):y,y===1/0)return{center:n.getCenter(),zoom:y};var T=_.subtract(h).divideBy(2),C=this.project(n.getSouthWest(),y),B=this.project(n.getNorthEast(),y),G=this.unproject(C.add(B).divideBy(2).add(T),y);return{center:G,zoom:y}},fitBounds:function(n,o){if(n=vt(n),!n.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(n,o);return this.setView(h.center,h.zoom,o)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,o){return this.setView(n,this._zoom,{pan:o})},panBy:function(n,o){if(n=q(n).round(),o=o||{},!n.x&&!n.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $r,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Nt(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,h,o.duration||.25,o.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,o,h){if(h=h||{},h.animate===!1||!wt.any3d)return this.setView(n,o,h);this._stop();var _=this.project(this.getCenter()),y=this.project(n),T=this.getSize(),C=this._zoom;n=Ut(n),o=o===void 0?C:o;var B=Math.max(T.x,T.y),G=B*this.getZoomScale(C,o),K=y.distanceTo(_)||1,gt=1.42,Pt=gt*gt;function Yt(xe){var Ks=xe?-1:1,Zh=xe?G:B,Hh=G*G-B*B+Ks*Pt*Pt*K*K,qh=2*Zh*Pt*K,Jo=Hh/qh,uu=Math.sqrt(Jo*Jo+1)-Jo,Yh=uu<1e-9?-18:Math.log(uu);return Yh}function qe(xe){return(Math.exp(xe)-Math.exp(-xe))/2}function Ce(xe){return(Math.exp(xe)+Math.exp(-xe))/2}function yn(xe){return qe(xe)/Ce(xe)}var tn=Yt(0);function xr(xe){return B*(Ce(tn)/Ce(tn+gt*xe))}function Fh(xe){return B*(Ce(tn)*yn(tn+gt*xe)-qe(tn))/Pt}function Bh(xe){return 1-Math.pow(1-xe,1.5)}var Gh=Date.now(),ou=(Yt(1)-tn)/gt,Uh=h.duration?1e3*h.duration:1e3*ou*.8;function au(){var xe=(Date.now()-Gh)/Uh,Ks=Bh(xe)*ou;xe<=1?(this._flyToFrame=St(au,this),this._move(this.unproject(_.add(y.subtract(_).multiplyBy(Fh(Ks)/K)),C),this.getScaleZoom(B/xr(Ks),C),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),au.call(this),this},flyToBounds:function(n,o){var h=this._getBoundsCenterZoom(n,o);return this.flyTo(h.center,h.zoom,o)},setMaxBounds:function(n){return n=vt(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var o=this.options.minZoom;return this.options.minZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var o=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,o){this._enforcingBounds=!0;var h=this.getCenter(),_=this._limitCenter(h,this._zoom,vt(n));return h.equals(_)||this.panTo(_,o),this._enforcingBounds=!1,this},panInside:function(n,o){o=o||{};var h=q(o.paddingTopLeft||o.padding||[0,0]),_=q(o.paddingBottomRight||o.padding||[0,0]),y=this.project(this.getCenter()),T=this.project(n),C=this.getPixelBounds(),B=Dt([C.min.add(h),C.max.subtract(_)]),G=B.getSize();if(!B.contains(T)){this._enforcingBounds=!0;var K=T.subtract(B.getCenter()),gt=B.extend(T).getSize().subtract(G);y.x+=K.x<0?-gt.x:gt.x,y.y+=K.y<0?-gt.y:gt.y,this.panTo(this.unproject(y),o),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=a({animate:!1,pan:!0},n===!0?{animate:!0}:n);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),_=o.divideBy(2).round(),y=h.divideBy(2).round(),T=_.subtract(y);return!T.x&&!T.y?this:(n.animate&&n.pan?this.panBy(T):(n.pan&&this._rawPanBy(T),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=a({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=m(this._handleGeolocationResponse,this),h=m(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,h,n):navigator.geolocation.getCurrentPosition(o,h,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var o=n.code,h=n.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var o=n.coords.latitude,h=n.coords.longitude,_=new qt(o,h),y=_.toBounds(n.coords.accuracy*2),T=this._locateOptions;if(T.setView){var C=this.getBoundsZoom(y);this.setView(_,T.maxZoom?Math.min(C,T.maxZoom):C)}var B={latlng:_,bounds:y,timestamp:n.timestamp};for(var G in n.coords)typeof n.coords[G]=="number"&&(B[G]=n.coords[G]);this.fire("locationfound",B)}},addHandler:function(n,o){if(!o)return this;var h=this[n]=new o(this);return this._handlers.push(h),this.options[n]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),he(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Mt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)he(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,o){var h="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),_=Vt("div",h,o||this._mapPane);return n&&(this._panes[n]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),o=this.unproject(n.getBottomLeft()),h=this.unproject(n.getTopRight());return new $t(o,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,o,h){n=vt(n),h=q(h||[0,0]);var _=this.getZoom()||0,y=this.getMinZoom(),T=this.getMaxZoom(),C=n.getNorthWest(),B=n.getSouthEast(),G=this.getSize().subtract(h),K=Dt(this.project(B,_),this.project(C,_)).getSize(),gt=wt.any3d?this.options.zoomSnap:1,Pt=G.x/K.x,Yt=G.y/K.y,qe=o?Math.max(Pt,Yt):Math.min(Pt,Yt);return _=this.getScaleZoom(qe,_),gt&&(_=Math.round(_/(gt/100))*(gt/100),_=o?Math.ceil(_/gt)*gt:Math.floor(_/gt)*gt),Math.max(y,Math.min(T,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new nt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,o){var h=this._getTopLeftPoint(n,o);return new Ct(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,o){var h=this.options.crs;return o=o===void 0?this._zoom:o,h.scale(n)/h.scale(o)},getScaleZoom:function(n,o){var h=this.options.crs;o=o===void 0?this._zoom:o;var _=h.zoom(n*h.scale(o));return isNaN(_)?1/0:_},project:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Ut(n),o)},unproject:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(q(n),o)},layerPointToLatLng:function(n){var o=q(n).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(n){var o=this.project(Ut(n))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Ut(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(vt(n))},distance:function(n,o){return this.options.crs.distance(Ut(n),Ut(o))},containerPointToLayerPoint:function(n){return q(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return q(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var o=this.containerPointToLayerPoint(q(n));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ut(n)))},mouseEventToContainerPoint:function(n){return Xr(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var o=this._container=rr(n);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");At(o,"scroll",this._onScroll,this),this._containerId=w(o)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&wt.any3d,Nt(n,"leaflet-container"+(wt.touch?" leaflet-touch":"")+(wt.retina?" leaflet-retina":"")+(wt.ielt9?" leaflet-oldie":"")+(wt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=cn(n,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new nt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Nt(n.markerPane,"leaflet-zoom-hide"),Nt(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,o,h){pe(this._mapPane,new nt(0,0));var _=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var y=this._zoom!==o;this._moveStart(y,h)._move(n,o)._moveEnd(y),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(n,o){return n&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(n,o,h,_){o===void 0&&(o=this._zoom);var y=this._zoom!==o;return this._zoom=o,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),_?h&&h.pinch&&this.fire("zoom",h):((y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Mt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){pe(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[w(this._container)]=this;var o=n?se:At;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),wt.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Mt(this._resizeRequest),this._resizeRequest=St(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,o){for(var h=[],_,y=o==="mouseout"||o==="mouseover",T=n.target||n.srcElement,C=!1;T;){if(_=this._targets[w(T)],_&&(o==="click"||o==="preclick")&&this._draggableMoved(_)){C=!0;break}if(_&&_.listens(o,!0)&&(y&&!hr(T,n)||(h.push(_),y))||T===this._container)break;T=T.parentNode}return!h.length&&!C&&!y&&this.listens(o,!0)&&(h=[this]),h},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var o=n.target||n.srcElement;if(!(!this._loaded||o._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(o))){var h=n.type;h==="mousedown"&&Vr(o),this._fireDOMEvent(n,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,o,h){if(n.type==="click"){var _=a({},n);_.type="preclick",this._fireDOMEvent(_,_.type,h)}var y=this._findEventTargets(n,o);if(h){for(var T=[],C=0;C<h.length;C++)h[C].listens(o,!0)&&T.push(h[C]);y=T.concat(y)}if(y.length){o==="contextmenu"&&fe(n);var B=y[0],G={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);G.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(n),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=K?B.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(C=0;C<y.length;C++)if(y[C].fire(o,G,!0),G.originalEvent._stopped||y[C].options.bubblingMouseEvents===!1&&V(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,o=this._handlers.length;n<o;n++)this._handlers[n].disable()},whenReady:function(n,o){return this._loaded?n.call(o||this,{target:this}):this.on("load",n,o),this},_getMapPanePos:function(){return Nn(this._mapPane)||new nt(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,o){var h=n&&o!==void 0?this._getNewPixelOrigin(n,o):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,o){var h=this.getSize()._divideBy(2);return this.project(n,o)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,o,h){var _=this._getNewPixelOrigin(h,o);return this.project(n,o)._subtract(_)},_latLngBoundsToNewLayerBounds:function(n,o,h){var _=this._getNewPixelOrigin(h,o);return Dt([this.project(n.getSouthWest(),o)._subtract(_),this.project(n.getNorthWest(),o)._subtract(_),this.project(n.getSouthEast(),o)._subtract(_),this.project(n.getNorthEast(),o)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,o,h){if(!h)return n;var _=this.project(n,o),y=this.getSize().divideBy(2),T=new Ct(_.subtract(y),_.add(y)),C=this._getBoundsOffset(T,h,o);return Math.abs(C.x)<=1&&Math.abs(C.y)<=1?n:this.unproject(_.add(C),o)},_limitOffset:function(n,o){if(!o)return n;var h=this.getPixelBounds(),_=new Ct(h.min.add(n),h.max.add(n));return n.add(this._getBoundsOffset(_,o))},_getBoundsOffset:function(n,o,h){var _=Dt(this.project(o.getNorthEast(),h),this.project(o.getSouthWest(),h)),y=_.min.subtract(n.min),T=_.max.subtract(n.max),C=this._rebound(y.x,-T.x),B=this._rebound(y.y,-T.y);return new nt(C,B)},_rebound:function(n,o){return n+o>0?Math.round(n-o)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(o))},_limitZoom:function(n){var o=this.getMinZoom(),h=this.getMaxZoom(),_=wt.any3d?this.options.zoomSnap:1;return _&&(n=Math.round(n/_)*_),Math.max(o,Math.min(h,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,o){var h=this._getCenterOffset(n)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,o),!0)},_createAnimProxy:function(){var n=this._proxy=Vt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(o){var h=Hr,_=this._proxy.style[h];Kn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),_===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){he(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),o=this.getZoom();Kn(this._proxy,this.project(n,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,o,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(o),y=this._getCenterOffset(n)._divideBy(1-1/_);return h.animate!==!0&&!this.getSize().contains(y)?!1:(St(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(n,o,!0)},this),!0)},_animateZoom:function(n,o,h,_){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=o,Nt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:o,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function cr(n,o){return new zt(n,o)}var rn=it.extend({options:{position:"topright"},initialize:function(n){Z(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var o=this._map;return o&&o.removeControl(this),this.options.position=n,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var o=this._container=this.onAdd(n),h=this.getPosition(),_=n._controlCorners[h];return Nt(o,"leaflet-control"),h.indexOf("bottom")!==-1?_.insertBefore(o,_.firstChild):_.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(he(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Pe=function(n){return new rn(n)};zt.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",h=this._controlContainer=Vt("div",o+"control-container",this._container);function _(y,T){var C=o+y+" "+o+T;n[y+T]=Vt("div",C,h)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)he(this._controlCorners[n]);he(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $n=rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,o,h,_){return h<_?-1:_<h?1:0}},initialize:function(n,o,h){Z(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in n)this._addLayer(n[_],_);for(_ in o)this._addLayer(o[_],_,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return rn.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,o){return this._addLayer(n,o),this._map?this._update():this},addOverlay:function(n,o){return this._addLayer(n,o,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var o=this._getLayer(w(n));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Nt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(Nt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",o=this._container=Vt("div",n),h=this.options.collapsed;o.setAttribute("aria-haspopup",!0),di(o),Di(o);var _=this._section=Vt("section",n+"-list");h&&(this._map.on("click",this.collapse,this),At(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Vt("a",n+"-toggle",o);y.href="#",y.title="Layers",y.setAttribute("role","button"),At(y,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){fe(T),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Vt("div",n+"-base",_),this._separator=Vt("div",n+"-separator",_),this._overlaysList=Vt("div",n+"-overlays",_),o.appendChild(_)},_getLayer:function(n){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&w(this._layers[o].layer)===n)return this._layers[o]},_addLayer:function(n,o,h){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:o,overlay:h}),this.options.sortLayers&&this._layers.sort(m(function(_,y){return this.options.sortFunction(_.layer,y.layer,_.name,y.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sr(this._baseLayersList),sr(this._overlaysList),this._layerControlInputs=[];var n,o,h,_,y=0;for(h=0;h<this._layers.length;h++)_=this._layers[h],this._addItem(_),o=o||_.overlay,n=n||!_.overlay,y+=_.overlay?0:1;return this.options.hideSingleBase&&(n=n&&y>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=o&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var o=this._getLayer(w(n.target)),h=o.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;h&&this._map.fire(h,o)},_createRadioElement:function(n,o){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(o?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=h,_.firstChild},_addItem:function(n){var o=document.createElement("label"),h=this._map.hasLayer(n.layer),_;n.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=h):_=this._createRadioElement("leaflet-base-layers_"+w(this),h),this._layerControlInputs.push(_),_.layerId=w(n.layer),At(_,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+n.name;var T=document.createElement("span");o.appendChild(T),T.appendChild(_),T.appendChild(y);var C=n.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,o,h,_=[],y=[];this._handlingClick=!0;for(var T=n.length-1;T>=0;T--)o=n[T],h=this._getLayer(o.layerId).layer,o.checked?_.push(h):o.checked||y.push(h);for(T=0;T<y.length;T++)this._map.hasLayer(y[T])&&this._map.removeLayer(y[T]);for(T=0;T<_.length;T++)this._map.hasLayer(_[T])||this._map.addLayer(_[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,o,h,_=this._map.getZoom(),y=n.length-1;y>=0;y--)o=n[y],h=this._getLayer(o.layerId).layer,o.disabled=h.options.minZoom!==void 0&&_<h.options.minZoom||h.options.maxZoom!==void 0&&_>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,At(n,"click",fe),this.expand();var o=this;setTimeout(function(){se(n,"click",fe),o._preventClick=!1})}}),Uo=function(n,o,h){return new $n(n,o,h)},Rn=rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var o="leaflet-control-zoom",h=Vt("div",o+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,o+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,o+"-out",h,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,o,h,_,y){var T=Vt("a",h,_);return T.innerHTML=n,T.href="#",T.title=o,T.setAttribute("role","button"),T.setAttribute("aria-label",o),di(T),At(T,"click",On),At(T,"click",y,this),At(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var n=this._map,o="leaflet-disabled";Qt(this._zoomInButton,o),Qt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(Nt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(Nt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});zt.mergeOptions({zoomControl:!0}),zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Rn,this.addControl(this.zoomControl))});var zs=function(n){return new Rn(n)},Jn=rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var o="leaflet-control-scale",h=Vt("div",o),_=this.options;return this._addScales(_,o+"-line",h),n.on(_.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),h},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,o,h){n.metric&&(this._mScale=Vt("div",o,h)),n.imperial&&(this._iScale=Vt("div",o,h))},_update:function(){var n=this._map,o=n.getSize().y/2,h=n.distance(n.containerPointToLatLng([0,o]),n.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(h)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var o=this._getRoundNum(n),h=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,h,o/n)},_updateImperial:function(n){var o=n*3.2808399,h,_,y;o>5280?(h=o/5280,_=this._getRoundNum(h),this._updateScale(this._iScale,_+" mi",_/h)):(y=this._getRoundNum(o),this._updateScale(this._iScale,y+" ft",y/o))},_updateScale:function(n,o,h){n.style.width=Math.round(this.options.maxWidth*h)+"px",n.innerHTML=o},_getRoundNum:function(n){var o=Math.pow(10,(Math.floor(n)+"").length-1),h=n/o;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,o*h}}),Zo=function(n){return new Jn(n)},gn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fr=rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(wt.inlineSvg?gn+" ":"")+"Leaflet</a>"},initialize:function(n){Z(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Vt("div","leaflet-control-attribution"),di(this._container);for(var o in n._layers)n._layers[o].getAttribution&&this.addAttribution(n._layers[o].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var o in this._attributions)this._attributions[o]&&n.push(o);var h=[];this.options.prefix&&h.push(this.options.prefix),n.length&&h.push(n.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});zt.mergeOptions({attributionControl:!0}),zt.addInitHook(function(){this.options.attributionControl&&new fr().addTo(this)});var Ho=function(n){return new fr(n)};rn.Layers=$n,rn.Zoom=Rn,rn.Scale=Jn,rn.Attribution=fr,Pe.layers=Uo,Pe.zoom=zs,Pe.scale=Zo,Pe.attribution=Ho;var _n=it.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(n,o){return n.addHandler(o,this),this};var qo={Events:yt},Fs=wt.touch?"touchstart mousedown":"mousedown",Dn=bt.extend({options:{clickTolerance:3},initialize:function(n,o,h,_){Z(this,_),this._element=n,this._dragStartTarget=o||n,this._preventOutline=h},enable:function(){this._enabled||(At(this._dragStartTarget,Fs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dn._dragging===this&&this.finishDrag(!0),se(this._dragStartTarget,Fs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!or(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){Dn._dragging===this&&this.finishDrag();return}if(!(Dn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Dn._dragging=this,this._preventOutline&&Vr(this._element),Yr(),wn(),!this._moving)){this.fire("down");var o=n.touches?n.touches[0]:n,h=Ue(this._element);this._startPoint=new nt(o.clientX,o.clientY),this._startPos=Nn(this._element),this._parentScale=ze(h);var _=n.type==="mousedown";At(document,_?"mousemove":"touchmove",this._onMove,this),At(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var o=n.touches&&n.touches.length===1?n.touches[0]:n,h=new nt(o.clientX,o.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,fe(n),this._moved||(this.fire("dragstart"),this._moved=!0,Nt(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Nt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),pe(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Qt(document.body,"leaflet-dragging"),this._lastTarget&&(Qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),se(document,"mousemove touchmove",this._onMove,this),se(document,"mouseup touchend touchcancel",this._onUp,this),Oi(),hi();var o=this._moved&&this._moving;this._moving=!1,Dn._dragging=!1,o&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function Bs(n,o,h){var _,y=[1,4,2,8],T,C,B,G,K,gt,Pt,Yt;for(T=0,gt=n.length;T<gt;T++)n[T]._code=ye(n[T],o);for(B=0;B<4;B++){for(Pt=y[B],_=[],T=0,gt=n.length,C=gt-1;T<gt;C=T++)G=n[T],K=n[C],G._code&Pt?K._code&Pt||(Yt=Ai(K,G,Pt,o,h),Yt._code=ye(Yt,o),_.push(Yt)):(K._code&Pt&&(Yt=Ai(K,G,Pt,o,h),Yt._code=ye(Yt,o),_.push(Yt)),_.push(G));n=_}return n}function Gs(n,o){var h,_,y,T,C,B,G,K,gt;if(!n||n.length===0)throw new Error("latlngs not passed");He(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Pt=Ut([0,0]),Yt=vt(n),qe=Yt.getNorthWest().distanceTo(Yt.getSouthWest())*Yt.getNorthEast().distanceTo(Yt.getNorthWest());qe<1700&&(Pt=bn(n));var Ce=n.length,yn=[];for(h=0;h<Ce;h++){var tn=Ut(n[h]);yn.push(o.project(Ut([tn.lat-Pt.lat,tn.lng-Pt.lng])))}for(B=G=K=0,h=0,_=Ce-1;h<Ce;_=h++)y=yn[h],T=yn[_],C=y.y*T.x-T.y*y.x,G+=(y.x+T.x)*C,K+=(y.y+T.y)*C,B+=C*3;B===0?gt=yn[0]:gt=[G/B,K/B];var xr=o.unproject(q(gt));return Ut([xr.lat+Pt.lat,xr.lng+Pt.lng])}function bn(n){for(var o=0,h=0,_=0,y=0;y<n.length;y++){var T=Ut(n[y]);o+=T.lat,h+=T.lng,_++}return Ut([o/_,h/_])}var Ze={__proto__:null,clipPolygon:Bs,polygonCenter:Gs,centroid:bn};function Us(n,o){if(!o||!n.length)return n.slice();var h=o*o;return n=ts(n,h),n=Qr(n,h),n}function Jr(n,o,h){return Math.sqrt(Fi(n,o,h,!0))}function Yo(n,o,h){return Fi(n,o,h)}function Qr(n,o){var h=n.length,_=typeof Uint8Array<"u"?Uint8Array:Array,y=new _(h);y[0]=y[h-1]=1,dr(n,y,o,0,h-1);var T,C=[];for(T=0;T<h;T++)y[T]&&C.push(n[T]);return C}function dr(n,o,h,_,y){var T=0,C,B,G;for(B=_+1;B<=y-1;B++)G=Fi(n[B],n[_],n[y],!0),G>T&&(C=B,T=G);T>h&&(o[C]=1,dr(n,o,h,_,C),dr(n,o,h,C,y))}function ts(n,o){for(var h=[n[0]],_=1,y=0,T=n.length;_<T;_++)zi(n[_],n[y])>o&&(h.push(n[_]),y=_);return y<T-1&&h.push(n[T-1]),h}var es;function Qe(n,o,h,_,y){var T=_?es:ye(n,h),C=ye(o,h),B,G,K;for(es=C;;){if(!(T|C))return[n,o];if(T&C)return!1;B=T||C,G=Ai(n,o,B,h,y),K=ye(G,h),B===T?(n=G,T=K):(o=G,C=K)}}function Ai(n,o,h,_,y){var T=o.x-n.x,C=o.y-n.y,B=_.min,G=_.max,K,gt;return h&8?(K=n.x+T*(G.y-n.y)/C,gt=G.y):h&4?(K=n.x+T*(B.y-n.y)/C,gt=B.y):h&2?(K=G.x,gt=n.y+C*(G.x-n.x)/T):h&1&&(K=B.x,gt=n.y+C*(B.x-n.x)/T),new nt(K,gt,y)}function ye(n,o){var h=0;return n.x<o.min.x?h|=1:n.x>o.max.x&&(h|=2),n.y<o.min.y?h|=4:n.y>o.max.y&&(h|=8),h}function zi(n,o){var h=o.x-n.x,_=o.y-n.y;return h*h+_*_}function Fi(n,o,h,_){var y=o.x,T=o.y,C=h.x-y,B=h.y-T,G=C*C+B*B,K;return G>0&&(K=((n.x-y)*C+(n.y-T)*B)/G,K>1?(y=h.x,T=h.y):K>0&&(y+=C*K,T+=B*K)),C=n.x-y,B=n.y-T,_?C*C+B*B:new nt(y,T)}function He(n){return!H(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function ns(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),He(n)}function is(n,o){var h,_,y,T,C,B,G,K;if(!n||n.length===0)throw new Error("latlngs not passed");He(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var gt=Ut([0,0]),Pt=vt(n),Yt=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());Yt<1700&&(gt=bn(n));var qe=n.length,Ce=[];for(h=0;h<qe;h++){var yn=Ut(n[h]);Ce.push(o.project(Ut([yn.lat-gt.lat,yn.lng-gt.lng])))}for(h=0,_=0;h<qe-1;h++)_+=Ce[h].distanceTo(Ce[h+1])/2;if(_===0)K=Ce[0];else for(h=0,T=0;h<qe-1;h++)if(C=Ce[h],B=Ce[h+1],y=C.distanceTo(B),T+=y,T>_){G=(T-_)/y,K=[B.x-G*(B.x-C.x),B.y-G*(B.y-C.y)];break}var tn=o.unproject(q(K));return Ut([tn.lat+gt.lat,tn.lng+gt.lng])}var rs={__proto__:null,simplify:Us,pointToSegmentDistance:Jr,closestPointOnSegment:Yo,clipSegment:Qe,_getEdgeIntersection:Ai,_getBitCode:ye,_sqClosestPointOnSegment:Fi,isFlat:He,_flat:ns,polylineCenter:is},ss={project:function(n){return new nt(n.lng,n.lat)},unproject:function(n){return new qt(n.y,n.x)},bounds:new Ct([-180,-90],[180,90])},os={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ct([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var o=Math.PI/180,h=this.R,_=n.lat*o,y=this.R_MINOR/h,T=Math.sqrt(1-y*y),C=T*Math.sin(_),B=Math.tan(Math.PI/4-_/2)/Math.pow((1-C)/(1+C),T/2);return _=-h*Math.log(Math.max(B,1e-10)),new nt(n.lng*o*h,_)},unproject:function(n){for(var o=180/Math.PI,h=this.R,_=this.R_MINOR/h,y=Math.sqrt(1-_*_),T=Math.exp(-n.y/h),C=Math.PI/2-2*Math.atan(T),B=0,G=.1,K;B<15&&Math.abs(G)>1e-7;B++)K=y*Math.sin(C),K=Math.pow((1-K)/(1+K),y/2),G=Math.PI/2-2*Math.atan(T*K)-C,C+=G;return new qt(C*o,n.x*o/h)}},Vo={__proto__:null,LonLat:ss,Mercator:os,SphericalMercator:Xt},Wo=a({},A,{code:"EPSG:3395",projection:os,transformation:function(){var n=.5/(Math.PI*os.R);return k(n,.5,-n,.5)}()}),Zs=a({},A,{code:"EPSG:4326",projection:ss,transformation:k(1/180,1,-1/180,.5)}),Xo=a({},Ne,{projection:ss,transformation:k(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,o){var h=o.lng-n.lng,_=o.lat-n.lat;return Math.sqrt(h*h+_*_)},infinite:!0});Ne.Earth=A,Ne.EPSG3395=Wo,Ne.EPSG3857=N,Ne.EPSG900913=U,Ne.EPSG4326=Zs,Ne.Simple=Xo;var sn=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[w(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[w(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var o=n.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var h=this.getEvents();o.on(h,this),this.once("remove",function(){o.off(h,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});zt.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var o=w(n);return this._layers[o]?this:(this._layers[o]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var o=w(n);return this._layers[o]?(this._loaded&&n.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return w(n)in this._layers},eachLayer:function(n,o){for(var h in this._layers)n.call(o,this._layers[h]);return this},_addLayers:function(n){n=n?H(n)?n:[n]:[];for(var o=0,h=n.length;o<h;o++)this.addLayer(n[o])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[w(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var o=w(n);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,o=-1/0,h=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var y=this._zoomBoundLayers[_].options;n=y.minZoom===void 0?n:Math.min(n,y.minZoom),o=y.maxZoom===void 0?o:Math.max(o,y.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=n===1/0?void 0:n,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gi=sn.extend({initialize:function(n,o){Z(this,o),this._layers={};var h,_;if(n)for(h=0,_=n.length;h<_;h++)this.addLayer(n[h])},addLayer:function(n){var o=this.getLayerId(n);return this._layers[o]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var o=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(n){var o=typeof n=="number"?n:this.getLayerId(n);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var o=Array.prototype.slice.call(arguments,1),h,_;for(h in this._layers)_=this._layers[h],_[n]&&_[n].apply(_,o);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,o){for(var h in this._layers)n.call(o,this._layers[h]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return w(n)}}),Hs=function(n,o){return new gi(n,o)},Tn=gi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),gi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),gi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new $t;for(var o in this._layers){var h=this._layers[o];n.extend(h.getBounds?h.getBounds():h.getLatLng())}return n}}),qs=function(n,o){return new Tn(n,o)},_i=it.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){Z(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,o){var h=this._getIconUrl(n);if(!h){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(h,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(_,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(n,o){var h=this.options,_=h[o+"Size"];typeof _=="number"&&(_=[_,_]);var y=q(_),T=q(o==="shadow"&&h.shadowAnchor||h.iconAnchor||y&&y.divideBy(2,!0));n.className="leaflet-marker-"+o+" "+(h.className||""),T&&(n.style.marginLeft=-T.x+"px",n.style.marginTop=-T.y+"px"),y&&(n.style.width=y.x+"px",n.style.height=y.y+"px")},_createImg:function(n,o){return o=o||document.createElement("img"),o.src=n,o},_getIconUrl:function(n){return wt.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function jo(n){return new _i(n)}var Bi=_i.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof Bi.imagePath!="string"&&(Bi.imagePath=this._detectIconPath()),(this.options.imagePath||Bi.imagePath)+_i.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var o=function(h,_,y){var T=_.exec(h);return T&&T[y]};return n=o(n,/^url\((['"])?(.+)\1\)$/,2),n&&o(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Vt("div","leaflet-default-icon-path",document.body),o=cn(n,"background-image")||cn(n,"backgroundImage");if(document.body.removeChild(n),o=this._stripUrl(o),o)return o;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Ys=_n.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Dn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Nt(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var o=this._marker,h=o._map,_=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,T=Nn(o._icon),C=h.getPixelBounds(),B=h.getPixelOrigin(),G=Dt(C.min._subtract(B).add(y),C.max._subtract(B).subtract(y));if(!G.contains(T)){var K=q((Math.max(G.max.x,T.x)-G.max.x)/(C.max.x-G.max.x)-(Math.min(G.min.x,T.x)-G.min.x)/(C.min.x-G.min.x),(Math.max(G.max.y,T.y)-G.max.y)/(C.max.y-G.max.y)-(Math.min(G.min.y,T.y)-G.min.y)/(C.min.y-G.min.y)).multiplyBy(_);h.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),pe(o._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=St(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Mt(this._panRequest),this._panRequest=St(this._adjustPan.bind(this,n)))},_onDrag:function(n){var o=this._marker,h=o._shadow,_=Nn(o._icon),y=o._map.layerPointToLatLng(_);h&&pe(h,_),o._latlng=y,n.latlng=y,n.oldLatLng=this._oldLatLng,o.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Mt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),gr=sn.extend({options:{icon:new Bi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,o){Z(this,o),this._latlng=Ut(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var o=this._latlng;return this._latlng=Ut(n),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=n.icon.createIcon(this._icon),_=!1;h!==this._icon&&(this._icon&&this._removeIcon(),_=!0,n.title&&(h.title=n.title),h.tagName==="IMG"&&(h.alt=n.alt||"")),Nt(h,o),n.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(h,"focus",this._panOnFocus,this);var y=n.icon.createShadow(this._shadow),T=!1;y!==this._shadow&&(this._removeShadow(),T=!0),y&&(Nt(y,o),y.alt=""),this._shadow=y,n.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&T&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&se(this._icon,"focus",this._panOnFocus,this),he(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&he(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&pe(this._icon,n),this._shadow&&pe(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Nt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ys)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ys(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&we(this._icon,n),this._shadow&&we(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var o=this.options.icon.options,h=o.iconSize?q(o.iconSize):q(0,0),_=o.iconAnchor?q(o.iconAnchor):q(0,0);n.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:h.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ko(n,o){return new gr(n,o)}var An=sn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return Z(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Gi=An.extend({options:{fill:!0,radius:10},initialize:function(n,o){Z(this,o),this._latlng=Ut(n),this._radius=this.options.radius},setLatLng:function(n){var o=this._latlng;return this._latlng=Ut(n),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var o=n&&n.radius||this._radius;return An.prototype.setStyle.call(this,n),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,o=this._radiusY||n,h=this._clickTolerance(),_=[n+h,o+h];this._pxBounds=new Ct(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Vs(n,o){return new Gi(n,o)}var _r=Gi.extend({initialize:function(n,o,h){if(typeof o=="number"&&(o=a({},h,{radius:o})),Z(this,o),this._latlng=Ut(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new $t(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:An.prototype.setStyle,_project:function(){var n=this._latlng.lng,o=this._latlng.lat,h=this._map,_=h.options.crs;if(_.distance===A.distance){var y=Math.PI/180,T=this._mRadius/A.R/y,C=h.project([o+T,n]),B=h.project([o-T,n]),G=C.add(B).divideBy(2),K=h.unproject(G).lat,gt=Math.acos((Math.cos(T*y)-Math.sin(o*y)*Math.sin(K*y))/(Math.cos(o*y)*Math.cos(K*y)))/y;(isNaN(gt)||gt===0)&&(gt=T/Math.cos(Math.PI/180*o)),this._point=G.subtract(h.getPixelOrigin()),this._radius=isNaN(gt)?0:G.x-h.project([K,n-gt]).x,this._radiusY=G.y-C.y}else{var Pt=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Pt).x}this._updateBounds()}});function $o(n,o,h){return new _r(n,o,h)}var mn=An.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,o){Z(this,o),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var o=1/0,h=null,_=Fi,y,T,C=0,B=this._parts.length;C<B;C++)for(var G=this._parts[C],K=1,gt=G.length;K<gt;K++){y=G[K-1],T=G[K];var Pt=_(n,y,T,!0);Pt<o&&(o=Pt,h=_(n,y,T))}return h&&(h.distance=Math.sqrt(o)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return is(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,o){return o=o||this._defaultShape(),n=Ut(n),o.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new $t,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return He(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var o=[],h=He(n),_=0,y=n.length;_<y;_++)h?(o[_]=Ut(n[_]),this._bounds.extend(o[_])):o[_]=this._convertLatLngs(n[_]);return o},_project:function(){var n=new Ct;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),o=new nt(n,n);this._rawPxBounds&&(this._pxBounds=new Ct([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(n,o,h){var _=n[0]instanceof qt,y=n.length,T,C;if(_){for(C=[],T=0;T<y;T++)C[T]=this._map.latLngToLayerPoint(n[T]),h.extend(C[T]);o.push(C)}else for(T=0;T<y;T++)this._projectLatlngs(n[T],o,h)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,h,_,y,T,C,B,G;for(h=0,y=0,T=this._rings.length;h<T;h++)for(G=this._rings[h],_=0,C=G.length;_<C-1;_++)B=Qe(G[_],G[_+1],n,_,!0),B&&(o[y]=o[y]||[],o[y].push(B[0]),(B[1]!==G[_+1]||_===C-2)&&(o[y].push(B[1]),y++))}},_simplifyPoints:function(){for(var n=this._parts,o=this.options.smoothFactor,h=0,_=n.length;h<_;h++)n[h]=Us(n[h],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,o){var h,_,y,T,C,B,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(h=0,T=this._parts.length;h<T;h++)for(B=this._parts[h],_=0,C=B.length,y=C-1;_<C;y=_++)if(!(!o&&_===0)&&Jr(n,B[y],B[_])<=G)return!0;return!1}});function as(n,o){return new mn(n,o)}mn._flat=ns;var mi=mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var o=mn.prototype._convertLatLngs.call(this,n),h=o.length;return h>=2&&o[0]instanceof qt&&o[0].equals(o[h-1])&&o.pop(),o},_setLatLngs:function(n){mn.prototype._setLatLngs.call(this,n),He(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return He(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,o=this.options.weight,h=new nt(o,o);if(n=new Ct(n.min.subtract(h),n.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,y=this._rings.length,T;_<y;_++)T=Bs(this._rings[_],n,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var o=!1,h,_,y,T,C,B,G,K;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(T=0,G=this._parts.length;T<G;T++)for(h=this._parts[T],C=0,K=h.length,B=K-1;C<K;B=C++)_=h[C],y=h[B],_.y>n.y!=y.y>n.y&&n.x<(y.x-_.x)*(n.y-_.y)/(y.y-_.y)+_.x&&(o=!o);return o||mn.prototype._containsPoint.call(this,n,!0)}});function Ws(n,o){return new mi(n,o)}var pn=Tn.extend({initialize:function(n,o){Z(this,o),this._layers={},n&&this.addData(n)},addData:function(n){var o=H(n)?n:n.features,h,_,y;if(o){for(h=0,_=o.length;h<_;h++)y=o[h],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var T=this.options;if(T.filter&&!T.filter(n))return this;var C=mr(n,T);return C?(C.feature=r(n),C.defaultOptions=C.options,this.resetStyle(C),T.onEachFeature&&T.onEachFeature(n,C),this.addLayer(C)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=a({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(o){this._setLayerStyle(o,n)},this)},_setLayerStyle:function(n,o){n.setStyle&&(typeof o=="function"&&(o=o(n.feature)),n.setStyle(o))}});function mr(n,o){var h=n.type==="Feature"?n.geometry:n,_=h?h.coordinates:null,y=[],T=o&&o.pointToLayer,C=o&&o.coordsToLatLng||zn,B,G,K,gt;if(!_&&!h)return null;switch(h.type){case"Point":return B=C(_),Xs(T,n,B,o);case"MultiPoint":for(K=0,gt=_.length;K<gt;K++)B=C(_[K]),y.push(Xs(T,n,B,o));return new Tn(y);case"LineString":case"MultiLineString":return G=pr(_,h.type==="LineString"?0:1,C),new mn(G,o);case"Polygon":case"MultiPolygon":return G=pr(_,h.type==="Polygon"?1:2,C),new mi(G,o);case"GeometryCollection":for(K=0,gt=h.geometries.length;K<gt;K++){var Pt=mr({geometry:h.geometries[K],type:"Feature",properties:n.properties},o);Pt&&y.push(Pt)}return new Tn(y);case"FeatureCollection":for(K=0,gt=h.features.length;K<gt;K++){var Yt=mr(h.features[K],o);Yt&&y.push(Yt)}return new Tn(y);default:throw new Error("Invalid GeoJSON object.")}}function Xs(n,o,h,_){return n?n(o,h):new gr(h,_&&_.markersInheritOptions&&_)}function zn(n){return new qt(n[1],n[0],n[2])}function pr(n,o,h){for(var _=[],y=0,T=n.length,C;y<T;y++)C=o?pr(n[y],o-1,h):(h||zn)(n[y]),_.push(C);return _}function vr(n,o){return n=Ut(n),n.alt!==void 0?[M(n.lng,o),M(n.lat,o),M(n.alt,o)]:[M(n.lng,o),M(n.lat,o)]}function De(n,o,h,_){for(var y=[],T=0,C=n.length;T<C;T++)y.push(o?De(n[T],He(n[T])?0:o-1,h,_):vr(n[T],_));return!o&&h&&y.length>0&&y.push(y[0].slice()),y}function Ae(n,o){return n.feature?a({},n.feature,{geometry:o}):r(o)}function r(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var t={toGeoJSON:function(n){return Ae(this,{type:"Point",coordinates:vr(this.getLatLng(),n)})}};gr.include(t),_r.include(t),Gi.include(t),mn.include({toGeoJSON:function(n){var o=!He(this._latlngs),h=De(this._latlngs,o?1:0,!1,n);return Ae(this,{type:(o?"Multi":"")+"LineString",coordinates:h})}}),mi.include({toGeoJSON:function(n){var o=!He(this._latlngs),h=o&&!He(this._latlngs[0]),_=De(this._latlngs,h?2:o?1:0,!0,n);return o||(_=[_]),Ae(this,{type:(h?"Multi":"")+"Polygon",coordinates:_})}}),gi.include({toMultiPoint:function(n){var o=[];return this.eachLayer(function(h){o.push(h.toGeoJSON(n).geometry.coordinates)}),Ae(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(n){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(n);var h=o==="GeometryCollection",_=[];return this.eachLayer(function(y){if(y.toGeoJSON){var T=y.toGeoJSON(n);if(h)_.push(T.geometry);else{var C=r(T);C.type==="FeatureCollection"?_.push.apply(_,C.features):_.push(C)}}}),h?Ae(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function e(n,o){return new pn(n,o)}var i=e,l=sn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,o,h){this._url=n,this._bounds=vt(o),Z(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Nt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){he(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&li(this._image),this},bringToBack:function(){return this._map&&jn(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=vt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",o=this._image=n?this._url:Vt("img");if(Nt(o,"leaflet-image-layer"),this._zoomAnimated&&Nt(o,"leaflet-zoom-animated"),this.options.className&&Nt(o,this.options.className),o.onselectstart=I,o.onmousemove=I,o.onload=m(this.fire,this,"load"),o.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(n){var o=this._map.getZoomScale(n.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Kn(this._image,h,o)},_reset:function(){var n=this._image,o=new Ct(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=o.getSize();pe(n,o.min),n.style.width=h.x+"px",n.style.height=h.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),d=function(n,o,h){return new l(n,o,h)},v=l.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",o=this._image=n?this._url:Vt("video");if(Nt(o,"leaflet-image-layer"),this._zoomAnimated&&Nt(o,"leaflet-zoom-animated"),this.options.className&&Nt(o,this.options.className),o.onselectstart=I,o.onmousemove=I,o.onloadeddata=m(this.fire,this,"load"),n){for(var h=o.getElementsByTagName("source"),_=[],y=0;y<h.length;y++)_.push(h[y].src);this._url=h.length>0?_:[o.src];return}H(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var C=Vt("source");C.src=this._url[T],o.appendChild(C)}}});function x(n,o,h){return new v(n,o,h)}var b=l.extend({_initImage:function(){var n=this._image=this._url;Nt(n,"leaflet-image-layer"),this._zoomAnimated&&Nt(n,"leaflet-zoom-animated"),this.options.className&&Nt(n,this.options.className),n.onselectstart=I,n.onmousemove=I}});function P(n,o,h){return new b(n,o,h)}var O=sn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,o){n&&(n instanceof qt||H(n))?(this._latlng=Ut(n),Z(this,o)):(Z(this,n),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&we(this._container,1),this.bringToFront(),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(m(he,void 0,this._container),200)):he(this._container),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Ut(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&li(this._container),this},bringToBack:function(){return this._map&&jn(this._container),this},_prepareOpen:function(n){var o=this._source;if(!o._map)return!1;if(o instanceof Tn){o=null;var h=this._source._layers;for(var _ in h)if(h[_]._map){o=h[_];break}if(!o)return!1;this._source=o}if(!n)if(o.getCenter)n=o.getCenter();else if(o.getLatLng)n=o.getLatLng();else if(o.getBounds)n=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")n.innerHTML=o;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),o=q(this.options.offset),h=this._getAnchor();this._zoomAnimated?pe(this._container,n.add(h)):o=o.add(n).add(h);var _=this._containerBottom=-o.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=_+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});zt.include({_initOverlay:function(n,o,h,_){var y=o;return y instanceof n||(y=new n(_).setContent(o)),h&&y.setLatLng(h),y}}),sn.include({_initOverlay:function(n,o,h,_){var y=h;return y instanceof n?(Z(y,_),y._source=this):(y=o&&!_?o:new n(_,this),y.setContent(h)),y}});var F=O.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,O.prototype.openOn.call(this,n)},onAdd:function(n){O.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof An||this._source.on("preclick",Ie))},onRemove:function(n){O.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof An||this._source.off("preclick",Ie))},getEvents:function(){var n=O.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",o=this._container=Vt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Vt("div",n+"-content-wrapper",o);if(this._contentNode=Vt("div",n+"-content",h),di(o),Di(this._contentNode),At(o,"contextmenu",Ie),this._tipContainer=Vt("div",n+"-tip-container",o),this._tip=Vt("div",n+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Vt("a",n+"-close-button",o);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',At(_,"click",function(y){fe(y),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,o=n.style;o.width="",o.whiteSpace="nowrap";var h=n.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),o.width=h+1+"px",o.whiteSpace="",o.height="";var _=n.offsetHeight,y=this.options.maxHeight,T="leaflet-popup-scrolled";y&&_>y?(o.height=y+"px",Nt(n,T)):Qt(n,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),h=this._getAnchor();pe(this._container,o.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,o=parseInt(cn(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+o,_=this._containerWidth,y=new nt(this._containerLeft,-h-this._containerBottom);y._add(Nn(this._container));var T=n.layerPointToContainerPoint(y),C=q(this.options.autoPanPadding),B=q(this.options.autoPanPaddingTopLeft||C),G=q(this.options.autoPanPaddingBottomRight||C),K=n.getSize(),gt=0,Pt=0;T.x+_+G.x>K.x&&(gt=T.x+_-K.x+G.x),T.x-gt-B.x<0&&(gt=T.x-B.x),T.y+h+G.y>K.y&&(Pt=T.y+h-K.y+G.y),T.y-Pt-B.y<0&&(Pt=T.y-B.y),(gt||Pt)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([gt,Pt]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Y=function(n,o){return new F(n,o)};zt.mergeOptions({closePopupOnClick:!0}),zt.include({openPopup:function(n,o,h){return this._initOverlay(F,n,o,h).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),sn.include({bindPopup:function(n,o){return this._popup=this._initOverlay(F,this._popup,n,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Tn||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){On(n);var o=n.layer||n.target;if(this._popup._source===o&&!(o instanceof An)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=o,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var ut=O.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){O.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){O.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=O.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",o=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Vt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var o,h,_=this._map,y=this._container,T=_.latLngToContainerPoint(_.getCenter()),C=_.layerPointToContainerPoint(n),B=this.options.direction,G=y.offsetWidth,K=y.offsetHeight,gt=q(this.options.offset),Pt=this._getAnchor();B==="top"?(o=G/2,h=K):B==="bottom"?(o=G/2,h=0):B==="center"?(o=G/2,h=K/2):B==="right"?(o=0,h=K/2):B==="left"?(o=G,h=K/2):C.x<T.x?(B="right",o=0,h=K/2):(B="left",o=G+(gt.x+Pt.x)*2,h=K/2),n=n.subtract(q(o,h,!0)).add(gt).add(Pt),Qt(y,"leaflet-tooltip-right"),Qt(y,"leaflet-tooltip-left"),Qt(y,"leaflet-tooltip-top"),Qt(y,"leaflet-tooltip-bottom"),Nt(y,"leaflet-tooltip-"+B),pe(y,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&we(this._container,n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(o)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),pt=function(n,o){return new ut(n,o)};zt.include({openTooltip:function(n,o,h){return this._initOverlay(ut,n,o,h).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),sn.include({bindTooltip:function(n,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ut,this._tooltip,n,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var o=n?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[o](h),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Tn||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var o=typeof n.getElement=="function"&&n.getElement();o&&(At(o,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),At(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var o=typeof n.getElement=="function"&&n.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var o=n.latlng,h,_;this._tooltip.options.sticky&&n.originalEvent&&(h=this._map.mouseEventToContainerPoint(n.originalEvent),_=this._map.containerPointToLayerPoint(h),o=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(o)}});var Et=_i.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var o=n&&n.tagName==="DIV"?n:document.createElement("div"),h=this.options;if(h.html instanceof Element?(sr(o),o.appendChild(h.html)):o.innerHTML=h.html!==!1?h.html:"",h.bgPos){var _=q(h.bgPos);o.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Wt(n){return new Et(n)}_i.Default=Bi;var Zt=sn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:wt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){Z(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),he(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(li(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=S(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof nt?n:new nt(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var o=this.getPane().children,h=-n(-1/0,1/0),_=0,y=o.length,T;_<y;_++)T=o[_].style.zIndex,o[_]!==this._container&&T&&(h=n(h,+T));isFinite(h)&&(this.options.zIndex=h+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!wt.ielt9){we(this._container,this.options.opacity);var n=+new Date,o=!1,h=!1;for(var _ in this._tiles){var y=this._tiles[_];if(!(!y.current||!y.loaded)){var T=Math.min(1,(n-y.loaded)/200);we(y.el,T),T<1?o=!0:(y.active?h=!0:this._onOpaqueTile(y),y.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),o&&(Mt(this._fadeFrame),this._fadeFrame=St(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=Vt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,o=this.options.maxZoom;if(n!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===n?(this._levels[h].el.style.zIndex=o-Math.abs(n-h),this._onUpdateLevel(h)):(he(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var _=this._levels[n],y=this._map;return _||(_=this._levels[n]={},_.el=Vt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=o,_.origin=y.project(y.unproject(y.getPixelOrigin()),n).round(),_.zoom=n,this._setZoomTransform(_,y.getCenter(),y.getZoom()),I(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var n,o,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)o=this._tiles[n],o.retain=o.current;for(n in this._tiles)if(o=this._tiles[n],o.current&&!o.active){var _=o.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var o in this._tiles)this._tiles[o].coords.z===n&&this._removeTile(o)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)he(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,o,h,_){var y=Math.floor(n/2),T=Math.floor(o/2),C=h-1,B=new nt(+y,+T);B.z=+C;var G=this._tileCoordsToKey(B),K=this._tiles[G];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),C>_?this._retainParent(y,T,C,_):!1)},_retainChildren:function(n,o,h,_){for(var y=2*n;y<2*n+2;y++)for(var T=2*o;T<2*o+2;T++){var C=new nt(y,T);C.z=h+1;var B=this._tileCoordsToKey(C),G=this._tiles[B];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);h+1<_&&this._retainChildren(y,T,h+1,_)}},_resetView:function(n){var o=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var o=this.options;return o.minNativeZoom!==void 0&&n<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<n?o.maxNativeZoom:n},_setView:function(n,o,h,_){var y=Math.round(o);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var T=this.options.updateWhenZooming&&y!==this._tileZoom;(!_||T)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(n),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(n,o)},_setZoomTransforms:function(n,o){for(var h in this._levels)this._setZoomTransform(this._levels[h],n,o)},_setZoomTransform:function(n,o,h){var _=this._map.getZoomScale(h,n.zoom),y=n.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(o,h)).round();wt.any3d?Kn(n.el,y,_):pe(n.el,y)},_resetGrid:function(){var n=this._map,o=n.options.crs,h=this._tileSize=this.getTileSize(),_=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,o.wrapLng[0]],_).x/h.x),Math.ceil(n.project([0,o.wrapLng[1]],_).x/h.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([o.wrapLat[0],0],_).y/h.x),Math.ceil(n.project([o.wrapLat[1],0],_).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var o=this._map,h=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),_=o.getZoomScale(h,this._tileZoom),y=o.project(n,this._tileZoom).floor(),T=o.getSize().divideBy(_*2);return new Ct(y.subtract(T),y.add(T))},_update:function(n){var o=this._map;if(o){var h=this._clampZoom(o.getZoom());if(n===void 0&&(n=o.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(n),y=this._pxBoundsToTileRange(_),T=y.getCenter(),C=[],B=this.options.keepBuffer,G=new Ct(y.getBottomLeft().subtract([B,-B]),y.getTopRight().add([B,-B]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var gt=this._tiles[K].coords;(gt.z!==this._tileZoom||!G.contains(new nt(gt.x,gt.y)))&&(this._tiles[K].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(n,h);return}for(var Pt=y.min.y;Pt<=y.max.y;Pt++)for(var Yt=y.min.x;Yt<=y.max.x;Yt++){var qe=new nt(Yt,Pt);if(qe.z=this._tileZoom,!!this._isValidTile(qe)){var Ce=this._tiles[this._tileCoordsToKey(qe)];Ce?Ce.current=!0:C.push(qe)}}if(C.sort(function(tn,xr){return tn.distanceTo(T)-xr.distanceTo(T)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(Yt=0;Yt<C.length;Yt++)this._addTile(C[Yt],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(n){var o=this._map.options.crs;if(!o.infinite){var h=this._globalTileRange;if(!o.wrapLng&&(n.x<h.min.x||n.x>h.max.x)||!o.wrapLat&&(n.y<h.min.y||n.y>h.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(n);return vt(this.options.bounds).overlaps(_)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var o=this._map,h=this.getTileSize(),_=n.scaleBy(h),y=_.add(h),T=o.unproject(_,n.z),C=o.unproject(y,n.z);return[T,C]},_tileCoordsToBounds:function(n){var o=this._tileCoordsToNwSe(n),h=new $t(o[0],o[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var o=n.split(":"),h=new nt(+o[0],+o[1]);return h.z=+o[2],h},_removeTile:function(n){var o=this._tiles[n];o&&(he(o.el),delete this._tiles[n],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){Nt(n,"leaflet-tile");var o=this.getTileSize();n.style.width=o.x+"px",n.style.height=o.y+"px",n.onselectstart=I,n.onmousemove=I,wt.ielt9&&this.options.opacity<1&&we(n,this.options.opacity)},_addTile:function(n,o){var h=this._getTilePos(n),_=this._tileCoordsToKey(n),y=this.createTile(this._wrapCoords(n),m(this._tileReady,this,n));this._initTile(y),this.createTile.length<2&&St(m(this._tileReady,this,n,null,y)),pe(y,h),this._tiles[_]={el:y,coords:n,current:!0},o.appendChild(y),this.fire("tileloadstart",{tile:y,coords:n})},_tileReady:function(n,o,h){o&&this.fire("tileerror",{error:o,tile:h,coords:n});var _=this._tileCoordsToKey(n);h=this._tiles[_],h&&(h.loaded=+new Date,this._map._fadeAnimated?(we(h.el,0),Mt(this._fadeFrame),this._fadeFrame=St(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),o||(Nt(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),wt.ielt9||!this._map._fadeAnimated?St(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var o=new nt(this._wrapX?E(n.x,this._wrapX):n.x,this._wrapY?E(n.y,this._wrapY):n.y);return o.z=n.z,o},_pxBoundsToTileRange:function(n){var o=this.getTileSize();return new Ct(n.min.unscaleBy(o).floor(),n.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function oe(n){return new Zt(n)}var ce=Zt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,o){this._url=n,o=Z(this,o),o.detectRetina&&wt.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,o){return this._url===n&&o===void 0&&(o=!0),this._url=n,o||this.redraw(),this},createTile:function(n,o){var h=document.createElement("img");return At(h,"load",m(this._tileOnLoad,this,o,h)),At(h,"error",m(this._tileOnError,this,o,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(n),h},getTileUrl:function(n){var o={r:wt.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-n.y;this.options.tms&&(o.y=h),o["-y"]=h}return st(this._url,a(o,this.options))},_tileOnLoad:function(n,o){wt.ielt9?setTimeout(m(n,this,null,o),0):n(null,o)},_tileOnError:function(n,o,h){var _=this.options.errorTileUrl;_&&o.getAttribute("src")!==_&&(o.src=_),n(h,o)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,o=this.options.maxZoom,h=this.options.zoomReverse,_=this.options.zoomOffset;return h&&(n=o-n),n+_},_getSubdomain:function(n){var o=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var n,o;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(o=this._tiles[n].el,o.onload=I,o.onerror=I,!o.complete)){o.src=tt;var h=this._tiles[n].coords;he(o),delete this._tiles[n],this.fire("tileabort",{tile:o,coords:h})}},_removeTile:function(n){var o=this._tiles[n];if(o)return o.el.setAttribute("src",tt),Zt.prototype._removeTile.call(this,n)},_tileReady:function(n,o,h){if(!(!this._map||h&&h.getAttribute("src")===tt))return Zt.prototype._tileReady.call(this,n,o,h)}});function Ee(n,o){return new ce(n,o)}var Fn=ce.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,o){this._url=n;var h=a({},this.defaultWmsParams);for(var _ in o)_ in this.options||(h[_]=o[_]);o=Z(this,o);var y=o.detectRetina&&wt.retina?2:1,T=this.getTileSize();h.width=T.x*y,h.height=T.y*y,this.wmsParams=h},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,ce.prototype.onAdd.call(this,n)},getTileUrl:function(n){var o=this._tileCoordsToNwSe(n),h=this._crs,_=Dt(h.project(o[0]),h.project(o[1])),y=_.min,T=_.max,C=(this._wmsVersion>=1.3&&this._crs===Zs?[y.y,y.x,T.y,T.x]:[y.x,y.y,T.x,T.y]).join(","),B=ce.prototype.getTileUrl.call(this,n);return B+ct(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(n,o){return a(this.wmsParams,n),o||this.redraw(),this}});function Ui(n,o){return new Fn(n,o)}ce.WMS=Fn,Ee.wms=Ui;var vn=sn.extend({options:{padding:.1},initialize:function(n){Z(this,n),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Nt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,o){var h=this._map.getZoomScale(o,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,o),T=_.multiplyBy(-h).add(y).subtract(this._map._getNewPixelOrigin(n,o));wt.any3d?Kn(this._container,T,h):pe(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,o=this._map.getSize(),h=this._map.containerPointToLayerPoint(o.multiplyBy(-n)).round();this._bounds=new Ct(h,h.add(o.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),us=vn.extend({options:{tolerance:0},getEvents:function(){var n=vn.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");At(n,"mousemove",this._onMouseMove,this),At(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),At(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){Mt(this._redrawRequest),delete this._ctx,he(this._container),se(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var o in this._layers)n=this._layers[o],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var n=this._bounds,o=this._container,h=n.getSize(),_=wt.retina?2:1;pe(o,n.min),o.width=_*h.x,o.height=_*h.y,o.style.width=h.x+"px",o.style.height=h.y+"px",wt.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){vn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[w(n)]=n;var o=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var o=n._order,h=o.next,_=o.prev;h?h.prev=_:this._drawLast=_,_?_.next=h:this._drawFirst=h,delete n._order,delete this._layers[w(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var o=n.options.dashArray.split(/[, ]+/),h=[],_,y;for(y=0;y<o.length;y++){if(_=Number(o[y]),isNaN(_))return;h.push(_)}n.options._dashArray=h}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||St(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var o=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ct,this._redrawBounds.extend(n._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(n._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var o=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,o=this._redrawBounds;if(this._ctx.save(),o){var h=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)n=_.layer,(!o||n._pxBounds&&n._pxBounds.intersects(o))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,o){if(this._drawing){var h,_,y,T,C=n._parts,B=C.length,G=this._ctx;if(B){for(G.beginPath(),h=0;h<B;h++){for(_=0,y=C[h].length;_<y;_++)T=C[h][_],G[_?"lineTo":"moveTo"](T.x,T.y);o&&G.closePath()}this._fillStroke(G,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var o=n._point,h=this._ctx,_=Math.max(Math.round(n._radius),1),y=(Math.max(Math.round(n._radiusY),1)||_)/_;y!==1&&(h.save(),h.scale(1,y)),h.beginPath(),h.arc(o.x,o.y/y,_,0,Math.PI*2,!1),y!==1&&h.restore(),this._fillStroke(h,n)}},_fillStroke:function(n,o){var h=o.options;h.fill&&(n.globalAlpha=h.fillOpacity,n.fillStyle=h.fillColor||h.color,n.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(n.setLineDash&&n.setLineDash(o.options&&o.options._dashArray||[]),n.globalAlpha=h.opacity,n.lineWidth=h.weight,n.strokeStyle=h.color,n.lineCap=h.lineCap,n.lineJoin=h.lineJoin,n.stroke())},_onClick:function(n){for(var o=this._map.mouseEventToLayerPoint(n),h,_,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(o)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(h))&&(_=h);this._fireEvent(_?[_]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,o)}},_handleMouseOut:function(n){var o=this._hoveredLayer;o&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([o],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,o){if(!this._mouseHoverThrottled){for(var h,_,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(o)&&(_=h);_!==this._hoveredLayer&&(this._handleMouseOut(n),_&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([_],n,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,o,h){this._map._fireDOMEvent(o,h||o.type,n)},_bringToFront:function(n){var o=n._order;if(o){var h=o.next,_=o.prev;if(h)h.prev=_;else return;_?_.next=h:h&&(this._drawFirst=h),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(n)}},_bringToBack:function(n){var o=n._order;if(o){var h=o.next,_=o.prev;if(_)_.next=h;else return;h?h.prev=_:_&&(this._drawLast=_),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(n)}}});function ls(n){return wt.canvas?new us(n):null}var pi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),js={_initContainer:function(){this._container=Vt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vn.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var o=n._container=pi("shape");Nt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",n._path=pi("path"),o.appendChild(n._path),this._updateStyle(n),this._layers[w(n)]=n},_addPath:function(n){var o=n._container;this._container.appendChild(o),n.options.interactive&&n.addInteractiveTarget(o)},_removePath:function(n){var o=n._container;he(o),n.removeInteractiveTarget(o),delete this._layers[w(n)]},_updateStyle:function(n){var o=n._stroke,h=n._fill,_=n.options,y=n._container;y.stroked=!!_.stroke,y.filled=!!_.fill,_.stroke?(o||(o=n._stroke=pi("stroke")),y.appendChild(o),o.weight=_.weight+"px",o.color=_.color,o.opacity=_.opacity,_.dashArray?o.dashStyle=H(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=_.lineCap.replace("butt","flat"),o.joinstyle=_.lineJoin):o&&(y.removeChild(o),n._stroke=null),_.fill?(h||(h=n._fill=pi("fill")),y.appendChild(h),h.color=_.fillColor||_.color,h.opacity=_.fillOpacity):h&&(y.removeChild(h),n._fill=null)},_updateCircle:function(n){var o=n._point.round(),h=Math.round(n._radius),_=Math.round(n._radiusY||h);this._setPath(n,n._empty()?"M0 0":"AL "+o.x+","+o.y+" "+h+","+_+" 0,"+65535*360)},_setPath:function(n,o){n._path.v=o},_bringToFront:function(n){li(n._container)},_bringToBack:function(n){jn(n._container)}},Zi=wt.vml?pi:j,Qn=vn.extend({_initContainer:function(){this._container=Zi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){he(this._container),se(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var n=this._bounds,o=n.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,h.setAttribute("width",o.x),h.setAttribute("height",o.y)),pe(h,n.min),h.setAttribute("viewBox",[n.min.x,n.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(n){var o=n._path=Zi("path");n.options.className&&Nt(o,n.options.className),n.options.interactive&&Nt(o,"leaflet-interactive"),this._updateStyle(n),this._layers[w(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){he(n._path),n.removeInteractiveTarget(n._path),delete this._layers[w(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var o=n._path,h=n.options;o&&(h.stroke?(o.setAttribute("stroke",h.color),o.setAttribute("stroke-opacity",h.opacity),o.setAttribute("stroke-width",h.weight),o.setAttribute("stroke-linecap",h.lineCap),o.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?o.setAttribute("stroke-dasharray",h.dashArray):o.removeAttribute("stroke-dasharray"),h.dashOffset?o.setAttribute("stroke-dashoffset",h.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),h.fill?(o.setAttribute("fill",h.fillColor||h.color),o.setAttribute("fill-opacity",h.fillOpacity),o.setAttribute("fill-rule",h.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(n,o){this._setPath(n,X(n._parts,o))},_updateCircle:function(n){var o=n._point,h=Math.max(Math.round(n._radius),1),_=Math.max(Math.round(n._radiusY),1)||h,y="a"+h+","+_+" 0 1,0 ",T=n._empty()?"M0 0":"M"+(o.x-h)+","+o.y+y+h*2+",0 "+y+-h*2+",0 ";this._setPath(n,T)},_setPath:function(n,o){n._path.setAttribute("d",o)},_bringToFront:function(n){li(n._path)},_bringToBack:function(n){jn(n._path)}});wt.vml&&Qn.include(js);function yr(n){return wt.svg||wt.vml?new Qn(n):null}zt.include({getRenderer:function(n){var o=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var o=this._paneRenderers[n];return o===void 0&&(o=this._createRenderer({pane:n}),this._paneRenderers[n]=o),o},_createRenderer:function(n){return this.options.preferCanvas&&ls(n)||yr(n)}});var Ja=mi.extend({initialize:function(n,o){mi.prototype.initialize.call(this,this._boundsToLatLngs(n),o)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=vt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Dh(n,o){return new Ja(n,o)}Qn.create=Zi,Qn.pointsToPath=X,pn.geometryToLayer=mr,pn.coordsToLatLng=zn,pn.coordsToLatLngs=pr,pn.latLngToCoords=vr,pn.latLngsToCoords=De,pn.getFeature=Ae,pn.asFeature=r,zt.mergeOptions({boxZoom:!0});var Qa=_n.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){se(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){he(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),wn(),Yr(),this._startPoint=this._map.mouseEventToContainerPoint(n),At(document,{contextmenu:On,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Vt("div","leaflet-zoom-box",this._container),Nt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var o=new Ct(this._point,this._startPoint),h=o.getSize();pe(this._box,o.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(he(this._box),Qt(this._container,"leaflet-crosshair")),hi(),Oi(),se(document,{contextmenu:On,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var o=new $t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});zt.addInitHook("addHandler","boxZoom",Qa),zt.mergeOptions({doubleClickZoom:!0});var tu=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var o=this._map,h=o.getZoom(),_=o.options.zoomDelta,y=n.originalEvent.shiftKey?h-_:h+_;o.options.doubleClickZoom==="center"?o.setZoom(y):o.setZoomAround(n.containerPoint,y)}});zt.addInitHook("addHandler","doubleClickZoom",tu),zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var eu=_n.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Dn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}Nt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qt(this._map._container,"leaflet-grab"),Qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=vt(this._map.options.maxBounds);this._offsetLimit=Dt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var o=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(o),this._prunePositions(o)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,o){return n-(n-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;n.x<o.min.x&&(n.x=this._viscousLimit(n.x,o.min.x)),n.y<o.min.y&&(n.y=this._viscousLimit(n.y,o.min.y)),n.x>o.max.x&&(n.x=this._viscousLimit(n.x,o.max.x)),n.y>o.max.y&&(n.y=this._viscousLimit(n.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,o=Math.round(n/2),h=this._initialWorldOffset,_=this._draggable._newPos.x,y=(_-o+h)%n+o-h,T=(_+o+h)%n-o-h,C=Math.abs(y+h)<Math.abs(T+h)?y:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(n){var o=this._map,h=o.options,_=!h.inertia||n.noInertia||this._times.length<2;if(o.fire("dragend",n),_)o.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,C=h.easeLinearity,B=y.multiplyBy(C/T),G=B.distanceTo([0,0]),K=Math.min(h.inertiaMaxSpeed,G),gt=B.multiplyBy(K/G),Pt=K/(h.inertiaDeceleration*C),Yt=gt.multiplyBy(-Pt/2).round();!Yt.x&&!Yt.y?o.fire("moveend"):(Yt=o._limitOffset(Yt,o.options.maxBounds),St(function(){o.panBy(Yt,{duration:Pt,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});zt.addInitHook("addHandler","dragging",eu),zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nu=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),At(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),se(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,o=document.documentElement,h=n.scrollTop||o.scrollTop,_=n.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(_,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var o=this._panKeys={},h=this.keyCodes,_,y;for(_=0,y=h.left.length;_<y;_++)o[h.left[_]]=[-1*n,0];for(_=0,y=h.right.length;_<y;_++)o[h.right[_]]=[n,0];for(_=0,y=h.down.length;_<y;_++)o[h.down[_]]=[0,n];for(_=0,y=h.up.length;_<y;_++)o[h.up[_]]=[0,-1*n]},_setZoomDelta:function(n){var o=this._zoomKeys={},h=this.keyCodes,_,y;for(_=0,y=h.zoomIn.length;_<y;_++)o[h.zoomIn[_]]=n;for(_=0,y=h.zoomOut.length;_<y;_++)o[h.zoomOut[_]]=-n},_addHooks:function(){At(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){se(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=n.keyCode,h=this._map,_;if(o in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(_=this._panKeys[o],n.shiftKey&&(_=q(_).multiplyBy(3)),h.options.maxBounds&&(_=h._limitOffset(q(_),h.options.maxBounds)),h.options.worldCopyJump){var y=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(_)));h.panTo(y)}else h.panBy(_)}else if(o in this._zoomKeys)h.setZoom(h.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;On(n)}}});zt.addInitHook("addHandler","keyboard",nu),zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var iu=_n.extend({addHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){se(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var o=Kr(n),h=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var _=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),_),On(n)},_performZoom:function(){var n=this._map,o=n.getZoom(),h=this._map.options.zoomSnap||0;n._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,T=h?Math.ceil(y/h)*h:y,C=n._limitZoom(o+(this._delta>0?T:-T))-o;this._delta=0,this._startTime=null,C&&(n.options.scrollWheelZoom==="center"?n.setZoom(o+C):n.setZoomAround(this._lastMousePos,o+C))}});zt.addInitHook("addHandler","scrollWheelZoom",iu);var Ah=600;zt.mergeOptions({tapHold:wt.touchNative&&wt.safari&&wt.mobile,tapTolerance:15});var ru=_n.extend({addHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){se(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var o=n.touches[0];this._startPos=this._newPos=new nt(o.clientX,o.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(At(document,"touchend",fe),At(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Ah),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){se(document,"touchend",fe),se(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),se(document,"touchend touchcancel contextmenu",this._cancel,this),se(document,"touchmove",this._onMove,this)},_onMove:function(n){var o=n.touches[0];this._newPos=new nt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,o){var h=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});h._simulated=!0,o.target.dispatchEvent(h)}});zt.addInitHook("addHandler","tapHold",ru),zt.mergeOptions({touchZoom:wt.touch,bounceAtZoomLimits:!0});var su=_n.extend({addHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),se(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var o=this._map;if(!(!n.touches||n.touches.length!==2||o._animatingZoom||this._zooming)){var h=o.mouseEventToContainerPoint(n.touches[0]),_=o.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(h.add(_)._divideBy(2))),this._startDist=h.distanceTo(_),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),fe(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var o=this._map,h=o.mouseEventToContainerPoint(n.touches[0]),_=o.mouseEventToContainerPoint(n.touches[1]),y=h.distanceTo(_)/this._startDist;if(this._zoom=o.getScaleZoom(y,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&y<1||this._zoom>o.getMaxZoom()&&y>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var T=h._add(_)._divideBy(2)._subtract(this._centerPoint);if(y===1&&T.x===0&&T.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Mt(this._animRequest);var C=m(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=St(C,this,!0),fe(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Mt(this._animRequest),se(document,"touchmove",this._onTouchMove,this),se(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});zt.addInitHook("addHandler","touchZoom",su),zt.BoxZoom=Qa,zt.DoubleClickZoom=tu,zt.Drag=eu,zt.Keyboard=nu,zt.ScrollWheelZoom=iu,zt.TapHold=ru,zt.TouchZoom=su,f.Bounds=Ct,f.Browser=wt,f.CRS=Ne,f.Canvas=us,f.Circle=_r,f.CircleMarker=Gi,f.Class=it,f.Control=rn,f.DivIcon=Et,f.DivOverlay=O,f.DomEvent=Go,f.DomUtil=ur,f.Draggable=Dn,f.Evented=bt,f.FeatureGroup=Tn,f.GeoJSON=pn,f.GridLayer=Zt,f.Handler=_n,f.Icon=_i,f.ImageOverlay=l,f.LatLng=qt,f.LatLngBounds=$t,f.Layer=sn,f.LayerGroup=gi,f.LineUtil=rs,f.Map=zt,f.Marker=gr,f.Mixin=qo,f.Path=An,f.Point=nt,f.PolyUtil=Ze,f.Polygon=mi,f.Polyline=mn,f.Popup=F,f.PosAnimation=$r,f.Projection=Vo,f.Rectangle=Ja,f.Renderer=vn,f.SVG=Qn,f.SVGOverlay=b,f.TileLayer=ce,f.Tooltip=ut,f.Transformation=xt,f.Util=ne,f.VideoOverlay=v,f.bind=m,f.bounds=Dt,f.canvas=ls,f.circle=$o,f.circleMarker=Vs,f.control=Pe,f.divIcon=Wt,f.extend=a,f.featureGroup=qs,f.geoJSON=e,f.geoJson=i,f.gridLayer=oe,f.icon=jo,f.imageOverlay=d,f.latLng=Ut,f.latLngBounds=vt,f.layerGroup=Hs,f.map=cr,f.marker=Ko,f.point=q,f.polygon=Ws,f.polyline=as,f.popup=Y,f.rectangle=Dh,f.setOptions=Z,f.stamp=w,f.svg=yr,f.svgOverlay=P,f.tileLayer=Ee,f.tooltip=pt,f.transformation=k,f.version=g,f.videoOverlay=x;var zh=window.L;f.noConflict=function(){return window.L=zh,this},window.L=f})}(gs,gs.exports)),gs.exports}var dd=fd();const kr=dh(dd);(function(s,u,f){function g(a,c){for(;(a=a.parentElement)&&!a.classList.contains(c););return a}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(a,c){this._map=a,this._container=a._container,this._overlayPane=a._panes.overlayPane,this._popupPane=a._panes.popupPane,c&&c.shapeOptions&&(c.shapeOptions=L.Util.extend({},this.options.shapeOptions,c.shapeOptions)),L.setOptions(this,c);var m=L.version.split(".");parseInt(m[0],10)===1&&parseInt(m[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var a=this._map;a&&(L.DomUtil.disableTextSelection(),a.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(a){L.setOptions(this,a)},_fireCreatedEvent:function(a){this._map.fire(L.Draw.Event.CREATED,{layer:a,layerType:this.type})},_cancelDrawing:function(a){a.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(a,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,a,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var a=this._markers.pop(),c=this._poly,m=c.getLatLngs(),p=m.splice(-1,1)[0];this._poly.setLatLngs(m),this._markerGroup.removeLayer(a),c.getLatLngs().length<2&&this._map.removeLayer(c),this._vertexChanged(p,!1)}},addVertex:function(a){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(a))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(a)),this._poly.addLatLng(a),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(a,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var a=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),c=this._poly.newLatLngIntersects(a[a.length-1]);if(!this.options.allowIntersection&&c||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(a){var c=this._map.mouseEventToLayerPoint(a.originalEvent),m=this._map.layerPointToLatLng(c);this._currentLatLng=m,this._updateTooltip(m),this._updateGuide(c),this._mouseMarker.setLatLng(m),L.DomEvent.preventDefault(a.originalEvent)},_vertexChanged:function(a,c){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(a,c),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(a){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(a),this._clickHandled=!0,this._disableNewMarkers();var c=a.originalEvent,m=c.clientX,p=c.clientY;this._startPoint.call(this,m,p)}},_startPoint:function(a,c){this._mouseDownOrigin=L.point(a,c)},_onMouseUp:function(a){var c=a.originalEvent,m=c.clientX,p=c.clientY;this._endPoint.call(this,m,p,a),this._clickHandled=null},_endPoint:function(a,c,m){if(this._mouseDownOrigin){var p=L.point(a,c).distanceTo(this._mouseDownOrigin),w=this._calculateFinishDistance(m.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(m.latlng),this._finishShape()):w<10&&L.Browser.touch?this._finishShape():Math.abs(p)<9*(s.devicePixelRatio||1)&&this.addVertex(m.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(a){var c,m,p=a.originalEvent;!p.touches||!p.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(c=p.touches[0].clientX,m=p.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,c,m),this._endPoint.call(this,c,m,a),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(a){var c;if(this._markers.length>0){var m;if(this.type===L.Draw.Polyline.TYPE)m=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;m=this._markers[0]}var p=this._map.latLngToContainerPoint(m.getLatLng()),w=new L.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),S=this._map.latLngToContainerPoint(w.getLatLng());c=p.distanceTo(S)}else c=1/0;return c},_updateFinishHandler:function(){var a=this._markers.length;a>1&&this._markers[a-1].on("click",this._finishShape,this),a>2&&this._markers[a-2].off("click",this._finishShape,this)},_createMarker:function(a){var c=new L.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(c),c},_updateGuide:function(a){var c=this._markers?this._markers.length:0;c>0&&(a=a||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[c-1].getLatLng()),a))},_updateTooltip:function(a){var c=this._getTooltipText();a&&this._tooltip.updatePosition(a),this._errorShown||this._tooltip.updateContent(c)},_drawGuide:function(a,c){var m,p,w,S=Math.floor(Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2))),E=this.options.guidelineDistance,I=this.options.maxGuideLineLength,M=S>I?S-I:E;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));M<S;M+=this.options.guidelineDistance)m=M/S,p={x:Math.floor(a.x*(1-m)+m*c.x),y:Math.floor(a.y*(1-m)+m*c.y)},w=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),w.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(w,p)},_updateGuideColor:function(a){if(this._guidesContainer)for(var c=0,m=this._guidesContainer.childNodes.length;c<m;c++)this._guidesContainer.childNodes[c].style.backgroundColor=a},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var a,c,m=this.options.showLength;return this._markers.length===0?a={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(c=m?this._getMeasurementString():"",a=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:c}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:c}),a},_updateRunningMeasure:function(a,c){var m,p,w=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(m=w-(c?2:1),p=L.GeometryUtil.isVersion07x()?a.distanceTo(this._markers[m].getLatLng())*(this.options.factor||1):this._map.distance(a,this._markers[m].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=p*(c?1:-1))},_getMeasurementString:function(){var a,c=this._currentLatLng,m=this._markers[this._markers.length-1].getLatLng();return a=L.GeometryUtil.isVersion07x()?m&&c&&c.distanceTo?this._measurementRunningTotal+c.distanceTo(m)*(this.options.factor||1):this._measurementRunningTotal||0:m&&c?this._measurementRunningTotal+this._map.distance(c,m)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(a,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var a=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(a,c){L.Draw.Polyline.prototype.initialize.call(this,a,c),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var a=this._markers.length;a===1&&this._markers[0].on("click",this._finishShape,this),a>2&&(this._markers[a-1].on("dblclick",this._finishShape,this),a>3&&this._markers[a-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var a,c;return this._markers.length===0?a=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(a=L.drawLocal.draw.handlers.polygon.tooltip.cont,c=this._getMeasurementString()):(a=L.drawLocal.draw.handlers.polygon.tooltip.end,c=this._getMeasurementString()),{text:a,subtext:c}},_getMeasurementString:function(){var a=this._area,c="";return a||this.options.showLength?(this.options.showLength&&(c=L.Draw.Polyline.prototype._getMeasurementString.call(this)),a&&(c+="<br>"+L.GeometryUtil.readableArea(a,this.options.metric,this.options.precision)),c):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(a,c){var m;!this.options.allowIntersection&&this.options.showArea&&(m=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(m)),L.Draw.Polyline.prototype._vertexChanged.call(this,a,c)},_cleanUpShape:function(){var a=this._markers.length;a>0&&(this._markers[0].off("click",this._finishShape,this),a>2&&this._markers[a-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(a,c){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,a,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),u.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(u,"mouseup",this._onMouseUp,this),L.DomEvent.off(u,"touchend",this._onMouseUp,this),u.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(a){this._isDrawing=!0,this._startLatLng=a.latlng,L.DomEvent.on(u,"mouseup",this._onMouseUp,this).on(u,"touchend",this._onMouseUp,this).preventDefault(a.originalEvent)},_onMouseMove:function(a){var c=a.latlng;this._tooltip.updatePosition(c),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(c))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(a,c){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,c)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(a){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!g(a.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(a){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,a)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_getTooltipText:function(){var a,c,m,p=L.Draw.SimpleShape.prototype._getTooltipText.call(this),w=this._shape,S=this.options.showArea;return w&&(a=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),c=L.GeometryUtil.geodesicArea(a),m=S?L.GeometryUtil.readableArea(c,this.options.metric):""),{text:p.text,subtext:m}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(a,c){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,a,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(a){var c=a.latlng;this._tooltip.updatePosition(c),this._mouseMarker.setLatLng(c),this._marker?(c=this._mouseMarker.getLatLng(),this._marker.setLatLng(c)):(this._marker=this._createMarker(c),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(a){return new L.Marker(a,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(a){this._onMouseMove(a),this._onClick()},_fireCreatedEvent:function(){var a=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(a,c){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,a,c)},_fireCreatedEvent:function(){var a=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)},_createMarker:function(a){return new L.CircleMarker(a,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(a,c){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,c)},_drawShape:function(a){if(L.GeometryUtil.isVersion07x())var c=this._startLatLng.distanceTo(a);else var c=this._map.distance(this._startLatLng,a);this._shape?this._shape.setRadius(c):(this._shape=new L.Circle(this._startLatLng,c,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_onMouseMove:function(a){var c,m=a.latlng,p=this.options.showRadius,w=this.options.metric;if(this._tooltip.updatePosition(m),this._isDrawing){this._drawShape(m),c=this._shape.getRadius().toFixed(1);var S="";p&&(S=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(c,w,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:S})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(a,c){this._marker=a,L.setOptions(this,c)},addHooks:function(){var a=this._marker;a.dragging.enable(),a.on("dragend",this._onDragEnd,a),this._toggleMarkerHighlight()},removeHooks:function(){var a=this._marker;a.dragging.disable(),a.off("dragend",this._onDragEnd,a),this._toggleMarkerHighlight()},_onDragEnd:function(a){var c=a.target;c.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:c})},_toggleMarkerHighlight:function(){var a=this._marker._icon;a&&(a.style.display="none",L.DomUtil.hasClass(a,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(a,"leaflet-edit-marker-selected"),this._offsetMarker(a,-4)):(L.DomUtil.addClass(a,"leaflet-edit-marker-selected"),this._offsetMarker(a,4)),a.style.display="")},_offsetMarker:function(a,c){var m=parseInt(a.style.marginTop,10)-c,p=parseInt(a.style.marginLeft,10)-c;a.style.marginTop=m+"px",a.style.marginLeft=p+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(a){this.latlngs=[a._latlngs],a._holes&&(this.latlngs=this.latlngs.concat(a._holes)),this._poly=a,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(a){for(var c=0;c<this._verticesHandlers.length;c++)a(this._verticesHandlers[c])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(a){a.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(a){a.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(a){a.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var a=0;a<this.latlngs.length;a++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[a],this._poly.options.poly))},_updateLatLngs:function(a){this.latlngs=[a.layer._latlngs],a.layer._holes&&(this.latlngs=this.latlngs.concat(a.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(a,c,m){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=a,m&&m.drawError&&(m.drawError=L.Util.extend({},this.options.drawError,m.drawError)),this._latlngs=c,L.setOptions(this,m)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var a=this._poly,c=a._path;a instanceof L.Polygon||(a.options.fill=!1,a.options.editing&&(a.options.editing.fill=!1)),c&&a.options.editing&&a.options.editing.className&&(a.options.original.className&&a.options.original.className.split(" ").forEach(function(m){L.DomUtil.removeClass(c,m)}),a.options.editing.className.split(" ").forEach(function(m){L.DomUtil.addClass(c,m)})),a.setStyle(a.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var a=this._poly,c=a._path;c&&a.options.editing&&a.options.editing.className&&(a.options.editing.className.split(" ").forEach(function(m){L.DomUtil.removeClass(c,m)}),a.options.original.className&&a.options.original.className.split(" ").forEach(function(m){L.DomUtil.addClass(c,m)})),a.setStyle(a.options.original),a._map&&(a._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var a,c,m,p,w=this._defaultShape();for(a=0,m=w.length;a<m;a++)p=this._createMarker(w[a],a),p.on("click",this._onMarkerClick,this),p.on("contextmenu",this._onContextMenu,this),this._markers.push(p);var S,E;for(a=0,c=m-1;a<m;c=a++)(a!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(S=this._markers[c],E=this._markers[a],this._createMiddleMarker(S,E),this._updatePrevNext(S,E))},_createMarker:function(a,c){var m=new L.Marker.Touch(a,{draggable:!0,icon:this.options.icon});return m._origLatLng=a,m._index=c,m.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(m),m},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var a=this._defaultShape(),c=[].splice.apply(a,arguments);return this._poly._convertLatLngs(a,!0),this._poly.redraw(),c},_removeMarker:function(a){var c=a._index;this._markerGroup.removeLayer(a),this._markers.splice(c,1),this._spliceLatLngs(c,1),this._updateIndexes(c,-1),a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(a){var c=a.target,m=this._poly,p=L.LatLngUtil.cloneLatLng(c._origLatLng);if(L.extend(c._origLatLng,c._latlng),m.options.poly){var w=m._map._editTooltip;if(!m.options.poly.allowIntersection&&m.intersects()){L.extend(c._origLatLng,p),c.setLatLng(p);var S=m.options.color;m.setStyle({color:this.options.drawError.color}),w&&w.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){m.setStyle({color:S}),w&&w.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}c._middleLeft&&c._middleLeft.setLatLng(this._getMiddleLatLng(c._prev,c)),c._middleRight&&c._middleRight.setLatLng(this._getMiddleLatLng(c,c._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var E=this._poly.getLatLngs();this._poly._convertLatLngs(E,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(a){var c=L.Polygon&&this._poly instanceof L.Polygon?4:3,m=a.target;this._defaultShape().length<c||(this._removeMarker(m),this._updatePrevNext(m._prev,m._next),m._middleLeft&&this._markerGroup.removeLayer(m._middleLeft),m._middleRight&&this._markerGroup.removeLayer(m._middleRight),m._prev&&m._next?this._createMiddleMarker(m._prev,m._next):m._prev?m._next||(m._prev._middleRight=null):m._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(a){var c=a.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:c,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(a){var c=this._map.mouseEventToLayerPoint(a.originalEvent.touches[0]),m=this._map.layerPointToLatLng(c),p=a.target;L.extend(p._origLatLng,m),p._middleLeft&&p._middleLeft.setLatLng(this._getMiddleLatLng(p._prev,p)),p._middleRight&&p._middleRight.setLatLng(this._getMiddleLatLng(p,p._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(a,c){this._markerGroup.eachLayer(function(m){m._index>a&&(m._index+=c)})},_createMiddleMarker:function(a,c){var m,p,w,S=this._getMiddleLatLng(a,c),E=this._createMarker(S);E.setOpacity(.6),a._middleRight=c._middleLeft=E,p=function(){E.off("touchmove",p,this);var I=c._index;E._index=I,E.off("click",m,this).on("click",this._onMarkerClick,this),S.lat=E.getLatLng().lat,S.lng=E.getLatLng().lng,this._spliceLatLngs(I,0,S),this._markers.splice(I,0,E),E.setOpacity(1),this._updateIndexes(I,1),c._index++,this._updatePrevNext(a,E),this._updatePrevNext(E,c),this._poly.fire("editstart")},w=function(){E.off("dragstart",p,this),E.off("dragend",w,this),E.off("touchmove",p,this),this._createMiddleMarker(a,E),this._createMiddleMarker(E,c)},m=function(){p.call(this),w.call(this),this._fireEdit()},E.on("click",m,this).on("dragstart",p,this).on("dragend",w,this).on("touchmove",p,this),this._markerGroup.addLayer(E)},_updatePrevNext:function(a,c){a&&(a._next=c),c&&(c._prev=a)},_getMiddleLatLng:function(a,c){var m=this._poly._map,p=m.project(a.getLatLng()),w=m.project(c.getLatLng());return m.unproject(p._add(w)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(a,c){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=a,L.Util.setOptions(this,c)},addHooks:function(){var a=this._shape;this._shape._map&&(this._map=this._shape._map,a.setStyle(a.options.editing),a._map&&(this._map=a._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var a=this._shape;if(a.setStyle(a.options.original),a._map){this._unbindMarker(this._moveMarker);for(var c=0,m=this._resizeMarkers.length;c<m;c++)this._unbindMarker(this._resizeMarkers[c]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(a,c){var m=new L.Marker.Touch(a,{draggable:!0,icon:c,zIndexOffset:10});return this._bindMarker(m),this._markerGroup.addLayer(m),m},_bindMarker:function(a){a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(a){a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(a){a.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(a){var c=a.target,m=c.getLatLng();c===this._moveMarker?this._move(m):this._resize(m),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(a){a.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(a){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,a),typeof this._getCorners=="function"){var c=this._getCorners(),m=a.target,p=m._cornerIndex;m.setOpacity(0),this._oppositeCorner=c[(p+2)%4],this._toggleCornerMarkers(0,p)}this._shape.fire("editstart")},_onTouchMove:function(a){var c=this._map.mouseEventToLayerPoint(a.originalEvent.touches[0]),m=this._map.layerPointToLatLng(c);return a.target===this._moveMarker?this._move(m):this._resize(m),this._shape.redraw(),!1},_onTouchEnd:function(a){a.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getBounds(),c=a.getCenter();this._moveMarker=this._createMarker(c,this.options.moveIcon)},_createResizeMarker:function(){var a=this._getCorners();this._resizeMarkers=[];for(var c=0,m=a.length;c<m;c++)this._resizeMarkers.push(this._createMarker(a[c],this.options.resizeIcon)),this._resizeMarkers[c]._cornerIndex=c},_onMarkerDragStart:function(a){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,a);var c=this._getCorners(),m=a.target,p=m._cornerIndex;this._oppositeCorner=c[(p+2)%4],this._toggleCornerMarkers(0,p)},_onMarkerDragEnd:function(a){var c,m,p=a.target;p===this._moveMarker&&(c=this._shape.getBounds(),m=c.getCenter(),p.setLatLng(m)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,a)},_move:function(a){for(var c,m=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),p=this._shape.getBounds(),w=p.getCenter(),S=[],E=0,I=m.length;E<I;E++)c=[m[E].lat-w.lat,m[E].lng-w.lng],S.push([a.lat+c[0],a.lng+c[1]]);this._shape.setLatLngs(S),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(a){var c;this._shape.setBounds(L.latLngBounds(a,this._oppositeCorner)),c=this._shape.getBounds(),this._moveMarker.setLatLng(c.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var a=this._shape.getBounds();return[a.getNorthWest(),a.getNorthEast(),a.getSouthEast(),a.getSouthWest()]},_toggleCornerMarkers:function(a){for(var c=0,m=this._resizeMarkers.length;c<m;c++)this._resizeMarkers[c].setOpacity(a)},_repositionCornerMarkers:function(){for(var a=this._getCorners(),c=0,m=this._resizeMarkers.length;c<m;c++)this._resizeMarkers[c].setLatLng(a[c])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getLatLng();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(a){if(this._resizeMarkers.length){var c=this._getResizeMarkerPoint(a);this._resizeMarkers[0].setLatLng(c)}this._shape.setLatLng(a),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var a=this._shape.getLatLng(),c=this._getResizeMarkerPoint(a);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(c,this.options.resizeIcon))},_getResizeMarkerPoint:function(a){var c=this._shape._radius*Math.cos(Math.PI/4),m=this._map.project(a);return this._map.unproject([m.x+c,m.y-c])},_resize:function(a){var c=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=c.distanceTo(a):radius=this._map.distance(c,a),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(a,c){var m={};if(a.touches!==void 0){if(!a.touches.length)return;m=a.touches[0]}else if(a.pointerType!=="touch"||(m=a,!this._filterClick(a)))return;var p=this._map.mouseEventToContainerPoint(m),w=this._map.mouseEventToLayerPoint(m),S=this._map.layerPointToLatLng(w);this._map.fire(c,{latlng:S,layerPoint:w,containerPoint:p,pageX:m.pageX,pageY:m.pageY,originalEvent:a})},_filterClick:function(a){var c=a.timeStamp||a.originalEvent.timeStamp,m=L.DomEvent._lastClick&&c-L.DomEvent._lastClick;return m&&m>100&&m<500||a.target._simulatedClick&&!a._simulated?(L.DomEvent.stop(a),!1):(L.DomEvent._lastClick=c,!0)},_onTouchStart:function(a){this._map._loaded&&this._touchEvent(a,"touchstart")},_onTouchEnd:function(a){this._map._loaded&&this._touchEvent(a,"touchend")},_onTouchCancel:function(a){if(this._map._loaded){var c="touchcancel";this._detectIE()&&(c="pointercancel"),this._touchEvent(a,c)}},_onTouchLeave:function(a){this._map._loaded&&this._touchEvent(a,"touchleave")},_onTouchMove:function(a){this._map._loaded&&this._touchEvent(a,"touchmove")},_detectIE:function(){var a=s.navigator.userAgent,c=a.indexOf("MSIE ");if(c>0)return parseInt(a.substring(c+5,a.indexOf(".",c)),10);if(a.indexOf("Trident/")>0){var m=a.indexOf("rv:");return parseInt(a.substring(m+3,a.indexOf(".",m)),10)}var p=a.indexOf("Edge/");return p>0&&parseInt(a.substring(p+5,a.indexOf(".",p)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var a=this._icon,c=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?c.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):c.concat(["touchcancel"]),L.DomUtil.addClass(a,"leaflet-clickable"),L.DomEvent.on(a,"click",this._onMouseClick,this),L.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var m=0;m<c.length;m++)L.DomEvent.on(a,c[m],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var a=s.navigator.userAgent,c=a.indexOf("MSIE ");if(c>0)return parseInt(a.substring(c+5,a.indexOf(".",c)),10);if(a.indexOf("Trident/")>0){var m=a.indexOf("rv:");return parseInt(a.substring(m+3,a.indexOf(".",m)),10)}var p=a.indexOf("Edge/");return p>0&&parseInt(a.substring(p+5,a.indexOf(".",p)),10)}}),L.LatLngUtil={cloneLatLngs:function(a){for(var c=[],m=0,p=a.length;m<p;m++)Array.isArray(a[m])?c.push(L.LatLngUtil.cloneLatLngs(a[m])):c.push(this.cloneLatLng(a[m]));return c},cloneLatLng:function(a){return L.latLng(a.lat,a.lng)}},function(){var a={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(c){var m,p,w=c.length,S=0,E=Math.PI/180;if(w>2){for(var I=0;I<w;I++)m=c[I],p=c[(I+1)%w],S+=(p.lng-m.lng)*E*(2+Math.sin(m.lat*E)+Math.sin(p.lat*E));S=6378137*S*6378137/2}return Math.abs(S)},formattedNumber:function(c,m){var p=parseFloat(c).toFixed(m),w=L.drawLocal.format&&L.drawLocal.format.numeric,S=w&&w.delimiters,E=S&&S.thousands,I=S&&S.decimal;if(E||I){var M=p.split(".");p=E?M[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+E):M[0],I=I||".",M.length>1&&(p=p+I+M[1])}return p},readableArea:function(c,m,E){var w,S,E=L.Util.extend({},a,E);return m?(S=["ha","m"],type=typeof m,type==="string"?S=[m]:type!=="boolean"&&(S=m),w=c>=1e6&&S.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*c,E.km)+" km":c>=1e4&&S.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*c,E.ha)+" ha":L.GeometryUtil.formattedNumber(c,E.m)+" m"):(c/=.836127,w=c>=3097600?L.GeometryUtil.formattedNumber(c/3097600,E.mi)+" mi":c>=4840?L.GeometryUtil.formattedNumber(c/4840,E.ac)+" acres":L.GeometryUtil.formattedNumber(c,E.yd)+" yd"),w},readableDistance:function(c,m,p,w,I){var E,I=L.Util.extend({},a,I);switch(m?typeof m=="string"?m:"metric":p?"feet":w?"nauticalMile":"yards"){case"metric":E=c>1e3?L.GeometryUtil.formattedNumber(c/1e3,I.km)+" km":L.GeometryUtil.formattedNumber(c,I.m)+" m";break;case"feet":c*=3.28083,E=L.GeometryUtil.formattedNumber(c,I.ft)+" ft";break;case"nauticalMile":c*=.53996,E=L.GeometryUtil.formattedNumber(c/1e3,I.nm)+" nm";break;case"yards":default:c*=1.09361,E=c>1760?L.GeometryUtil.formattedNumber(c/1760,I.mi)+" miles":L.GeometryUtil.formattedNumber(c,I.yd)+" yd"}return E},isVersion07x:function(){var c=L.version.split(".");return parseInt(c[0],10)===0&&parseInt(c[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(a,c,m,p){return this._checkCounterclockwise(a,m,p)!==this._checkCounterclockwise(c,m,p)&&this._checkCounterclockwise(a,c,m)!==this._checkCounterclockwise(a,c,p)},_checkCounterclockwise:function(a,c,m){return(m.y-a.y)*(c.x-a.x)>(c.y-a.y)*(m.x-a.x)}}),L.Polyline.include({intersects:function(){var a,c,m,p=this._getProjectedPoints(),w=p?p.length:0;if(this._tooFewPointsForIntersection())return!1;for(a=w-1;a>=3;a--)if(c=p[a-1],m=p[a],this._lineSegmentsIntersectsRange(c,m,a-2))return!0;return!1},newLatLngIntersects:function(a,c){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(a),c)},newPointIntersects:function(a,c){var m=this._getProjectedPoints(),p=m?m.length:0,w=m?m[p-1]:null,S=p-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(w,a,S,c?1:0)},_tooFewPointsForIntersection:function(a){var c=this._getProjectedPoints(),m=c?c.length:0;return m+=a||0,!c||m<=3},_lineSegmentsIntersectsRange:function(a,c,m,p){var w,S,E=this._getProjectedPoints();p=p||0;for(var I=m;I>p;I--)if(w=E[I-1],S=E[I],L.LineUtil.segmentsIntersect(a,c,w,S))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var a=[],c=this._defaultShape(),m=0;m<c.length;m++)a.push(this._map.latLngToLayerPoint(c[m]));return a}}),L.Polygon.include({intersects:function(){var a,c,m,p,w=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(a=w.length,c=w[0],m=w[a-1],p=a-2,this._lineSegmentsIntersectsRange(m,c,p,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(a){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,a);var c;this._toolbars={},L.DrawToolbar&&this.options.draw&&(c=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=c,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(c=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=c,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(a){var c,m=L.DomUtil.create("div","leaflet-draw"),p=!1;for(var w in this._toolbars)this._toolbars.hasOwnProperty(w)&&(c=this._toolbars[w].addToolbar(a))&&(p||(L.DomUtil.hasClass(c,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(c.childNodes[0],"leaflet-draw-toolbar-top"),p=!0),m.appendChild(c));return m},onRemove:function(){for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&this._toolbars[a].removeToolbar()},setDrawingOptions:function(a){for(var c in this._toolbars)this._toolbars[c]instanceof L.DrawToolbar&&this._toolbars[c].setOptions(a)},_toolbarEnabled:function(a){var c=a.target;for(var m in this._toolbars)this._toolbars[m]!==c&&this._toolbars[m].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(a){L.setOptions(this,a),this._modes={},this._actionButtons=[],this._activeMode=null;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(a){var c,m=L.DomUtil.create("div","leaflet-draw-section"),p=0,w=this._toolbarClass||"",S=this.getModeHandlers(a);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=a,c=0;c<S.length;c++)S[c].enabled&&this._initModeHandler(S[c].handler,this._toolbarContainer,p++,w,S[c].title);if(p)return this._lastButtonIndex=--p,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),m.appendChild(this._toolbarContainer),m.appendChild(this._actionsContainer),m},removeToolbar:function(){for(var a in this._modes)this._modes.hasOwnProperty(a)&&(this._disposeButton(this._modes[a].button,this._modes[a].handler.enable,this._modes[a].handler),this._modes[a].handler.disable(),this._modes[a].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var c=0,m=this._actionButtons.length;c<m;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(a,c,m,p,w){var S=a.type;this._modes[S]={},this._modes[S].handler=a,this._modes[S].button=this._createButton({type:S,title:w,className:p+"-"+S,container:c,callback:this._modes[S].handler.enable,context:this._modes[S].handler}),this._modes[S].buttonIndex=m,this._modes[S].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!s.MSStream},_createButton:function(a){var c=L.DomUtil.create("a",a.className||"",a.container),m=L.DomUtil.create("span","sr-only",a.container);c.href="#",c.appendChild(m),a.title&&(c.title=a.title,m.innerHTML=a.title),a.text&&(c.innerHTML=a.text,m.innerHTML=a.text);var p=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(c,"click",L.DomEvent.stopPropagation).on(c,"mousedown",L.DomEvent.stopPropagation).on(c,"dblclick",L.DomEvent.stopPropagation).on(c,"touchstart",L.DomEvent.stopPropagation).on(c,"click",L.DomEvent.preventDefault).on(c,p,a.callback,a.context),c},_disposeButton:function(a,c){var m=this._detectIOS()?"touchstart":"click";L.DomEvent.off(a,"click",L.DomEvent.stopPropagation).off(a,"mousedown",L.DomEvent.stopPropagation).off(a,"dblclick",L.DomEvent.stopPropagation).off(a,"touchstart",L.DomEvent.stopPropagation).off(a,"click",L.DomEvent.preventDefault).off(a,m,c)},_handlerActivated:function(a){this.disable(),this._activeMode=this._modes[a.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(a){var c,m,p,w,S=this._actionsContainer,E=this.getActions(a),I=E.length;for(m=0,p=this._actionButtons.length;m<p;m++)this._disposeButton(this._actionButtons[m].button,this._actionButtons[m].callback);for(this._actionButtons=[];S.firstChild;)S.removeChild(S.firstChild);for(var M=0;M<I;M++)"enabled"in E[M]&&!E[M].enabled||(c=L.DomUtil.create("li","",S),w=this._createButton({title:E[M].title,text:E[M].text,container:c,callback:E[M].callback,context:E[M].context}),this._actionButtons.push({button:w,callback:E[M].callback}))},_showActionsToolbar:function(){var a=this._activeMode.buttonIndex,c=this._lastButtonIndex,m=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=m+"px",a===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),a===c&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(a){this._map=a,this._popupPane=a._panes.popupPane,this._visible=!1,this._container=a.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(a){return this._container?(a.subtext=a.subtext||"",a.subtext.length!==0||this._singleLineLabel?a.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(a.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+a.subtext+"</span><br />":"")+"<span>"+a.text+"</span>",a.text||a.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(a){var c=this._map.latLngToLayerPoint(a),m=this._container;return this._container&&(this._visible&&(m.style.visibility="inherit"),L.DomUtil.setPosition(m,c)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(a){for(var c in this.options)this.options.hasOwnProperty(c)&&a[c]&&(a[c]=L.extend({},this.options[c],a[c]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,a)},getModeHandlers:function(a){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(a,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(a,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(a,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(a,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(a,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(a,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(a){return[{enabled:a.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:a.completeShape,context:a},{enabled:a.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:a.deleteLastVertex,context:a},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(a){L.setOptions(this,a);for(var c in this._modes)this._modes.hasOwnProperty(c)&&a.hasOwnProperty(c)&&this._modes[c].handler.setOptions(a[c])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(a){a.edit&&(a.edit.selectedPathOptions===void 0&&(a.edit.selectedPathOptions=this.options.edit.selectedPathOptions),a.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,a.edit.selectedPathOptions)),a.remove&&(a.remove=L.extend({},this.options.remove,a.remove)),a.poly&&(a.poly=L.extend({},this.options.poly,a.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,a),this._selectedFeatureCount=0},getModeHandlers:function(a){var c=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(a,{featureGroup:c,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(a,{featureGroup:c}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(a){var c=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return a.removeAllLayers&&c.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),c},addToolbar:function(a){var c=L.Toolbar.prototype.addToolbar.call(this,a);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),c},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var a,c=this.options.featureGroup,m=c.getLayers().length!==0;this.options.edit&&(a=this._modes[L.EditToolbar.Edit.TYPE].button,m?L.DomUtil.removeClass(a,"leaflet-disabled"):L.DomUtil.addClass(a,"leaflet-disabled"),a.setAttribute("title",m?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(a=this._modes[L.EditToolbar.Delete.TYPE].button,m?L.DomUtil.removeClass(a,"leaflet-disabled"):L.DomUtil.addClass(a,"leaflet-disabled"),a.setAttribute("title",m?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(a,c){if(L.Handler.prototype.initialize.call(this,a),L.setOptions(this,c),this._featureGroup=c.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var m=L.version.split(".");parseInt(m[0],10)===1&&parseInt(m[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var a=this._map;a&&(a.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),a._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(a){this._revertLayer(a)},this)},save:function(){var a=new L.LayerGroup;this._featureGroup.eachLayer(function(c){c.edited&&(a.addLayer(c),c.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:a})},_backupLayer:function(a){var c=L.Util.stamp(a);this._uneditedLayerProps[c]||(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?this._uneditedLayerProps[c]={latlngs:L.LatLngUtil.cloneLatLngs(a.getLatLngs())}:a instanceof L.Circle?this._uneditedLayerProps[c]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng()),radius:a.getRadius()}:(a instanceof L.Marker||a instanceof L.CircleMarker)&&(this._uneditedLayerProps[c]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(a){var c=L.Util.stamp(a);a.edited=!1,this._uneditedLayerProps.hasOwnProperty(c)&&(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?a.setLatLngs(this._uneditedLayerProps[c].latlngs):a instanceof L.Circle?(a.setLatLng(this._uneditedLayerProps[c].latlng),a.setRadius(this._uneditedLayerProps[c].radius)):(a instanceof L.Marker||a instanceof L.CircleMarker)&&a.setLatLng(this._uneditedLayerProps[c].latlng),a.fire("revert-edited",{layer:a}))},_enableLayerEdit:function(a){var c,m,p=a.layer||a.target||a;this._backupLayer(p),this.options.poly&&(m=L.Util.extend({},this.options.poly),p.options.poly=m),this.options.selectedPathOptions&&(c=L.Util.extend({},this.options.selectedPathOptions),c.maintainColor&&(c.color=p.options.color,c.fillColor=p.options.fillColor),p.options.original=L.extend({},p.options),p.options.editing=c),p instanceof L.Marker?(p.editing&&p.editing.enable(),p.dragging.enable(),p.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):p.editing.enable()},_disableLayerEdit:function(a){var c=a.layer||a.target||a;c.edited=!1,c.editing&&c.editing.disable(),delete c.options.editing,delete c.options.original,this._selectedPathOptions&&(c instanceof L.Marker?this._toggleMarkerHighlight(c):(c.setStyle(c.options.previousOptions),delete c.options.previousOptions)),c instanceof L.Marker?(c.dragging.disable(),c.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):c.editing.disable()},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_onMarkerDragEnd:function(a){var c=a.target;c.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:c})},_onTouchMove:function(a){var c=a.originalEvent.changedTouches[0],m=this._map.mouseEventToLayerPoint(c),p=this._map.layerPointToLatLng(m);a.target.setLatLng(p)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(a,c){if(L.Handler.prototype.initialize.call(this,a),L.Util.setOptions(this,c),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var m=L.version.split(".");parseInt(m[0],10)===1&&parseInt(m[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var a=this._map;a&&(a.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(a){this._deletableLayers.addLayer(a),a.fire("revert-deleted",{layer:a})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(a){this._removeLayer({layer:a})},this),this.save()},_enableLayerDelete:function(a){(a.layer||a.target||a).on("click",this._removeLayer,this)},_disableLayerDelete:function(a){var c=a.layer||a.target||a;c.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(c)},_removeLayer:function(a){var c=a.layer||a.target||a;this._deletableLayers.removeLayer(c),this._deletedLayers.addLayer(c),c.fire("deleted")},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var en=63710088e-1,gh={centimeters:en*100,centimetres:en*100,degrees:360/(2*Math.PI),feet:en*3.28084,inches:en*39.37,kilometers:en/1e3,kilometres:en/1e3,meters:en,metres:en,miles:en/1609.344,millimeters:en*1e3,millimetres:en*1e3,nauticalmiles:en/1852,radians:1,yards:en*1.0936};function _h(s,u,f={}){const g={type:"Feature"};return(f.id===0||f.id)&&(g.id=f.id),f.bbox&&(g.bbox=f.bbox),g.properties=u||{},g.geometry=s,g}function gd(s,u,f={}){if(!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Gu(s[0])||!Gu(s[1]))throw new Error("coordinates must contain numbers");return _h({type:"Point",coordinates:s},u,f)}function Ia(s,u={}){const f={type:"FeatureCollection"};return u.id&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.features=s,f}function _d(s,u="kilometers"){const f=gh[u];if(!f)throw new Error(u+" units is invalid");return s*f}function md(s,u="kilometers"){const f=gh[u];if(!f)throw new Error(u+" units is invalid");return s/f}function Gu(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function mh(s,u,f){if(s!==null)for(var g,a,c,m,p,w,S,E=0,I=0,M,D=s.type,R=D==="FeatureCollection",Z=D==="Feature",ct=R?s.features.length:1,ht=0;ht<ct;ht++){S=R?s.features[ht].geometry:Z?s.geometry:s,M=S?S.type==="GeometryCollection":!1,p=M?S.geometries.length:1;for(var st=0;st<p;st++){var H=0,V=0;if(m=M?S.geometries[st]:S,m!==null){w=m.coordinates;var tt=m.type;switch(E=0,tt){case null:break;case"Point":if(u(w,I,ht,H,V)===!1)return!1;I++,H++;break;case"LineString":case"MultiPoint":for(g=0;g<w.length;g++){if(u(w[g],I,ht,H,V)===!1)return!1;I++,tt==="MultiPoint"&&H++}tt==="LineString"&&H++;break;case"Polygon":case"MultiLineString":for(g=0;g<w.length;g++){for(a=0;a<w[g].length-E;a++){if(u(w[g][a],I,ht,H,V)===!1)return!1;I++}tt==="MultiLineString"&&H++,tt==="Polygon"&&V++}tt==="Polygon"&&H++;break;case"MultiPolygon":for(g=0;g<w.length;g++){for(V=0,a=0;a<w[g].length;a++){for(c=0;c<w[g][a].length-E;c++){if(u(w[g][a][c],I,ht,H,V)===!1)return!1;I++}V++}H++}break;case"GeometryCollection":for(g=0;g<m.geometries.length;g++)if(mh(m.geometries[g],u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Uu(s,u){if(s.type==="Feature")u(s,0);else if(s.type==="FeatureCollection")for(var f=0;f<s.features.length&&u(s.features[f],f)!==!1;f++);}function ph(s,u){var f,g,a,c,m,p,w,S,E,I,M=0,D=s.type==="FeatureCollection",R=s.type==="Feature",Z=D?s.features.length:1;for(f=0;f<Z;f++){for(p=D?s.features[f].geometry:R?s.geometry:s,S=D?s.features[f].properties:R?s.properties:{},E=D?s.features[f].bbox:R?s.bbox:void 0,I=D?s.features[f].id:R?s.id:void 0,w=p?p.type==="GeometryCollection":!1,m=w?p.geometries.length:1,a=0;a<m;a++){if(c=w?p.geometries[a]:p,c===null){if(u(null,M,S,E,I)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(c,M,S,E,I)===!1)return!1;break}case"GeometryCollection":{for(g=0;g<c.geometries.length;g++)if(u(c.geometries[g],M,S,E,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}function pd(s,u={}){if(s.bbox!=null&&u.recompute!==!0)return s.bbox;const f=[1/0,1/0,-1/0,-1/0];return mh(s,g=>{f[0]>g[0]&&(f[0]=g[0]),f[1]>g[1]&&(f[1]=g[1]),f[2]<g[0]&&(f[2]=g[0]),f[3]<g[1]&&(f[3]=g[1])}),f}function vd(s,u={}){const f=pd(s),g=(f[0]+f[2])/2,a=(f[1]+f[3])/2;return gd([g,a],u.properties,u)}var lo={exports:{}},yd=lo.exports,Zu;function xd(){return Zu||(Zu=1,function(s,u){(function(f,g){s.exports=g()})(yd,function(){function f(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,i=Array(t);e<t;e++)i[e]=r[e];return i}function g(r,t,e){return t=E(t),function(i,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(i)}(r,M()?Reflect.construct(t,e||[],E(r).constructor):t.apply(r,e))}function a(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function c(r,t,e){if(M())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var l=new(r.bind.apply(r,i));return e&&D(l,e.prototype),l}function m(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,ct(i.key),i)}}function p(r,t,e){return t&&m(r.prototype,t),e&&m(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function w(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=ht(r))||t){e&&(r=e);var i=0,l=function(){};return{s:l,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(b){throw b},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,v=!0,x=!1;return{s:function(){e=e.call(r)},n:function(){var b=e.next();return v=b.done,b},e:function(b){x=!0,d=b},f:function(){try{v||e.return==null||e.return()}finally{if(x)throw d}}}}function S(){return S=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,t,e){var i=function(d,v){for(;!{}.hasOwnProperty.call(d,v)&&(d=E(d))!==null;);return d}(r,t);if(i){var l=Object.getOwnPropertyDescriptor(i,t);return l.get?l.get.call(arguments.length<3?r:e):l.value}},S.apply(null,arguments)}function E(r){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(r)}function I(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&D(r,t)}function M(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M=function(){return!!r})()}function D(r,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},D(r,t)}function R(r,t,e,i){var l=S(E(1&i?r.prototype:r),t,e);return 2&i&&typeof l=="function"?function(d){return l.apply(e,d)}:l}function Z(r){return function(t){if(Array.isArray(t))return f(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||ht(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(r){var t=function(e,i){if(typeof e!="object"||!e)return e;var l=e[Symbol.toPrimitive];if(l!==void 0){var d=l.call(e,i);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r,"string");return typeof t=="symbol"?t:t+""}function ht(r,t){if(r){if(typeof r=="string")return f(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(r,t):void 0}}function st(r){var t=typeof Map=="function"?new Map:void 0;return st=function(e){if(e===null||!function(l){try{return Function.toString.call(l).indexOf("[native code]")!==-1}catch{return typeof l=="function"}}(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return c(e,arguments,E(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),D(i,e)},st(r)}var H=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=r.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=r.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==r.JOIN_ROUND&&(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=r.CAP_ROUND,this._joinStyle=r.JOIN_ROUND,this._mitreLimit=r.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=r.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],i=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(i)}else if(arguments.length===4){var l=arguments[0],d=arguments[1],v=arguments[2],x=arguments[3];this.setQuadrantSegments(l),this.setEndCapStyle(d),this.setJoinStyle(v),this.setMitreLimit(x)}}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();H.CAP_ROUND=1,H.CAP_FLAT=2,H.CAP_SQUARE=3,H.JOIN_ROUND=1,H.JOIN_MITRE=2,H.JOIN_BEVEL=3,H.DEFAULT_QUADRANT_SEGMENTS=8,H.DEFAULT_MITRE_LIMIT=5,H.DEFAULT_SIMPLIFY_FACTOR=.01;var V=function(r){function t(e){var i;return a(this,t),(i=g(this,t,[e])).name=Object.keys({Exception:t})[0],i}return I(t,r),p(t,[{key:"toString",value:function(){return this.message}}])}(st(Error)),tt=function(r){function t(e){var i;return a(this,t),(i=g(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],i}return I(t,r),p(t)}(V),W=function(){return p(function r(){a(this,r)},[{key:"filter",value:function(r){}}])}();function et(){}function _t(){}function ft(){}var Bt,St,Mt,ne,it,Rt,yt,bt,nt=function(){return p(function r(){a(this,r)},null,[{key:"equalsWithTolerance",value:function(r,t,e){return Math.abs(r-t)<=e}}])}(),ie=function(){return p(function r(t,e){a(this,r),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(r){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(r.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(r.low&t)===t?"1":"0";return e}}])}();function q(){}function Ct(){}q.NaN=NaN,q.isNaN=function(r){return Number.isNaN(r)},q.isInfinite=function(r){return!Number.isFinite(r)},q.MAX_VALUE=Number.MAX_VALUE,q.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,q.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(Rt=2146435072,yt=new Float64Array(1),bt=new Int32Array(yt.buffer),q.doubleToLongBits=function(r){yt[0]=r;var t=0|bt[0],e=0|bt[1];return(e&Rt)===Rt&&1048575&e&&t!==0&&(t=0,e=2146959360),new ie(e,t)},q.longBitsToDouble=function(r){return bt[0]=r.low,bt[1]=r.high,yt[0]}):(Bt=1023,St=Math.log2,Mt=Math.floor,ne=Math.pow,it=function(){for(var r=53;r>0;r--){var t=ne(2,r)-1;if(Mt(St(t))+1===r)return t}return 0}(),q.doubleToLongBits=function(r){var t,e,i,l,d,v,x,b,P;if(r<0||1/r===Number.NEGATIVE_INFINITY?(v=1<<31,r=-r):v=0,r===0)return new ie(b=v,P=0);if(r===1/0)return new ie(b=2146435072|v,P=0);if(r!=r)return new ie(b=2146959360,P=0);if(l=0,P=0,(t=Mt(r))>1)if(t<=it)(l=Mt(St(t)))<=20?(P=0,b=t<<20-l&1048575):(P=t%(e=ne(2,i=l-20))<<32-i,b=t/e&1048575);else for(i=t,P=0;(i=Mt(e=i/2))!==0;)l++,P>>>=1,P|=(1&b)<<31,b>>>=1,e!==i&&(b|=524288);if(x=l+Bt,d=t===0,t=r-t,l<52&&t!==0)for(i=0;;){if((e=2*t)>=1?(t=e-1,d?(x--,d=!1):(i<<=1,i|=1,l++)):(t=e,d?--x==0&&(l++,d=!1):(i<<=1,l++)),l===20)b|=i,i=0;else if(l===52){P|=i;break}if(e===1){l<20?b|=i<<20-l:l<52&&(P|=i<<52-l);break}}return b|=x<<20,new ie(b|=v,P)},q.longBitsToDouble=function(r){var t,e,i,l,d=r.high,v=r.low,x=d&1<<31?-1:1;for(i=((2146435072&d)>>20)-Bt,l=0,e=1<<19,t=1;t<=20;t++)d&e&&(l+=ne(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)v&e&&(l+=ne(2,-t)),e>>>=1;if(i===-1023){if(l===0)return 0*x;i=-1022}else{if(i===1024)return l===0?x/0:NaN;l+=1}return x*l*ne(2,i)});var Dt=function(r){function t(e){var i;return a(this,t),(i=g(this,t,[e])).name=Object.keys({RuntimeException:t})[0],i}return I(t,r),p(t)}(V),$t=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,null,[{key:"constructor_",value:function(){if(arguments.length===0)Dt.constructor_.call(this);else if(arguments.length===1){var e=arguments[0];Dt.constructor_.call(this,e)}}}])}(Dt),vt=function(){function r(){a(this,r)}return p(r,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)r.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new $t("Should never reach here"+(t!==null?": "+t:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var t=arguments[0];r.isTrue(t,null)}else if(arguments.length===2){var e=arguments[1];if(!arguments[0])throw e===null?new $t:new $t(e)}}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];r.equals(t,e,null)}else if(arguments.length===3){var i=arguments[0],l=arguments[1],d=arguments[2];if(!l.equals(i))throw new $t("Expected "+i+" but encountered "+l+(d!==null?": "+d:""))}}}])}(),qt=new ArrayBuffer(8),Ut=new Float64Array(qt),Ne=new Int32Array(qt),A=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getM",value:function(){return q.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case r.X:this.x=e;break;case r.Y:this.y=e;break;case r.Z:this.setZ(e);break;default:throw new tt("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],i=arguments[1];return!!nt.equalsWithTolerance(this.x,e.x,i)&&!!nt.equalsWithTolerance(this.y,e.y,i)}}},{key:"setM",value:function(t){throw new tt("Invalid ordinate index: "+r.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case r.X:return this.x;case r.Y:return this.y;case r.Z:return this.getZ()}throw new tt("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||q.isNaN(this.getZ())&&q.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof r&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return nt.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return vt.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,i=this.y-t.y,l=this.getZ()-t.getZ();return Math.sqrt(e*e+i*i+l*l)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*t+r.hashCode(this.x))+r.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[et,_t,ft]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)r.constructor_.call(this,0,0);else if(arguments.length===1){var t=arguments[0];r.constructor_.call(this,t.x,t.y,t.getZ())}else if(arguments.length===2){var e=arguments[0],i=arguments[1];r.constructor_.call(this,e,i,r.NULL_ORDINATE)}else if(arguments.length===3){var l=arguments[0],d=arguments[1],v=arguments[2];this.x=l,this.y=d,this.z=v}}},{key:"hashCode",value:function(t){return Ut[0]=t,Ne[0]^Ne[1]}}])}(),Ii=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"compare",value:function(t,e){var i=r.compare(t.x,e.x);if(i!==0)return i;var l=r.compare(t.y,e.y);return l!==0?l:this._dimensionsToTest<=2?0:r.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[Ct]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)r.constructor_.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new tt("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:q.isNaN(t)?q.isNaN(e)?0:-1:q.isNaN(e)?1:0}}])}();A.DimensionalComparator=Ii,A.NULL_ORDINATE=q.NaN,A.X=0,A.Y=1,A.Z=2,A.M=3;var Xt=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new r;var e=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny;return new r(e,this._maxx<t._maxx?this._maxx:t._maxx,i,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof r){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&l>=this._miny&&l<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof A){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){if(arguments[0]instanceof A&&arguments[1]instanceof A){var i=arguments[0],l=arguments[1];return!this.isNull()&&!((i.x<l.x?i.x:l.x)>this._maxx)&&!((i.x>l.x?i.x:l.x)<this._minx)&&!((i.y<l.y?i.y:l.y)>this._maxy)&&!((i.y>l.y?i.y:l.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var d=arguments[0],v=arguments[1];return!this.isNull()&&!(d>this._maxx||d<this._minx||v>this._maxy||v<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof r){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=l,this._maxy=l):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),l<this._miny&&(this._miny=l),l>this._maxy&&(this._maxy=l))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof A){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];return this.covers(i,l)}}},{key:"centre",value:function(){return this.isNull()?null:new A((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof r){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.init(i.x,l.x,i.y,l.y)}else if(arguments.length===4){var d=arguments[0],v=arguments[1],x=arguments[2],b=arguments[3];d<v?(this._minx=d,this._maxx=v):(this._minx=v,this._maxx=d),x<b?(this._miny=x,this._maxy=b):(this._miny=b,this._maxy=x)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),e===0?i:i===0?e:Math.sqrt(e*e+i*i)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+A.hashCode(this._minx))+A.hashCode(this._maxx))+A.hashCode(this._miny))+A.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[et,ft]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof r){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.init(i.x,l.x,i.y,l.y)}else if(arguments.length===4){var d=arguments[0],v=arguments[1],x=arguments[2],b=arguments[3];this.init(d,v,x,b)}}},{key:"intersects",value:function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var l=arguments[0],d=arguments[1],v=arguments[2],x=arguments[3],b=Math.min(v.x,x.x),P=Math.max(v.x,x.x),O=Math.min(l.x,d.x),F=Math.max(l.x,d.x);return!(O>P)&&!(F<b)&&(b=Math.min(v.y,x.y),P=Math.max(v.y,x.y),O=Math.min(l.y,d.y),F=Math.max(l.y,d.y),!(O>P)&&!(F<b))}}}])}(),xt=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(r.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return t!==null&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(arguments.length===1){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(arguments.length===2){var i=arguments[0],l=arguments[1];return t=i,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(i,l)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION)throw new tt("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,i){return i===0?t.equals(e):t.distance(e)<=i}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return this.envelope!=null&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=this._envelope==null?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Xt(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var i=t.iterator(),l=e.iterator();i.hasNext()&&l.hasNext();){var d=i.next(),v=l.next(),x=d.compareTo(v);if(x!==0)return x}return i.hasNext()?1:l.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===r.TYPECODE_MULTIPOINT||this.getTypeCode()===r.TYPECODE_MULTILINESTRING||this.getTypeCode()===r.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[_t,et,ft]}},{key:"getClass",value:function(){return r}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1}}])}();xt.constructor_=function(r){r&&(this._envelope=null,this._userData=null,this._factory=r,this._SRID=r.getSRID())},xt.TYPECODE_POINT=0,xt.TYPECODE_MULTIPOINT=1,xt.TYPECODE_LINESTRING=2,xt.TYPECODE_LINEARRING=3,xt.TYPECODE_MULTILINESTRING=4,xt.TYPECODE_POLYGON=5,xt.TYPECODE_MULTIPOLYGON=6,xt.TYPECODE_GEOMETRYCOLLECTION=7,xt.TYPENAME_POINT="Point",xt.TYPENAME_MULTIPOINT="MultiPoint",xt.TYPENAME_LINESTRING="LineString",xt.TYPENAME_LINEARRING="LinearRing",xt.TYPENAME_MULTILINESTRING="MultiLineString",xt.TYPENAME_POLYGON="Polygon",xt.TYPENAME_MULTIPOLYGON="MultiPolygon",xt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",xt.geometryChangedFilter={get interfaces_(){return[W]},filter:function(r){r.geometryChangedAction()}};var k=function(){function r(){a(this,r)}return p(r,null,[{key:"toLocationSymbol",value:function(t){switch(t){case r.EXTERIOR:return"e";case r.BOUNDARY:return"b";case r.INTERIOR:return"i";case r.NONE:return"-"}throw new tt("Unknown location value: "+t)}}])}();k.INTERIOR=0,k.BOUNDARY=1,k.EXTERIOR=2,k.NONE=-1;var N=function(){return p(function r(){a(this,r)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),U=function(r){function t(e){var i;return a(this,t),(i=g(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],i}return I(t,r),p(t)}(V),j=function(r){function t(e){var i;return a(this,t),(i=g(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],i}return I(t,r),p(t)}(V),X=function(r){function t(){return a(this,t),g(this,t,arguments)}return I(t,r),p(t,[{key:"contains",value:function(){}}])}(N),$=function(r){function t(e){var i;return a(this,t),(i=g(this,t)).map=new Map,e instanceof N&&i.addAll(e),i}return I(t,r),p(t,[{key:"contains",value:function(e){var i=e.hashCode?e.hashCode():e;return!!this.map.has(i)}},{key:"add",value:function(e){var i=e.hashCode?e.hashCode():e;return!this.map.has(i)&&!!this.map.set(i,e)}},{key:"addAll",value:function(e){var i,l=w(e);try{for(l.s();!(i=l.n()).done;){var d=i.value;this.add(d)}}catch(v){l.e(v)}finally{l.f()}return!0}},{key:"remove",value:function(){throw new j}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new lt(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(X),lt=function(){return p(function r(t){a(this,r),this.iterator=t.values();var e=this.iterator.next(),i=e.done,l=e.value;this.done=i,this.value=l},[{key:"next",value:function(){if(this.done)throw new U;var r=this.value,t=this.iterator.next(),e=t.done,i=t.value;return this.done=e,this.value=i,r}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new j}}])}(),z=function(){function r(){a(this,r)}return p(r,null,[{key:"opposite",value:function(t){return t===r.LEFT?r.RIGHT:t===r.RIGHT?r.LEFT:t}}])}();z.ON=0,z.LEFT=1,z.RIGHT=2;var rt=function(r){function t(e){var i;return a(this,t),(i=g(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],i}return I(t,r),p(t)}(V),J=function(r){function t(e){var i;return a(this,t),(i=g(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],i}return I(t,r),p(t)}(V),Lt=function(r){function t(){return a(this,t),g(this,t,arguments)}return I(t,r),p(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(N),dt=function(r){function t(){var e;return a(this,t),(e=g(this,t)).array=[],e}return I(t,r),p(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new J;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(this.array.length===0)throw new rt;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new rt;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(Lt);function Q(r,t){return r.interfaces_&&r.interfaces_.indexOf(t)>-1}var Tt=function(){return p(function r(t){a(this,r),this.str=t},[{key:"append",value:function(r){this.str+=r}},{key:"setCharAt",value:function(r,t){this.str=this.str.substr(0,r)+t+this.str.substr(r+1)}},{key:"toString",value:function(){return this.str}}])}(),Gt=function(){function r(t){a(this,r),this.value=t}return p(r,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new r(t)}}])}(),Kt=function(){return p(function r(){a(this,r)},null,[{key:"isWhitespace",value:function(r){return r<=32&&r>=0||r===127}},{key:"toUpperCase",value:function(r){return r.toUpperCase()}}])}(),at=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var i=this.abs(),l=r.magnitude(i._hi),d=r.TEN.pow(l);(i=i.divide(d)).gt(r.TEN)?(i=i.divide(r.TEN),l+=1):i.lt(r.ONE)&&(i=i.multiply(r.TEN),l-=1);for(var v=l+1,x=new Tt,b=r.MAX_PRINT_DIGITS-1,P=0;P<=b;P++){t&&P===v&&x.append(".");var O=Math.trunc(i._hi);if(O<0)break;var F=!1,Y=0;O>9?(F=!0,Y="9"):Y="0"+O,x.append(Y),i=i.subtract(r.valueOf(O)).multiply(r.TEN),F&&i.selfAdd(r.TEN);var ut=!0,pt=r.magnitude(i._hi);if(pt<0&&Math.abs(pt)>=b-P&&(ut=!1),!ut)break}return e[0]=l,x.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof r){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var i,l,d,v,x=arguments[0],b=arguments[1],P=null,O=null,F=null,Y=null;return d=this._hi/x,Y=(P=(F=r.SPLIT*d)-(P=F-d))*(O=(Y=r.SPLIT*x)-(O=Y-x))-(v=d*x)+P*(l=x-O)+(i=d-P)*O+i*l,Y=d+(F=(this._hi-v-Y+this._lo-d*b)/x),this._hi=Y,this._lo=d-Y+F,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof r){var t,e,i,l,d=arguments[0],v=null,x=null,b=null,P=null;return t=(i=this._hi/d._hi)-(v=(b=r.SPLIT*i)-(v=b-i)),P=v*(x=(P=r.SPLIT*d._hi)-(x=P-d._hi))-(l=i*d._hi)+v*(e=d._hi-x)+t*x+t*e,new r(P=i+(b=(this._hi-l-P+this._lo-i*d._lo)/d._hi),i-P+b)}if(typeof arguments[0]=="number"){var O=arguments[0];return q.isNaN(O)?r.createNaN():r.copy(this).selfDivide(O,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(t===0)return r.valueOf(1);var e=new r(this),i=r.valueOf(1),l=Math.abs(t);if(l>1)for(;l>0;)l%2==1&&i.selfMultiply(e),(l/=2)>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return r.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new r(t,e)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return r.valueOf(0);if(this.isNegative())return r.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,i=r.valueOf(e),l=this.subtract(i.sqr())._hi*(.5*t);return i.add(l)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e,i,l,d,v,x=arguments[0],b=null;return b=(l=this._hi+x)-(d=l-this._hi),i=(v=(b=x-d+(this._hi-b))+this._lo)+(l-(e=l+v)),this._hi=e+i,this._lo=i+(e-this._hi),this}}else if(arguments.length===2){var P,O,F,Y,ut=arguments[0],pt=arguments[1],Et=null,Wt=null,Zt=null;F=this._hi+ut,O=this._lo+pt,Wt=F-(Zt=F-this._hi),Et=O-(Y=O-this._lo);var oe=(P=F+(Zt=(Wt=ut-Zt+(this._hi-Wt))+O))+(Zt=(Et=pt-Y+(this._lo-Et))+(Zt+(F-P))),ce=Zt+(P-oe);return this._hi=oe,this._lo=ce,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var i,l,d=arguments[0],v=arguments[1],x=null,b=null,P=null,O=null;x=(P=r.SPLIT*this._hi)-this._hi,O=r.SPLIT*d,x=P-x,i=this._hi-x,b=O-d;var F=(P=this._hi*d)+(O=x*(b=O-b)-P+x*(l=d-b)+i*b+i*l+(this._hi*v+this._lo*d)),Y=O+(x=P-F);return this._hi=F,this._lo=Y,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return r.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new r(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new r(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return t.isNaN()?r.createNaN():r.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return q.isNaN(e)?r.createNaN():r.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return q.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=r.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),l=e[0]+1,d=i;if(i.charAt(0)===".")d="0"+i;else if(l<0)d="0."+r.stringOfChar("0",-l)+i;else if(i.indexOf(".")===-1){var v=l-i.length;d=i+r.stringOfChar("0",v)+".0"}return this.isNegative()?"-"+d:d}},{key:"reciprocal",value:function(){var t,e,i,l,d=null,v=null,x=null,b=null;t=(i=1/this._hi)-(d=(x=r.SPLIT*i)-(d=x-i)),v=(b=r.SPLIT*this._hi)-this._hi;var P=i+(x=(1-(l=i*this._hi)-(b=d*(v=b-v)-l+d*(e=this._hi-v)+t*v+t*e)-i*this._lo)/this._hi);return new r(P,i-P+x)}},{key:"toSciNotation",value:function(){if(this.isZero())return r.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),l=r.SCI_NOT_EXPONENT_CHAR+e[0];if(i.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+i);var d="";i.length>1&&(d=i.substring(1));var v=i.charAt(0)+"."+d;return this.isNegative()?"-"+v+l:v+l}},{key:"abs",value:function(){return this.isNaN()?r.NaN:this.isNegative()?this.negate():new r(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return r.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return r.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof r){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this._hi=i,this._lo=l}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?r.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[ft,et,_t]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof r){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var i=arguments[0];r.constructor_.call(this,r.parse(i))}}else if(arguments.length===2){var l=arguments[0],d=arguments[1];this.init(l,d)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],i=arguments[2],l=arguments[3];return r.determinant(r.valueOf(t),r.valueOf(e),r.valueOf(i),r.valueOf(l))}if(arguments[3]instanceof r&&arguments[2]instanceof r&&arguments[0]instanceof r&&arguments[1]instanceof r){var d=arguments[1],v=arguments[2],x=arguments[3];return arguments[0].multiply(x).selfSubtract(d.multiply(v))}}},{key:"sqr",value:function(t){return r.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var t=arguments[0];return r.parse(t)}if(typeof arguments[0]=="number")return new r(arguments[0])}},{key:"sqrt",value:function(t){return r.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,i=t.length;Kt.isWhitespace(t.charAt(e));)e++;var l=!1;if(e<i){var d=t.charAt(e);d!=="-"&&d!=="+"||(e++,d==="-"&&(l=!0))}for(var v=new r,x=0,b=0,P=0,O=!1;!(e>=i);){var F=t.charAt(e);if(e++,Kt.isDigit(F)){var Y=F-"0";v.selfMultiply(r.TEN),v.selfAdd(Y),x++}else{if(F!=="."){if(F==="e"||F==="E"){var ut=t.substring(e);try{P=Gt.parseInt(ut)}catch(oe){throw oe instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+ut+" in string "+t):oe}break}throw new NumberFormatException("Unexpected character '"+F+"' at position "+e+" in string "+t)}b=x,O=!0}}var pt=v;O||(b=x);var Et=x-b-P;if(Et===0)pt=v;else if(Et>0){var Wt=r.TEN.pow(Et);pt=v.divide(Wt)}else if(Et<0){var Zt=r.TEN.pow(-Et);pt=v.multiply(Zt)}return l?pt.negate():pt}},{key:"createNaN",value:function(){return new r(q.NaN,q.NaN)}},{key:"copy",value:function(t){return new r(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),i=Math.log(e)/Math.log(10),l=Math.trunc(Math.floor(i));return 10*Math.pow(10,l)<=e&&(l+=1),l}},{key:"stringOfChar",value:function(t,e){for(var i=new Tt,l=0;l<e;l++)i.append(t);return i.toString()}}])}();at.PI=new at(3.141592653589793,12246467991473532e-32),at.TWO_PI=new at(6.283185307179586,24492935982947064e-32),at.PI_2=new at(1.5707963267948966,6123233995736766e-32),at.E=new at(2.718281828459045,14456468917292502e-32),at.NaN=new at(q.NaN,q.NaN),at.EPS=123259516440783e-46,at.SPLIT=134217729,at.MAX_PRINT_DIGITS=32,at.TEN=at.valueOf(10),at.ONE=at.valueOf(1),at.SCI_NOT_EXPONENT_CHAR="E",at.SCI_NOT_ZERO="0.0E0";var ke=function(){function r(){a(this,r)}return p(r,null,[{key:"orientationIndex",value:function(t,e,i){var l=r.orientationIndexFilter(t,e,i);if(l<=1)return l;var d=at.valueOf(e.x).selfAdd(-t.x),v=at.valueOf(e.y).selfAdd(-t.y),x=at.valueOf(i.x).selfAdd(-e.x),b=at.valueOf(i.y).selfAdd(-e.y);return d.selfMultiply(b).selfSubtract(v.selfMultiply(x)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof at&&arguments[2]instanceof at&&arguments[0]instanceof at&&arguments[1]instanceof at){var t=arguments[1],e=arguments[2],i=arguments[3];return arguments[0].multiply(i).selfSubtract(t.multiply(e)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var l=arguments[0],d=arguments[1],v=arguments[2],x=arguments[3],b=at.valueOf(l),P=at.valueOf(d),O=at.valueOf(v),F=at.valueOf(x);return b.multiply(F).selfSubtract(P.multiply(O)).signum()}}},{key:"intersection",value:function(t,e,i,l){var d=new at(t.y).selfSubtract(e.y),v=new at(e.x).selfSubtract(t.x),x=new at(t.x).selfMultiply(e.y).selfSubtract(new at(e.x).selfMultiply(t.y)),b=new at(i.y).selfSubtract(l.y),P=new at(l.x).selfSubtract(i.x),O=new at(i.x).selfMultiply(l.y).selfSubtract(new at(l.x).selfMultiply(i.y)),F=v.multiply(O).selfSubtract(P.multiply(x)),Y=b.multiply(x).selfSubtract(d.multiply(O)),ut=d.multiply(P).selfSubtract(b.multiply(v)),pt=F.selfDivide(ut).doubleValue(),Et=Y.selfDivide(ut).doubleValue();return q.isNaN(pt)||q.isInfinite(pt)||q.isNaN(Et)||q.isInfinite(Et)?null:new A(pt,Et)}},{key:"orientationIndexFilter",value:function(t,e,i){var l=null,d=(t.x-i.x)*(e.y-i.y),v=(t.y-i.y)*(e.x-i.x),x=d-v;if(d>0){if(v<=0)return r.signum(x);l=d+v}else{if(!(d<0)||v>=0)return r.signum(x);l=-d-v}var b=r.DP_SAFE_EPSILON*l;return x>=b||-x>=b?r.signum(x):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();ke.DP_SAFE_EPSILON=1e-15;var It=function(){return p(function r(){a(this,r)},[{key:"getM",value:function(r){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(r,t)}return q.NaN}},{key:"setOrdinate",value:function(r,t,e){}},{key:"getZ",value:function(r){return this.hasZ()?this.getOrdinate(r,2):q.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(r,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(r){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(r){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(r){}},{key:"copy",value:function(){}},{key:"getY",value:function(r){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[_t]}}])}();It.X=0,It.Y=1,It.Z=2,It.M=3;var kt=function(){function r(){a(this,r)}return p(r,null,[{key:"index",value:function(t,e,i){return ke.orientationIndex(t,e,i)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new tt("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],l=0,d=1;d<=e;d++){var v=t[d];v.y>i.y&&(i=v,l=d)}var x=l;do(x-=1)<0&&(x=e);while(t[x].equals2D(i)&&x!==l);var b=l;do b=(b+1)%e;while(t[b].equals2D(i)&&b!==l);var P=t[x],O=t[b];if(P.equals2D(i)||O.equals2D(i)||P.equals2D(O))return!1;var F=r.index(P,i,O);return F===0?P.x>O.x:F>0}if(Q(arguments[0],It)){var Y=arguments[0],ut=Y.size()-1;if(ut<3)throw new tt("Ring has fewer than 4 points, so orientation cannot be determined");for(var pt=Y.getCoordinate(0),Et=0,Wt=1;Wt<=ut;Wt++){var Zt=Y.getCoordinate(Wt);Zt.y>pt.y&&(pt=Zt,Et=Wt)}var oe=null,ce=Et;do(ce-=1)<0&&(ce=ut),oe=Y.getCoordinate(ce);while(oe.equals2D(pt)&&ce!==Et);var Ee=null,Fn=Et;do Fn=(Fn+1)%ut,Ee=Y.getCoordinate(Fn);while(Ee.equals2D(pt)&&Fn!==Et);if(oe.equals2D(pt)||Ee.equals2D(pt)||oe.equals2D(Ee))return!1;var Ui=r.index(oe,pt,Ee);return Ui===0?oe.x>Ee.x:Ui>0}}}])}();kt.CLOCKWISE=-1,kt.RIGHT=kt.CLOCKWISE,kt.COUNTERCLOCKWISE=1,kt.LEFT=kt.COUNTERCLOCKWISE,kt.COLLINEAR=0,kt.STRAIGHT=kt.COLLINEAR;var Ke=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(r,t){var e=this.getRightmostSideOfSegment(r,t);return e<0&&(e=this.getRightmostSideOfSegment(r,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(r)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var r=this._minDe.getEdge().getCoordinates();vt.isTrue(this._minIndex>0&&this._minIndex<r.length,"rightmost point expected to be interior vertex of edge");var t=r[this._minIndex-1],e=r[this._minIndex+1],i=kt.index(this._minCoord,e,t),l=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&i===kt.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&i===kt.CLOCKWISE)&&(l=!0),l&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(r,t){var e=r.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var i=z.LEFT;return e[t].y<e[t+1].y&&(i=z.RIGHT),i}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(r){for(var t=r.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(this._minCoord===null||t[e].x>this._minCoord.x)&&(this._minDe=r,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var r=this._minDe.getNode().getEdges();this._minDe=r.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}vt.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===z.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),be=function(r){function t(e,i){var l;return a(this,t),(l=g(this,t,[i?e+" [ "+i+" ]":e])).pt=i?new A(i):void 0,l.name=Object.keys({TopologyException:t})[0],l}return I(t,r),p(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(Dt),oi=function(){return p(function r(){a(this,r),this.array=[]},[{key:"addLast",value:function(r){this.array.push(r)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),mt=function(r){function t(e){var i;return a(this,t),(i=g(this,t)).array=[],e instanceof N&&i.addAll(e),i}return I(t,r),p(t,[{key:"interfaces_",get:function(){return[Lt,N]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return arguments.length===1?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var i,l=w(e);try{for(l.s();!(i=l.n()).done;){var d=i.value;this.array.push(d)}}catch(v){l.e(v)}finally{l.f()}}},{key:"set",value:function(e,i){var l=this.array[e];return this.array[e]=i,l}},{key:"iterator",value:function(){return new $e(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new J;return this.array[e]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(e){e?this.array.sort(function(i,l){return e.compare(i,l)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var i=0,l=this.array.length;i<l;i++)if(this.array[i]===e)return!!this.array.splice(i,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(Lt),$e=function(){return p(function r(t){a(this,r),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new U;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(r){return this.arrayList.set(this.position-1,r)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),Cn=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var r=this._dirEdgeList.iterator();r.hasNext();)r.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(r){for(var t=null,e=r.getEdges().iterator();e.hasNext();){var i=e.next();if(i.isVisited()||i.getSym().isVisited()){t=i;break}}if(t===null)throw new be("unable to find edge to compute depths at "+r.getCoordinate());r.getEdges().computeDepths(t);for(var l=r.getEdges().iterator();l.hasNext();){var d=l.next();d.setVisited(!0),this.copySymDepths(d)}}},{key:"computeDepth",value:function(r){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(z.RIGHT,r),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(r){this.addReachable(r),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var r=this._dirEdgeList.iterator();r.hasNext();){var t=r.next();t.getDepth(z.RIGHT)>=1&&t.getDepth(z.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(r){var t=new $,e=new oi,i=r.getNode();for(e.addLast(i),t.add(i),r.setVisited(!0);!e.isEmpty();){var l=e.removeFirst();t.add(l),this.computeNodeDepth(l);for(var d=l.getEdges().iterator();d.hasNext();){var v=d.next().getSym();if(!v.isVisited()){var x=v.getNode();t.contains(x)||(e.addLast(x),t.add(x))}}}}},{key:"compareTo",value:function(r){var t=r;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var r=new Xt,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),i=0;i<e.length-1;i++)r.expandToInclude(e[i]);this._env=r}return this._env}},{key:"addReachable",value:function(r){var t=new dt;for(t.add(r);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(r){var t=r.getSym();t.setDepth(z.LEFT,r.getDepth(z.RIGHT)),t.setDepth(z.RIGHT,r.getDepth(z.LEFT))}},{key:"add",value:function(r,t){r.setVisited(!0),this._nodes.add(r);for(var e=r.getEdges().iterator();e.hasNext();){var i=e.next();this._dirEdgeList.add(i);var l=i.getSym().getNode();l.isVisited()||t.push(l)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new mt,this._nodes=new mt,this._rightMostCoord=null,this._env=null,this._finder=new Ke}}])}(),Ar=function(){return p(function r(){a(this,r)},null,[{key:"intersection",value:function(r,t,e,i){var l=r.x<t.x?r.x:t.x,d=r.y<t.y?r.y:t.y,v=r.x>t.x?r.x:t.x,x=r.y>t.y?r.y:t.y,b=e.x<i.x?e.x:i.x,P=e.y<i.y?e.y:i.y,O=e.x>i.x?e.x:i.x,F=e.y>i.y?e.y:i.y,Y=((l>b?l:b)+(v<O?v:O))/2,ut=((d>P?d:P)+(x<F?x:F))/2,pt=r.x-Y,Et=r.y-ut,Wt=t.x-Y,Zt=t.y-ut,oe=e.x-Y,ce=e.y-ut,Ee=i.x-Y,Fn=i.y-ut,Ui=Et-Zt,vn=Wt-pt,us=pt*Zt-Wt*Et,ls=ce-Fn,pi=Ee-oe,js=oe*Fn-Ee*ce,Zi=Ui*pi-ls*vn,Qn=(vn*js-pi*us)/Zi,yr=(ls*us-Ui*js)/Zi;return q.isNaN(Qn)||q.isInfinite(Qn)||q.isNaN(yr)||q.isInfinite(yr)?null:new A(Qn+Y,yr+ut)}}])}(),Je=function(){return p(function r(){a(this,r)},null,[{key:"arraycopy",value:function(r,t,e,i,l){for(var d=0,v=t;v<t+l;v++)e[i+d]=r[v],d++}},{key:"getProperty",value:function(r){return{"line.separator":`
`}[r]}}])}(),ai=function(){function r(){a(this,r)}return p(r,null,[{key:"log10",value:function(t){var e=Math.log(t);return q.isInfinite(e)||q.isNaN(e)?e:e/r.LOG_10}},{key:"min",value:function(t,e,i,l){var d=t;return e<d&&(d=e),i<d&&(d=i),l<d&&(d=l),d}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],d=arguments[1],v=arguments[2];return l<d?d:l>v?v:l}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(arguments.length===3){var t=arguments[1],e=arguments[2],i=arguments[0];return t>i&&(i=t),e>i&&(i=e),i}if(arguments.length===4){var l=arguments[1],d=arguments[2],v=arguments[3],x=arguments[0];return l>x&&(x=l),d>x&&(x=d),v>x&&(x=v),x}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();ai.LOG_10=Math.log(10);var nn=function(){function r(){a(this,r)}return p(r,null,[{key:"segmentToSegment",value:function(t,e,i,l){if(t.equals(e))return r.pointToSegment(t,i,l);if(i.equals(l))return r.pointToSegment(l,t,e);var d=!1;if(Xt.intersects(t,e,i,l)){var v=(e.x-t.x)*(l.y-i.y)-(e.y-t.y)*(l.x-i.x);if(v===0)d=!0;else{var x=(t.y-i.y)*(l.x-i.x)-(t.x-i.x)*(l.y-i.y),b=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/v,P=x/v;(P<0||P>1||b<0||b>1)&&(d=!0)}}else d=!0;return d?ai.min(r.pointToSegment(t,i,l),r.pointToSegment(e,i,l),r.pointToSegment(i,t,e),r.pointToSegment(l,t,e)):0}},{key:"pointToSegment",value:function(t,e,i){if(e.x===i.x&&e.y===i.y)return t.distance(e);var l=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),d=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/l;if(d<=0)return t.distance(e);if(d>=1)return t.distance(i);var v=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/l;return Math.abs(v)*Math.sqrt(l)}},{key:"pointToLinePerpendicular",value:function(t,e,i){var l=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),d=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/l;return Math.abs(d)*Math.sqrt(l)}},{key:"pointToSegmentString",value:function(t,e){if(e.length===0)throw new tt("Line array must contain at least one vertex");for(var i=t.distance(e[0]),l=0;l<e.length-1;l++){var d=r.pointToSegment(t,e[l],e[l+1]);d<i&&(i=d)}return i}}])}(),zr=function(){return p(function r(){a(this,r)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Q(arguments[0],It);else if(arguments.length!==2){if(arguments.length===3){var r=arguments[0],t=arguments[1];return this.create(r,t)}}}}])}(),Ji=function(){return p(function r(){a(this,r)},[{key:"filter",value:function(r){}}])}(),zo=function(){return p(function r(){a(this,r)},null,[{key:"ofLine",value:function(r){var t=r.size();if(t<=1)return 0;var e=0,i=new A;r.getCoordinate(0,i);for(var l=i.x,d=i.y,v=1;v<t;v++){r.getCoordinate(v,i);var x=i.x,b=i.y,P=x-l,O=b-d;e+=Math.sqrt(P*P+O*O),l=x,d=b}return e}}])}(),Ms=p(function r(){a(this,r)}),Vn=function(){function r(){a(this,r)}return p(r,null,[{key:"copyCoord",value:function(t,e,i,l){for(var d=Math.min(t.getDimension(),i.getDimension()),v=0;v<d;v++)i.setOrdinate(l,v,t.getOrdinate(e,v))}},{key:"isRing",value:function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,It.X)===t.getOrdinate(e-1,It.X)&&t.getOrdinate(0,It.Y)===t.getOrdinate(e-1,It.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Q(arguments[0],It)&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1];r.scroll(t,e,r.isRing(t))}else if(Q(arguments[0],It)&&arguments[1]instanceof A){var i=arguments[0],l=arguments[1],d=r.indexOf(l,i);if(d<=0)return null;r.scroll(i,d)}}else if(arguments.length===3){var v=arguments[0],x=arguments[1],b=arguments[2];if(x<=0)return null;for(var P=v.copy(),O=b?v.size()-1:v.size(),F=0;F<O;F++)for(var Y=0;Y<v.getDimension();Y++)v.setOrdinate(F,Y,P.getOrdinate((x+F)%O,Y));if(b)for(var ut=0;ut<v.getDimension();ut++)v.setOrdinate(O,ut,v.getOrdinate(0,ut))}}},{key:"isEqual",value:function(t,e){var i=t.size();if(i!==e.size())return!1;for(var l=Math.min(t.getDimension(),e.getDimension()),d=0;d<i;d++)for(var v=0;v<l;v++){var x=t.getOrdinate(d,v),b=e.getOrdinate(d,v);if(t.getOrdinate(d,v)!==e.getOrdinate(d,v)&&(!q.isNaN(x)||!q.isNaN(b)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var t=arguments[0];return r.minCoordinateIndex(t,0,t.size()-1)}if(arguments.length===3){for(var e=arguments[0],i=arguments[2],l=-1,d=null,v=arguments[1];v<=i;v++){var x=e.getCoordinate(v);(d===null||d.compareTo(x)>0)&&(d=x,l=v)}return l}}},{key:"extend",value:function(t,e,i){var l=t.create(i,e.getDimension()),d=e.size();if(r.copy(e,0,l,0,d),d>0)for(var v=d;v<i;v++)r.copy(e,d-1,l,v,1);return l}},{key:"reverse",value:function(t){for(var e=t.size()-1,i=Math.trunc(e/2),l=0;l<=i;l++)r.swap(t,l,e-l)}},{key:"swap",value:function(t,e,i){if(e===i)return null;for(var l=0;l<t.getDimension();l++){var d=t.getOrdinate(e,l);t.setOrdinate(e,l,t.getOrdinate(i,l)),t.setOrdinate(i,l,d)}}},{key:"copy",value:function(t,e,i,l,d){for(var v=0;v<d;v++)r.copyCoord(t,e+v,i,l+v)}},{key:"ensureValidRing",value:function(t,e){var i=e.size();return i===0?e:i<=3?r.createClosedRing(t,e,4):e.getOrdinate(0,It.X)===e.getOrdinate(i-1,It.X)&&e.getOrdinate(0,It.Y)===e.getOrdinate(i-1,It.Y)?e:r.createClosedRing(t,e,i+1)}},{key:"indexOf",value:function(t,e){for(var i=0;i<e.size();i++)if(t.x===e.getOrdinate(i,It.X)&&t.y===e.getOrdinate(i,It.Y))return i;return-1}},{key:"createClosedRing",value:function(t,e,i){var l=t.create(i,e.getDimension()),d=e.size();r.copy(e,0,l,0,d);for(var v=d;v<i;v++)r.copy(e,0,l,v,1);return l}},{key:"minCoordinate",value:function(t){for(var e=null,i=0;i<t.size();i++){var l=t.getCoordinate(i);(e===null||e.compareTo(l)>0)&&(e=l)}return e}}])}(),ot=function(){function r(){a(this,r)}return p(r,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case r.FALSE:return r.SYM_FALSE;case r.TRUE:return r.SYM_TRUE;case r.DONTCARE:return r.SYM_DONTCARE;case r.P:return r.SYM_P;case r.L:return r.SYM_L;case r.A:return r.SYM_A}throw new tt("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(Kt.toUpperCase(t)){case r.SYM_FALSE:return r.FALSE;case r.SYM_TRUE:return r.TRUE;case r.SYM_DONTCARE:return r.DONTCARE;case r.SYM_P:return r.P;case r.SYM_L:return r.L;case r.SYM_A:return r.A}throw new tt("Unknown dimension symbol: "+t)}}])}();ot.P=0,ot.L=1,ot.A=2,ot.FALSE=-1,ot.TRUE=-2,ot.DONTCARE=-3,ot.SYM_FALSE="F",ot.SYM_TRUE="T",ot.SYM_DONTCARE="*",ot.SYM_P="0",ot.SYM_L="1",ot.SYM_A="2";var Qi=function(){return p(function r(){a(this,r)},[{key:"filter",value:function(r){}}])}(),ui=function(){return p(function r(){a(this,r)},[{key:"filter",value:function(r,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Si=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Xt:this._points.expandEnvelope(new Xt)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof xt){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var l=e;if(this._points.size()!==l._points.size())return!1;for(var d=0;d<this._points.size();d++)if(!this.equal(this._points.getCoordinate(d),l._points.getCoordinate(d),i))return!1;return!0}return R(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var i=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(i))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(i))>0){var l=this._points.copy();Vn.reverse(l),this._points=l}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?ot.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Vn.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return xt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return zo.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var e=arguments[0],i=0,l=0;i<this._points.size()&&l<e._points.size();){var d=this._points.getCoordinate(i).compareTo(e._points.getCoordinate(l));if(d!==0)return d;i++,l++}return i<this._points.size()?1:l<e._points.size()?-1:0}if(arguments.length===2){var v=arguments[0];return arguments[1].compare(this._points,v._points)}}},{key:"apply",value:function(){if(Q(arguments[0],Ji))for(var e=arguments[0],i=0;i<this._points.size();i++)e.filter(this._points.getCoordinate(i));else if(Q(arguments[0],ui)){var l=arguments[0];if(this._points.size()===0)return null;for(var d=0;d<this._points.size()&&(l.filter(this._points,d),!l.isDone());d++);l.isGeometryChanged()&&this.geometryChanged()}else Q(arguments[0],Qi)?arguments[0].filter(this):Q(arguments[0],W)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new j}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return xt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(e){if(e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),e.size()===1)throw new tt("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var i=0;i<this._points.size();i++)if(this._points.getCoordinate(i).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[Ms]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],i=arguments[1];xt.constructor_.call(this,i),this.init(e)}}}}])}(xt),Ns=p(function r(){a(this,r)}),Fr=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Xt;var e=new Xt;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof xt){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),i))}return R(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return ot.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return xt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var i=arguments[0];return arguments[1].compare(this._coordinates,i._coordinates)}}},{key:"apply",value:function(){if(Q(arguments[0],Ji)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(Q(arguments[0],ui)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else Q(arguments[0],Qi)?arguments[0].filter(this):Q(arguments[0],W)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return xt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(e){e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),vt.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Ns]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],i=arguments[1];xt.constructor_.call(this,i),this.init(e)}}])}(xt),Os=function(){function r(){a(this,r)}return p(r,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(r.ofRingSigned(t))}if(Q(arguments[0],It)){var e=arguments[0];return Math.abs(r.ofRingSigned(e))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,i=t[0].x,l=1;l<t.length-1;l++){var d=t[l].x-i,v=t[l+1].y;e+=d*(t[l-1].y-v)}return e/2}if(Q(arguments[0],It)){var x=arguments[0],b=x.size();if(b<3)return 0;var P=new A,O=new A,F=new A;x.getCoordinate(0,O),x.getCoordinate(1,F);var Y=O.x;F.x-=Y;for(var ut=0,pt=1;pt<b-1;pt++)P.y=O.y,O.x=F.x,O.y=F.y,x.getCoordinate(pt+1,F),F.x-=Y,ut+=O.x*(P.y-F.y);return ut/2}}}])}(),Te=function(){return p(function r(){a(this,r)},null,[{key:"sort",value:function(){var r=arguments,t=arguments[0];if(arguments.length===1)t.sort(function(Y,ut){return Y.compareTo(ut)});else if(arguments.length===2)t.sort(function(Y,ut){return r[1].compare(Y,ut)});else if(arguments.length===3){var e=t.slice(arguments[1],arguments[2]);e.sort();var i=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var l,d=w(i);try{for(d.s();!(l=d.n()).done;){var v=l.value;t.push(v)}}catch(Y){d.e(Y)}finally{d.f()}}else if(arguments.length===4){var x=t.slice(arguments[1],arguments[2]);x.sort(function(Y,ut){return r[3].compare(Y,ut)});var b=t.slice(0,arguments[1]).concat(x,t.slice(arguments[2],t.length));t.splice(0,t.length);var P,O=w(b);try{for(O.s();!(P=O.n()).done;){var F=P.value;t.push(F)}}catch(Y){O.e(Y)}finally{O.f()}}}},{key:"asList",value:function(r){var t,e=new mt,i=w(r);try{for(i.s();!(t=i.n()).done;){var l=t.value;e.add(l)}}catch(d){i.e(d)}finally{i.f()}return e}},{key:"copyOf",value:function(r,t){return r.slice(0,t)}}])}(),wt=p(function r(){a(this,r)}),Pi=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),i=-1,l=this._shell.getCoordinates(),d=0;d<l.length;d++)e[++i]=l[d];for(var v=0;v<this._holes.length;v++)for(var x=this._holes[v].getCoordinates(),b=0;b<x.length;b++)e[++i]=x[b];return e}},{key:"getArea",value:function(){var e=0;e+=Os.ofRing(this._shell.getCoordinateSequence());for(var i=0;i<this._holes.length;i++)e-=Os.ofRing(this._holes[i].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),i=new Array(this._holes.length).fill(null),l=0;l<this._holes.length;l++)i[l]=this._holes[l].copy();return new t(e,i,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var e=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),l=0;l<5;l++){var d=e.getX(l);if(d!==i.getMinX()&&d!==i.getMaxX())return!1;var v=e.getY(l);if(v!==i.getMinY()&&v!==i.getMaxY())return!1}for(var x=e.getX(0),b=e.getY(0),P=1;P<=4;P++){var O=e.getX(P),F=e.getY(P);if(O!==x==(F!==b))return!1;x=O,b=F}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof xt){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var l=e,d=this._shell,v=l._shell;if(!d.equalsExact(v,i)||this._holes.length!==l._holes.length)return!1;for(var x=0;x<this._holes.length;x++)if(!this._holes[x].equalsExact(l._holes[x],i))return!1;return!0}return R(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);Te.sort(this._holes)}else if(arguments.length===2){var i=arguments[0],l=arguments[1];if(i.isEmpty())return null;var d=i.getCoordinateSequence(),v=Vn.minCoordinateIndex(d,0,d.size()-2);Vn.scroll(d,v,!0),kt.isCCW(d)===l&&Vn.reverse(d)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),i=new Array(this.getNumInteriorRing()).fill(null),l=0;l<i.length;l++)i[l]=this.getInteriorRingN(l).reverse();return this.getFactory().createPolygon(e,i)}},{key:"getTypeCode",value:function(){return xt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var i=0;i<this._holes.length;i++)e+=this._holes[i].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),i=0;i<this._holes.length;i++)e+=this._holes[i].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,i){var l=e.copy();return this.normalize(l,i),l}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],i=this._shell,l=e._shell;return i.compareToSameClass(l)}if(arguments.length===2){var d=arguments[1],v=arguments[0],x=this._shell,b=v._shell,P=x.compareToSameClass(b,d);if(P!==0)return P;for(var O=this.getNumInteriorRing(),F=v.getNumInteriorRing(),Y=0;Y<O&&Y<F;){var ut=this.getInteriorRingN(Y),pt=v.getInteriorRingN(Y),Et=ut.compareToSameClass(pt,d);if(Et!==0)return Et;Y++}return Y<O?1:Y<F?-1:0}}},{key:"apply",value:function(){if(Q(arguments[0],Ji)){var e=arguments[0];this._shell.apply(e);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(e)}else if(Q(arguments[0],ui)){var l=arguments[0];if(this._shell.apply(l),!l.isDone())for(var d=0;d<this._holes.length&&(this._holes[d].apply(l),!l.isDone());d++);l.isGeometryChanged()&&this.geometryChanged()}else if(Q(arguments[0],Qi))arguments[0].filter(this);else if(Q(arguments[0],W)){var v=arguments[0];v.filter(this),this._shell.apply(v);for(var x=0;x<this._holes.length;x++)this._holes[x].apply(v)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var i=0;i<this._holes.length;i++)e[i+1]=this._holes[i];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return xt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[wt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],i=arguments[1],l=arguments[2];if(xt.constructor_.call(this,l),e===null&&(e=this.getFactory().createLinearRing()),i===null&&(i=[]),xt.hasNullElements(i))throw new tt("holes must not contain null elements");if(e.isEmpty()&&xt.hasNonEmptyElements(i))throw new tt("shell is empty but holes are not");this._shell=e,this._holes=i}}])}(xt),Rs=function(r){function t(){return a(this,t),g(this,t,arguments)}return I(t,r),p(t)}(X),Br=function(r){function t(e){var i;return a(this,t),(i=g(this,t)).array=[],e instanceof N&&i.addAll(e),i}return I(t,r),p(t,[{key:"contains",value:function(e){var i,l=w(this.array);try{for(l.s();!(i=l.n()).done;)if(i.value.compareTo(e)===0)return!0}catch(d){l.e(d)}finally{l.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var i=0,l=this.array.length;i<l;i++)if(this.array[i].compareTo(e)===1)return!!this.array.splice(i,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var i,l=w(e);try{for(l.s();!(i=l.n()).done;){var d=i.value;this.add(d)}}catch(v){l.e(v)}finally{l.f()}return!0}},{key:"remove",value:function(){throw new j}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Ds(this.array)}}])}(Rs),Ds=function(){return p(function r(t){a(this,r),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new U;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new j}}])}(),Oe=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new Xt,i=0;i<this._geometries.length;i++)e.expandToInclude(this._geometries[i].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),i=-1,l=0;l<this._geometries.length;l++)for(var d=this._geometries[l].getCoordinates(),v=0;v<d.length;v++)e[++i]=d[v];return e}},{key:"getArea",value:function(){for(var e=0,i=0;i<this._geometries.length;i++)e+=this._geometries[i].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),i=0;i<e.length;i++)e[i]=this._geometries[i].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof xt){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var l=e;if(this._geometries.length!==l._geometries.length)return!1;for(var d=0;d<this._geometries.length;d++)if(!this._geometries[d].equalsExact(l._geometries[d],i))return!1;return!0}return R(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Te.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=ot.FALSE,i=0;i<this._geometries.length;i++)e=Math.max(e,this._geometries[i].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,i=new mt(e),l=0;l<e;l++)i.add(this._geometries[l].reverse());return this.getFactory().buildGeometry(i)}},{key:"getTypeCode",value:function(){return xt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=ot.FALSE,i=0;i<this._geometries.length;i++)e=Math.max(e,this._geometries[i].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,i=0;i<this._geometries.length;i++)e+=this._geometries[i].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,i=0;i<this._geometries.length;i++)e+=this._geometries[i].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],i=new Br(Te.asList(this._geometries)),l=new Br(Te.asList(e._geometries));return this.compare(i,l)}if(arguments.length===2){for(var d=arguments[1],v=arguments[0],x=this.getNumGeometries(),b=v.getNumGeometries(),P=0;P<x&&P<b;){var O=this.getGeometryN(P),F=v.getGeometryN(P),Y=O.compareToSameClass(F,d);if(Y!==0)return Y;P++}return P<x?1:P<b?-1:0}}},{key:"apply",value:function(){if(Q(arguments[0],Ji))for(var e=arguments[0],i=0;i<this._geometries.length;i++)this._geometries[i].apply(e);else if(Q(arguments[0],ui)){var l=arguments[0];if(this._geometries.length===0)return null;for(var d=0;d<this._geometries.length&&(this._geometries[d].apply(l),!l.isDone());d++);l.isGeometryChanged()&&this.geometryChanged()}else if(Q(arguments[0],Qi)){var v=arguments[0];v.filter(this);for(var x=0;x<this._geometries.length;x++)this._geometries[x].apply(v)}else if(Q(arguments[0],W)){var b=arguments[0];b.filter(this);for(var P=0;P<this._geometries.length;P++)this._geometries[P].apply(b)}}},{key:"getBoundary",value:function(){return xt.checkNotGeometryCollection(this),vt.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return xt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],i=arguments[1];if(xt.constructor_.call(this,i),e===null&&(e=[]),xt.hasNullElements(e))throw new tt("geometries must not contain null elements");this._geometries=e}}}}])}(xt),tr=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),i=0;i<e.length;i++)e[i]=this._geometries[i].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof xt){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&R(t,"equalsExact",this,1).call(this,e,i)}return R(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return R(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return ot.FALSE}},{key:"getTypeCode",value:function(){return xt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return xt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Ns]}}],[{key:"constructor_",value:function(){var e=arguments[0],i=arguments[1];Oe.constructor_.call(this,e,i)}}])}(Oe),hn=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return ot.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||R(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Vn.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return xt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!R(t,"isClosed",this,1).call(this))throw new tt("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new tt("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return xt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],i=arguments[1];Si.constructor_.call(this,e,i),this.validateConstruction()}}])}(Si);hn.MINIMUM_VALID_SIZE=4;var Mn=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"setOrdinate",value:function(e,i){switch(e){case t.X:this.x=i;break;case t.Y:this.y=i;break;default:throw new tt("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return A.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new tt("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new tt("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)A.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];A.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof A){var i=arguments[0];A.constructor_.call(this,i.x,i.y)}}else if(arguments.length===2){var l=arguments[0],d=arguments[1];A.constructor_.call(this,l,d,A.NULL_ORDINATE)}}}])}(A);Mn.X=0,Mn.Y=1,Mn.Z=-1,Mn.M=-1;var Wn=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,i){switch(e){case t.X:this.x=i;break;case t.Y:this.y=i;break;case t.M:this._m=i;break;default:throw new tt("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return A.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new tt("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new tt("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)A.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];A.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof A){var i=arguments[0];A.constructor_.call(this,i.x,i.y),this._m=this.getM()}}else if(arguments.length===3){var l=arguments[0],d=arguments[1],v=arguments[2];A.constructor_.call(this,l,d,A.NULL_ORDINATE),this._m=v}}}])}(A);Wn.X=0,Wn.Y=1,Wn.Z=-1,Wn.M=2;var Gr=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,i){switch(e){case A.X:this.x=i;break;case A.Y:this.y=i;break;case A.Z:this.z=i;break;case A.M:this._m=i;break;default:throw new tt("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case A.X:return this.x;case A.Y:return this.y;case A.Z:return this.getZ();case A.M:return this.getM()}throw new tt("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)A.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];A.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof A){var i=arguments[0];A.constructor_.call(this,i),this._m=this.getM()}}else if(arguments.length===4){var l=arguments[0],d=arguments[1],v=arguments[2],x=arguments[3];A.constructor_.call(this,l,d,v),this._m=x}}}])}(A),er=function(){function r(){a(this,r)}return p(r,null,[{key:"measures",value:function(t){return t instanceof Mn?0:t instanceof Wn||t instanceof Gr?1:0}},{key:"dimension",value:function(t){return t instanceof Mn?2:t instanceof Wn?3:t instanceof Gr?4:3}},{key:"create",value:function(){if(arguments.length===1){var t=arguments[0];return r.create(t,0)}if(arguments.length===2){var e=arguments[0],i=arguments[1];return e===2?new Mn:e===3&&i===0?new A:e===3&&i===1?new Wn:e===4&&i===1?new Gr:new A}}}])}(),Ci=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Q(arguments[0],N)){for(var e=arguments[1],i=!1,l=arguments[0].iterator();l.hasNext();)this.add(l.next(),e),i=!0;return i}return R(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=R(t,"clone",this,1).call(this),i=0;i<this.size();i++)e.add(i,this.get(i).clone());return e}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(t.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),i=new Array(e).fill(null),l=0;l<e;l++)i[l]=this.get(e-l-1);return i}}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];return R(t,"add",this,1).call(this,e)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var i=arguments[0],l=arguments[1];return this.add(i,l,!0),!0}if(arguments[0]instanceof A&&typeof arguments[1]=="boolean"){var d=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(d))return null;R(t,"add",this,1).call(this,d)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var v=arguments[0],x=arguments[1];return this.add(v,x),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var b=arguments[0],P=arguments[1];if(arguments[2])for(var O=0;O<b.length;O++)this.add(b[O],P);else for(var F=b.length-1;F>=0;F--)this.add(b[F],P);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof A){var Y=arguments[0],ut=arguments[1];if(!arguments[2]){var pt=this.size();if(pt>0&&(Y>0&&this.get(Y-1).equals2D(ut)||Y<pt&&this.get(Y).equals2D(ut)))return null}R(t,"add",this,1).call(this,Y,ut)}}else if(arguments.length===4){var Et=arguments[0],Wt=arguments[1],Zt=arguments[2],oe=arguments[3],ce=1;Zt>oe&&(ce=-1);for(var Ee=Zt;Ee!==oe;Ee+=ce)this.add(Et[Ee],Wt);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.ensureCapacity(i.length),this.add(i,l)}}}}])}(mt);Ci.coordArrayType=new Array(0).fill(null);var me=function(){function r(){a(this,r)}return p(r,null,[{key:"isRing",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:"ptNotInList",value:function(t,e){for(var i=0;i<t.length;i++){var l=t[i];if(r.indexOf(l,e)<0)return l}return null}},{key:"scroll",value:function(t,e){var i=r.indexOf(e,t);if(i<0)return null;var l=new Array(t.length).fill(null);Je.arraycopy(t,i,l,0,t.length-i),Je.arraycopy(t,0,l,t.length-i,i),Je.arraycopy(l,0,t,0,t.length)}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(arguments.length===3){var l=arguments[0],d=arguments[1],v=arguments[2];if(l===d)return!0;if(l===null||d===null||l.length!==d.length)return!1;for(var x=0;x<l.length;x++)if(v.compare(l[x],d[x])!==0)return!1;return!0}}},{key:"intersection",value:function(t,e){for(var i=new Ci,l=0;l<t.length;l++)e.intersects(t[l])&&i.add(t[l],!0);return i.toCoordinateArray()}},{key:"measures",value:function(t){if(t===null||t.length===0)return 0;var e,i=0,l=w(t);try{for(l.s();!(e=l.n()).done;){var d=e.value;i=Math.max(i,er.measures(d))}}catch(v){l.e(v)}finally{l.f()}return i}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return r.hasRepeatedPoints(t)?new Ci(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,i=Math.trunc(e/2),l=0;l<=i;l++){var d=t[l];t[l]=t[e-l],t[e-l]=d}}},{key:"removeNull",value:function(t){for(var e=0,i=0;i<t.length;i++)t[i]!==null&&e++;var l=new Array(e).fill(null);if(e===0)return l;for(var d=0,v=0;v<t.length;v++)t[v]!==null&&(l[d++]=t[v]);return l}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=t[i].copy();return e}if(arguments.length===5)for(var l=arguments[0],d=arguments[1],v=arguments[2],x=arguments[3],b=arguments[4],P=0;P<b;P++)v[x+P]=l[d+P].copy()}},{key:"isEqualReversed",value:function(t,e){for(var i=0;i<t.length;i++){var l=t[i],d=e[t.length-i-1];if(l.compareTo(d)!==0)return!1}return!0}},{key:"envelope",value:function(t){for(var e=new Xt,i=0;i<t.length;i++)e.expandToInclude(t[i]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(r.coordArrayType)}},{key:"dimension",value:function(t){if(t===null||t.length===0)return 3;var e,i=0,l=w(t);try{for(l.s();!(e=l.n()).done;){var d=e.value;i=Math.max(i,er.dimension(d))}}catch(v){l.e(v)}finally{l.f()}return i}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t.length-1-e,l=t[e].compareTo(t[i]);if(l!==0)return l}return 1}},{key:"compare",value:function(t,e){for(var i=0;i<t.length&&i<e.length;){var l=t[i].compareTo(e[i]);if(l!==0)return l;i++}return i<e.length?-1:i<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,i=0;i<t.length;i++)(e===null||e.compareTo(t[i])>0)&&(e=t[i]);return e}},{key:"extract",value:function(t,e,i){e=ai.clamp(e,0,t.length);var l=(i=ai.clamp(i,-1,t.length))-e+1;i<0&&(l=0),e>=t.length&&(l=0),i<e&&(l=0);var d=new Array(l).fill(null);if(l===0)return d;for(var v=0,x=e;x<=i;x++)d[v++]=t[x];return d}}])}(),Fo=function(){return p(function r(){a(this,r)},[{key:"compare",value:function(r,t){var e=r,i=t;return me.compare(e,i)}},{key:"interfaces_",get:function(){return[Ct]}}])}(),nr=function(){return p(function r(){a(this,r)},[{key:"compare",value:function(r,t){var e=r,i=t;if(e.length<i.length)return-1;if(e.length>i.length)return 1;if(e.length===0)return 0;var l=me.compare(e,i);return me.isEqualReversed(e,i)?0:l}},{key:"OLDcompare",value:function(r,t){var e=r,i=t;if(e.length<i.length)return-1;if(e.length>i.length)return 1;if(e.length===0)return 0;for(var l=me.increasingDirection(e),d=me.increasingDirection(i),v=l>0?0:e.length-1,x=d>0?0:e.length-1,b=0;b<e.length;b++){var P=e[v].compareTo(i[x]);if(P!==0)return P;v+=l,x+=d}return 0}},{key:"interfaces_",get:function(){return[Ct]}}])}();me.ForwardComparator=Fo,me.BidirectionalComparator=nr,me.coordArrayType=new Array(0).fill(null);var ir=function(){return p(function r(t){a(this,r),this.str=t},[{key:"append",value:function(r){this.str+=r}},{key:"setCharAt",value:function(r,t){this.str=this.str.substr(0,r)+t+this.str.substr(r+1)}},{key:"toString",value:function(){return this.str}}])}(),Mi=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():q.NaN}},{key:"setOrdinate",value:function(t,e,i){switch(e){case It.X:this._coordinates[t].x=i;break;case It.Y:this._coordinates[t].y=i;break;default:this._coordinates[t].setOrdinate(e,i)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():q.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case It.X:return this._coordinates[t].x;case It.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}if(arguments.length===2){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return er.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var i=this.createCoordinate();i.setCoordinate(this._coordinates[e]),t[e]=i}return new r(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new ir(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[It,ft]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];r.constructor_.call(this,t,me.dimension(t),me.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var i=0;i<e;i++)this._coordinates[i]=new A}else if(Q(arguments[0],It)){var l=arguments[0];if(l===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=l.getDimension(),this._measures=l.getMeasures(),this._coordinates=new Array(l.size()).fill(null);for(var d=0;d<this._coordinates.length;d++)this._coordinates[d]=l.getCoordinateCopy(d)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var v=arguments[0],x=arguments[1];r.constructor_.call(this,v,x,me.measures(v))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var b=arguments[0],P=arguments[1];this._coordinates=new Array(b).fill(null),this._dimension=P;for(var O=0;O<b;O++)this._coordinates[O]=er.create(P)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var F=arguments[0],Y=arguments[1],ut=arguments[2];this._dimension=Y,this._measures=ut,this._coordinates=F===null?new Array(0).fill(null):F}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var pt=arguments[0],Et=arguments[1],Wt=arguments[2];this._coordinates=new Array(pt).fill(null),this._dimension=Et,this._measures=Wt;for(var Zt=0;Zt<pt;Zt++)this._coordinates[Zt]=this.createCoordinate()}}}}])}(),Ur=function(){function r(){a(this,r)}return p(r,[{key:"readResolve",value:function(){return r.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Mi(arguments[0]);if(Q(arguments[0],It))return new Mi(arguments[0])}else{if(arguments.length===2){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Mi(arguments[0],t)}if(arguments.length===3){var e=arguments[2],i=arguments[1]-e;return e>1&&(e=1),i>3&&(i=3),i<2&&(i=2),new Mi(arguments[0],i+e,e)}}}},{key:"interfaces_",get:function(){return[zr,ft]}}],[{key:"instance",value:function(){return r.instanceObject}}])}();Ur.instanceObject=new Ur;var Zr=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),i=0;i<e.length;i++)e[i]=this._geometries[i].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof xt){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&R(t,"equalsExact",this,1).call(this,e,i)}return R(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return xt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new mt,i=0;i<this._geometries.length;i++)for(var l=this._geometries[i].getBoundary(),d=0;d<l.getNumGeometries();d++)e.add(l.getGeometryN(d));var v=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(v))}},{key:"getGeometryType",value:function(){return xt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[wt]}}],[{key:"constructor_",value:function(){var e=arguments[0],i=arguments[1];Oe.constructor_.call(this,e,i)}}])}(Oe),As=function(){return p(function r(){a(this,r)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),Hr=function(r){function t(){var e;return a(this,t),(e=g(this,t)).map=new Map,e}return I(t,r),p(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,i){return this.map.set(e,i),i}},{key:"values",value:function(){for(var e=new mt,i=this.map.values(),l=i.next();!l.done;)e.add(l.value),l=i.next();return e}},{key:"entrySet",value:function(){var e=new $;return this.map.entries().forEach(function(i){return e.add(i)}),e}},{key:"size",value:function(){return this.map.size()}}])}(As),Re=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,i=this.getMaximumSignificantDigits(),l=e.getMaximumSignificantDigits();return Gt.compare(i,l)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===r.FLOATING||this._modelType===r.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===r.FLOATING?t="Floating":this._modelType===r.FLOATING_SINGLE?t="Floating-Single":this._modelType===r.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var t=arguments[0];return q.isNaN(t)||this._modelType===r.FLOATING_SINGLE?t:this._modelType===r.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof A){var e=arguments[0];if(this._modelType===r.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===r.FLOATING?t=16:this._modelType===r.FLOATING_SINGLE?t=6:this._modelType===r.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[ft,et]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=r.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Xn){var t=arguments[0];this._modelType=t,t===r.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this._modelType=r.FIXED,this.setScale(e)}else if(arguments[0]instanceof r){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),Xn=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"readResolve",value:function(){return r.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[ft]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,r.nameToTypeMap.put(t,this)}}])}();Xn.nameToTypeMap=new Hr,Re.Type=Xn,Re.FIXED=new Xn("FIXED"),Re.FLOATING=new Xn("FLOATING"),Re.FLOATING_SINGLE=new Xn("FLOATING SINGLE"),Re.maximumPreciseValue=9007199254740992;var rr=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),i=0;i<e.length;i++)e[i]=this._geometries[i].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof xt){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&R(t,"equalsExact",this,1).call(this,e,i)}return R(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?ot.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return xt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new j}},{key:"getGeometryType",value:function(){return xt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Ms]}}],[{key:"constructor_",value:function(){var e=arguments[0],i=arguments[1];Oe.constructor_.call(this,e,i)}}])}(Oe),cn=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new tt("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new A(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new A(t.getMinX(),t.getMinY()),new A(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new A(t.getMinX(),t.getMinY()),new A(t.getMinX(),t.getMaxY()),new A(t.getMaxX(),t.getMaxY()),new A(t.getMaxX(),t.getMinY()),new A(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(Q(arguments[0],It))return new Si(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new rr(null,this):arguments.length===1?new rr(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,i=!1,l=!1,d=t.iterator();d.hasNext();){var v=d.next(),x=v.getTypeCode();e===null&&(e=x),x!==e&&(i=!0),v instanceof Oe&&(l=!0)}if(e===null)return this.createGeometryCollection();if(i||l)return this.createGeometryCollection(r.toGeometryArray(t));var b=t.iterator().next();if(t.size()>1){if(b instanceof Pi)return this.createMultiPolygon(r.toPolygonArray(t));if(b instanceof Si)return this.createMultiLineString(r.toLineStringArray(t));if(b instanceof Fr)return this.createMultiPoint(r.toPointArray(t));vt.shouldNeverReachHere("Unhandled geometry type: "+b.getGeometryType())}return b}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(Q(arguments[0],It))return new Fr(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Q(arguments[0],It)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof hn){var i=arguments[0];return this.createPolygon(i,null)}}else if(arguments.length===2)return new Pi(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Oe(null,this):arguments.length===1?new Oe(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(Q(arguments[0],It))return new hn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Zr(null,this):arguments.length===1?new Zr(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new tr(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new tr(arguments[0],this);if(Q(arguments[0],It)){var t=arguments[0];if(t===null)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),i=0;i<t.size();i++){var l=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Vn.copy(t,i,l,0,1),e[i]=this.createPoint(l)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[ft]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)r.constructor_.call(this,new Re,0);else if(arguments.length===1){if(Q(arguments[0],zr)){var t=arguments[0];r.constructor_.call(this,new Re,0,t)}else if(arguments[0]instanceof Re){var e=arguments[0];r.constructor_.call(this,e,0,r.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];r.constructor_.call(this,i,l,r.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this._precisionModel=d,this._coordinateSequenceFactory=x,this._SRID=v}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Ur.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),Vt="XY",he="XYZ",sr="XYM",li="XYZM",jn={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},or="EMPTY",Nt=1,Qt=2,fn=3,Ni=4,we=5,Bo=6;for(var ar in jn)jn[ar].toUpperCase();var Kn=function(){return p(function r(t){a(this,r),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(r){return r>="a"&&r<="z"||r>="A"&&r<="Z"}},{key:"isNumeric_",value:function(r,t){return r>="0"&&r<="9"||r=="."&&!(t!==void 0&&t)}},{key:"isWhiteSpace_",value:function(r){return r==" "||r=="	"||r=="\r"||r==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var r,t=this.nextChar_(),e=this.index_,i=t;if(t=="(")r=Qt;else if(t==",")r=we;else if(t==")")r=fn;else if(this.isNumeric_(t)||t=="-")r=Ni,i=this.readNumber_();else if(this.isAlpha_(t))r=Nt,i=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t!=="")throw new Error("Unexpected character: "+t);r=Bo}return{position:e,value:i,type:r}}},{key:"readNumber_",value:function(){var r,t=this.index_,e=!1,i=!1;do r=="."?e=!0:r!="e"&&r!="E"||(i=!0),r=this.nextChar_();while(this.isNumeric_(r,e)||!i&&(r=="e"||r=="E")||i&&(r=="-"||r=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var r,t=this.index_;do r=this.nextChar_();while(this.isAlpha_(r));return this.wkt.substring(t,this.index_--).toUpperCase()}}])}(),pe=function(){return p(function r(t,e){a(this,r),this.lexer_=t,this.token_,this.layout_=Vt,this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(r){return this.token_.type==r}},{key:"match",value:function(r){var t=this.isTokenType(r);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var r=Vt,t=this.token_;if(this.isTokenType(Nt)){var e=t.value;e==="Z"?r=he:e==="M"?r=sr:e==="ZM"&&(r=li),r!==Vt&&this.consume_()}return r}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Qt)){var r=[];do r.push(this.parseGeometry_());while(this.match(we));if(this.match(fn))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Qt)){var r=this.parsePoint_();if(this.match(fn))return r}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Qt)){var r=this.parsePointList_();if(this.match(fn))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Qt)){var r=this.parseLineStringTextList_();if(this.match(fn))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var r;if(this.match(Qt)){if(r=this.token_.type==Qt?this.parsePointTextList_():this.parsePointList_(),this.match(fn))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Qt)){var r=this.parseLineStringTextList_();if(this.match(fn))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Qt)){var r=this.parsePolygonTextList_();if(this.match(fn))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var r=[],t=this.layout_.length,e=0;e<t;++e){var i=this.token_;if(!this.match(Ni))break;r.push(i.value)}if(r.length==t)return r;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var r=[this.parsePoint_()];this.match(we);)r.push(this.parsePoint_());return r}},{key:"parsePointTextList_",value:function(){for(var r=[this.parsePointText_()];this.match(we);)r.push(this.parsePointText_());return r}},{key:"parseLineStringTextList_",value:function(){for(var r=[this.parseLineStringText_()];this.match(we);)r.push(this.parseLineStringText_());return r}},{key:"parsePolygonTextList_",value:function(){for(var r=[this.parsePolygonText_()];this.match(we);)r.push(this.parsePolygonText_());return r}},{key:"isEmptyGeometry_",value:function(){var r=this.isTokenType(Nt)&&this.token_.value==or;return r&&this.consume_(),r}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var r=this.factory,t=function(Et){return c(A,Z(Et))},e=function(Et){var Wt=Et.map(function(Zt){return r.createLinearRing(Zt.map(t))});return Wt.length>1?r.createPolygon(Wt[0],Wt.slice(1)):r.createPolygon(Wt[0])},i=this.token_;if(this.match(Nt)){var l=i.value;if(this.layout_=this.parseGeometryLayout_(),l=="GEOMETRYCOLLECTION"){var d=this.parseGeometryCollectionText_();return r.createGeometryCollection(d)}switch(l){case"POINT":var v=this.parsePointText_();return v?r.createPoint(c(A,Z(v))):r.createPoint();case"LINESTRING":var x=this.parseLineStringText_().map(t);return r.createLineString(x);case"LINEARRING":var b=this.parseLineStringText_().map(t);return r.createLinearRing(b);case"POLYGON":var P=this.parsePolygonText_();return P&&P.length!==0?e(P):r.createPolygon();case"MULTIPOINT":var O=this.parseMultiPointText_();if(!O||O.length===0)return r.createMultiPoint();var F=O.map(t).map(function(Et){return r.createPoint(Et)});return r.createMultiPoint(F);case"MULTILINESTRING":var Y=this.parseMultiLineStringText_().map(function(Et){return r.createLineString(Et.map(t))});return r.createMultiLineString(Y);case"MULTIPOLYGON":var ut=this.parseMultiPolygonText_();if(!ut||ut.length===0)return r.createMultiPolygon();var pt=ut.map(e);return r.createMultiPolygon(pt);default:throw new Error("Invalid geometry type: "+l)}}throw new Error(this.formatErrorMessage_())}}])}();function Nn(r){if(r.isEmpty())return"";var t=r.getCoordinate(),e=[t.x,t.y];return t.z===void 0||Number.isNaN(t.z)||e.push(t.z),t.m===void 0||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function wn(r){for(var t=r.getCoordinates().map(function(d){var v=[d.x,d.y];return d.z===void 0||Number.isNaN(d.z)||v.push(d.z),d.m===void 0||Number.isNaN(d.m)||v.push(d.m),v}),e=[],i=0,l=t.length;i<l;++i)e.push(t[i].join(" "));return e.join(", ")}function hi(r){var t=[];t.push("("+wn(r.getExteriorRing())+")");for(var e=0,i=r.getNumInteriorRing();e<i;++e)t.push("("+wn(r.getInteriorRingN(e))+")");return t.join(", ")}var qr={Point:Nn,LineString:wn,LinearRing:wn,Polygon:hi,MultiPoint:function(r){for(var t=[],e=0,i=r.getNumGeometries();e<i;++e)t.push("("+Nn(r.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(r){for(var t=[],e=0,i=r.getNumGeometries();e<i;++e)t.push("("+wn(r.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(r){for(var t=[],e=0,i=r.getNumGeometries();e<i;++e)t.push("("+hi(r.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(r){for(var t=[],e=0,i=r.getNumGeometries();e<i;++e)t.push(ci(r.getGeometryN(e)));return t.join(", ")}};function ci(r){var t=r.getGeometryType(),e=qr[t];t=t.toUpperCase();var i=function(l){var d="";if(l.isEmpty())return d;var v=l.getCoordinate();return v.z===void 0||Number.isNaN(v.z)||(d+="Z"),v.m===void 0||Number.isNaN(v.m)||(d+="M"),d}(r);return i.length>0&&(t+=" "+i),r.isEmpty()?t+" "+or:t+" ("+e(r)+")"}var Yr=function(){return p(function r(t){a(this,r),this.geometryFactory=t||new cn,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(r){var t=new Kn(r);return new pe(t,this.geometryFactory).parse()}},{key:"write",value:function(r){return ci(r)}}])}(),Oi=function(){return p(function r(t){a(this,r),this.parser=new Yr(t)},[{key:"write",value:function(r){return this.parser.write(r)}}],[{key:"toLineString",value:function(r,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+r.x+" "+r.y+", "+t.x+" "+t.y+" )"}}])}(),re=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new ir;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,i,l){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=l,this._result=this.computeIntersect(t,e,i,l)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==r.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return r.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===r.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Oi.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Oi.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new A,this._intPt[1]=new A,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,i){var l=Math.abs(i.x-e.x),d=Math.abs(i.y-e.y),v=-1;if(t.equals(e))v=0;else if(t.equals(i))v=l>d?l:d;else{var x=Math.abs(t.x-e.x),b=Math.abs(t.y-e.y);(v=l>d?x:b)!==0||t.equals(e)||(v=Math.max(x,b))}return vt.isTrue(!(v===0&&!t.equals(e)),"Bad distance calculation"),v}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,i){var l=t.x-e.x,d=t.y-e.y,v=Math.sqrt(l*l+d*d);return vt.isTrue(!(v===0&&!t.equals(e)),"Invalid distance calculation"),v}}])}();re.DONT_INTERSECT=0,re.DO_INTERSECT=1,re.COLLINEAR=2,re.NO_INTERSECTION=0,re.POINT_INTERSECTION=1,re.COLLINEAR_INTERSECTION=2;var En=function(r){function t(){return a(this,t),g(this,t)}return I(t,r),p(t,[{key:"isInSegmentEnvelopes",value:function(e){var i=new Xt(this._inputLines[0][0],this._inputLines[0][1]),l=new Xt(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(e)&&l.contains(e)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return R(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],i=arguments[1],l=arguments[2];if(this._isProper=!1,Xt.intersects(i,l,e)&&kt.index(i,l,e)===0&&kt.index(l,i,e)===0)return this._isProper=!0,(e.equals(i)||e.equals(l))&&(this._isProper=!1),this._result=re.POINT_INTERSECTION,null;this._result=re.NO_INTERSECTION}},{key:"intersection",value:function(e,i,l,d){var v=this.intersectionSafe(e,i,l,d);return this.isInSegmentEnvelopes(v)||(v=new A(t.nearestEndpoint(e,i,l,d))),this._precisionModel!==null&&this._precisionModel.makePrecise(v),v}},{key:"checkDD",value:function(e,i,l,d,v){var x=ke.intersection(e,i,l,d),b=this.isInSegmentEnvelopes(x);Je.out.println("DD in env = "+b+"  --------------------- "+x),v.distance(x)>1e-4&&Je.out.println("Distance = "+v.distance(x))}},{key:"intersectionSafe",value:function(e,i,l,d){var v=Ar.intersection(e,i,l,d);return v===null&&(v=t.nearestEndpoint(e,i,l,d)),v}},{key:"computeCollinearIntersection",value:function(e,i,l,d){var v=Xt.intersects(e,i,l),x=Xt.intersects(e,i,d),b=Xt.intersects(l,d,e),P=Xt.intersects(l,d,i);return v&&x?(this._intPt[0]=l,this._intPt[1]=d,re.COLLINEAR_INTERSECTION):b&&P?(this._intPt[0]=e,this._intPt[1]=i,re.COLLINEAR_INTERSECTION):v&&b?(this._intPt[0]=l,this._intPt[1]=e,!l.equals(e)||x||P?re.COLLINEAR_INTERSECTION:re.POINT_INTERSECTION):v&&P?(this._intPt[0]=l,this._intPt[1]=i,!l.equals(i)||x||b?re.COLLINEAR_INTERSECTION:re.POINT_INTERSECTION):x&&b?(this._intPt[0]=d,this._intPt[1]=e,!d.equals(e)||v||P?re.COLLINEAR_INTERSECTION:re.POINT_INTERSECTION):x&&P?(this._intPt[0]=d,this._intPt[1]=i,!d.equals(i)||v||b?re.COLLINEAR_INTERSECTION:re.POINT_INTERSECTION):re.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,i,l,d){if(this._isProper=!1,!Xt.intersects(e,i,l,d))return re.NO_INTERSECTION;var v=kt.index(e,i,l),x=kt.index(e,i,d);if(v>0&&x>0||v<0&&x<0)return re.NO_INTERSECTION;var b=kt.index(l,d,e),P=kt.index(l,d,i);return b>0&&P>0||b<0&&P<0?re.NO_INTERSECTION:v===0&&x===0&&b===0&&P===0?this.computeCollinearIntersection(e,i,l,d):(v===0||x===0||b===0||P===0?(this._isProper=!1,e.equals2D(l)||e.equals2D(d)?this._intPt[0]=e:i.equals2D(l)||i.equals2D(d)?this._intPt[0]=i:v===0?this._intPt[0]=new A(l):x===0?this._intPt[0]=new A(d):b===0?this._intPt[0]=new A(e):P===0&&(this._intPt[0]=new A(i))):(this._isProper=!0,this._intPt[0]=this.intersection(e,i,l,d)),re.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,i,l,d){var v=e,x=nn.pointToSegment(e,l,d),b=nn.pointToSegment(i,l,d);return b<x&&(x=b,v=i),(b=nn.pointToSegment(l,e,i))<x&&(x=b,v=l),(b=nn.pointToSegment(d,e,i))<x&&(x=b,v=d),v}}])}(re),Vr=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var i=t.x,l=e.x;return i>l&&(i=e.x,l=t.x),this._p.x>=i&&this._p.x<=l&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var d=kt.index(t,e,this._p);if(d===kt.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(d=-d),d===kt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==k.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?k.BOUNDARY:this._crossingCount%2==1?k.INTERIOR:k.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof A&&Q(arguments[1],It)){for(var t=arguments[1],e=new r(arguments[0]),i=new A,l=new A,d=1;d<t.size();d++)if(t.getCoordinate(d,i),t.getCoordinate(d-1,l),e.countSegment(i,l),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof A&&arguments[1]instanceof Array){for(var v=arguments[1],x=new r(arguments[0]),b=1;b<v.length;b++){var P=v[b],O=v[b-1];if(x.countSegment(P,O),x.isOnSegment())return x.getLocation()}return x.getLocation()}}}])}(),fi=function(){function r(){a(this,r)}return p(r,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof A&&Q(arguments[1],It)){for(var t=arguments[0],e=arguments[1],i=new En,l=new A,d=new A,v=e.size(),x=1;x<v;x++)if(e.getCoordinate(x-1,l),e.getCoordinate(x,d),i.computeIntersection(t,l,d),i.hasIntersection())return!0;return!1}if(arguments[0]instanceof A&&arguments[1]instanceof Array){for(var b=arguments[0],P=arguments[1],O=new En,F=1;F<P.length;F++){var Y=P[F-1],ut=P[F];if(O.computeIntersection(b,Y,ut),O.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return Vr.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return r.locateInRing(t,e)!==k.EXTERIOR}}])}(),Ue=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==k.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===k.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[z.ON]=this.location[z.ON],e[z.LEFT]=k.NONE,e[z.RIGHT]=k.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===k.NONE&&i<t.location.length&&(this.location[i]=t.location[i])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[z.LEFT];this.location[z.LEFT]=this.location[z.RIGHT],this.location[z.RIGHT]=t}},{key:"toString",value:function(){var t=new Tt;return this.location.length>1&&t.append(k.toLocationSymbol(this.location[z.LEFT])),t.append(k.toLocationSymbol(this.location[z.ON])),this.location.length>1&&t.append(k.toLocationSymbol(this.location[z.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,i){this.location[z.ON]=t,this.location[z.LEFT]=e,this.location[z.RIGHT]=i}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:k.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===k.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(z.ON,t)}else if(arguments.length===2){var e=arguments[0],i=arguments[1];this.location[e]=i}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(k.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[z.ON]=e}else if(arguments[0]instanceof r){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var l=0;l<this.location.length;l++)this.location[l]=i.location[l]}}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.init(3),this.location[z.ON]=d,this.location[z.LEFT]=v,this.location[z.RIGHT]=x}}}])}(),ze=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],i=arguments[1];this.elt[e].setAllLocationsIfNull(i)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new Ue(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(z.ON)}if(arguments.length===2){var e=arguments[0],i=arguments[1];return this.elt[e].get(i)}}},{key:"toString",value:function(){var t=new Tt;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(z.ON,e)}else if(arguments.length===3){var i=arguments[0],l=arguments[1],d=arguments[2];this.elt[i].setLocation(l,d)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Ue(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ue(t),this.elt[1]=new Ue(t)}else if(arguments[0]instanceof r){var e=arguments[0];this.elt[0]=new Ue(e.elt[0]),this.elt[1]=new Ue(e.elt[1])}}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.elt[0]=new Ue(k.NONE),this.elt[1]=new Ue(k.NONE),this.elt[i].setLocation(l)}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this.elt[0]=new Ue(d,v,x),this.elt[1]=new Ue(d,v,x)}else if(arguments.length===4){var b=arguments[0],P=arguments[1],O=arguments[2],F=arguments[3];this.elt[0]=new Ue(k.NONE,k.NONE,k.NONE),this.elt[1]=new Ue(k.NONE,k.NONE,k.NONE),this.elt[b].setLocations(P,O,F)}}},{key:"toLineLabel",value:function(t){for(var e=new r(k.NONE),i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e}}])}(),ur=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var r=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)r[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(r),this._isHole=kt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(r){this._startDe=r;var t=r,e=!0;do{if(t===null)throw new be("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new be("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var i=t.getLabel();vt.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(r){return this._pts.get(r)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var r=this._startDe;do{var t=r.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),r=this.getNext(r)}while(r!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(r,t,e){var i=r.getCoordinates();if(t){var l=1;e&&(l=0);for(var d=l;d<i.length;d++)this._pts.add(i[d])}else{var v=i.length-2;e&&(v=i.length-1);for(var x=v;x>=0;x--)this._pts.add(i[x])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var r=this._startDe;do r.getEdge().setInResult(!0),r=r.getNext();while(r!==this._startDe)}},{key:"containsPoint",value:function(r){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(r)||!fi.isInRing(r,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(r))return!1;return!0}},{key:"addHole",value:function(r){this._holes.add(r)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var r=arguments[0];this.mergeLabel(r,0),this.mergeLabel(r,1)}else if(arguments.length===2){var t=arguments[1],e=arguments[0].getLocation(t,z.RIGHT);if(e===k.NONE)return null;if(this._label.getLocation(t)===k.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(r){this._shell=r,r!==null&&r.addHole(this)}},{key:"toPolygon",value:function(r){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return r.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new mt,this._pts=new mt,this._label=new ze(k.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new mt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var r=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(r),this.computeRing()}}}}])}(),At=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"setEdgeRing",value:function(e,i){e.setMinEdgeRing(i)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],i=arguments[1];ur.constructor_.call(this,e,i)}}])}(ur),dn=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"buildMinimalRings",value:function(){var e=new mt,i=this._startDe;do{if(i.getMinEdgeRing()===null){var l=new At(i,this._geometryFactory);e.add(l)}i=i.getNext()}while(i!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,i){e.setEdgeRing(i)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext();while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],i=arguments[1];ur.constructor_.call(this,e,i)}}])}(ur),se=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(r){this._isVisited=r}},{key:"setInResult",value:function(r){this._isInResult=r}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(r){this._label=r}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(r){this._isCovered=r,this._isCoveredSet=!0}},{key:"updateIM",value:function(r){vt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(r)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var r=arguments[0];this._label=r}}}}])}(),Ri=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,i){var l=k.NONE;if(l=this._label.getLocation(i),!e.isNull(i)){var d=e.getLocation(i);l!==k.BOUNDARY&&(l=d)}return l}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return R(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],i=arguments[1];this._label===null?this._label=new ze(e,i):this._label.setLocation(e,i)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof ze)for(var i=arguments[0],l=0;l<2;l++){var d=this.computeMergedLocation(i,l);this._label.getLocation(l)===k.NONE&&this._label.setLocation(l,d)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(this._label===null)return null;var i=k.NONE;this._label!==null&&(i=this._label.getLocation(e));var l=null;switch(i){case k.BOUNDARY:l=k.INTERIOR;break;case k.INTERIOR:default:l=k.BOUNDARY}this._label.setLocation(e,l)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],i=arguments[1];this._coord=e,this._edges=i,this._label=new ze(0,k.NONE)}}])}(se),Wr=function(r){function t(){return a(this,t),g(this,t,arguments)}return I(t,r),p(t)}(As);function lr(r){return r==null?0:r.color}function jt(r){return r==null?null:r.parent}function Ie(r,t){r!==null&&(r.color=t)}function Di(r){return r==null?null:r.left}function di(r){return r==null?null:r.right}var fe=function(r){function t(){var e;return a(this,t),(e=g(this,t)).root_=null,e.size_=0,e}return I(t,r),p(t,[{key:"get",value:function(e){for(var i=this.root_;i!==null;){var l=e.compareTo(i.key);if(l<0)i=i.left;else{if(!(l>0))return i.value;i=i.right}}return null}},{key:"put",value:function(e,i){if(this.root_===null)return this.root_={key:e,value:i,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var l,d,v=this.root_;do if(l=v,(d=e.compareTo(v.key))<0)v=v.left;else{if(!(d>0)){var x=v.value;return v.value=i,x}v=v.right}while(v!==null);var b={key:e,left:null,right:null,value:i,parent:l,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return d<0?l.left=b:l.right=b,this.fixAfterInsertion(b),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var i;for(e.color=1;e!=null&&e!==this.root_&&e.parent.color===1;)jt(e)===Di(jt(jt(e)))?lr(i=di(jt(jt(e))))===1?(Ie(jt(e),0),Ie(i,0),Ie(jt(jt(e)),1),e=jt(jt(e))):(e===di(jt(e))&&(e=jt(e),this.rotateLeft(e)),Ie(jt(e),0),Ie(jt(jt(e)),1),this.rotateRight(jt(jt(e)))):lr(i=Di(jt(jt(e))))===1?(Ie(jt(e),0),Ie(i,0),Ie(jt(jt(e)),1),e=jt(jt(e))):(e===Di(jt(e))&&(e=jt(e),this.rotateRight(e)),Ie(jt(e),0),Ie(jt(jt(e)),1),this.rotateLeft(jt(jt(e))));this.root_.color=0}},{key:"values",value:function(){var e=new mt,i=this.getFirstEntry();if(i!==null)for(e.add(i.value);(i=t.successor(i))!==null;)e.add(i.value);return e}},{key:"entrySet",value:function(){var e=new $,i=this.getFirstEntry();if(i!==null)for(e.add(i);(i=t.successor(i))!==null;)e.add(i);return e}},{key:"rotateLeft",value:function(e){if(e!=null){var i=e.right;e.right=i.left,i.left!=null&&(i.left.parent=e),i.parent=e.parent,e.parent==null?this.root_=i:e.parent.left===e?e.parent.left=i:e.parent.right=i,i.left=e,e.parent=i}}},{key:"rotateRight",value:function(e){if(e!=null){var i=e.left;e.left=i.right,i.right!=null&&(i.right.parent=e),i.parent=e.parent,e.parent==null?this.root_=i:e.parent.right===e?e.parent.right=i:e.parent.left=i,i.right=e,e.parent=i}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var i=this.root_;i!==null;){var l=e.compareTo(i.key);if(l<0)i=i.left;else{if(!(l>0))return!0;i=i.right}}return!1}}],[{key:"successor",value:function(e){var i;if(e===null)return null;if(e.right!==null){for(i=e.right;i.left!==null;)i=i.left;return i}i=e.parent;for(var l=e;i!==null&&l===i.right;)l=i,i=i.parent;return i}}])}(Wr),On=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"find",value:function(r){return this.nodeMap.get(r)}},{key:"addNode",value:function(){if(arguments[0]instanceof A){var r=arguments[0],t=this.nodeMap.get(r);return t===null&&(t=this.nodeFact.createNode(r),this.nodeMap.put(r,t)),t}if(arguments[0]instanceof Ri){var e=arguments[0],i=this.nodeMap.get(e.getCoordinate());return i===null?(this.nodeMap.put(e.getCoordinate(),e),e):(i.mergeLabel(e),i)}}},{key:"print",value:function(r){for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(r){for(var t=new mt,e=this.iterator();e.hasNext();){var i=e.next();i.getLabel().getLocation(r)===k.BOUNDARY&&t.add(i)}return t}},{key:"add",value:function(r){var t=r.getCoordinate();this.addNode(t).add(r)}}],[{key:"constructor_",value:function(){this.nodeMap=new fe,this.nodeFact=null;var r=arguments[0];this.nodeFact=r}}])}(),Se=function(){function r(){a(this,r)}return p(r,null,[{key:"isNorthern",value:function(t){return t===r.NE||t===r.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4===2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4===2)return-1;var i=t<e?t:e;return i===0&&(t>e?t:e)===3?3:i}},{key:"isInHalfPlane",value:function(t,e){return e===r.SE?t===r.SE||t===r.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new tt("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?r.NE:r.SE:e>=0?r.NW:r.SW}if(arguments[0]instanceof A&&arguments[1]instanceof A){var i=arguments[0],l=arguments[1];if(l.x===i.x&&l.y===i.y)throw new tt("Cannot compute the quadrant for two identical points "+i);return l.x>=i.x?l.y>=i.y?r.NE:r.SE:l.y>=i.y?r.NW:r.SW}}}])}();Se.NE=0,Se.NW=1,Se.SW=2,Se.SE=3;var Xr=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:kt.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),l=i.lastIndexOf("."),d=i.substring(l+1);t.print("  "+d+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Se.quadrant(this._dx,this._dy),vt.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],i=arguments[1],l=arguments[2];r.constructor_.call(this,e,i,l,null)}else if(arguments.length===4){var d=arguments[0],v=arguments[1],x=arguments[2],b=arguments[3];r.constructor_.call(this,d),this.init(v,x),this._label=b}}}])}(),jr=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new ze(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,i){if(this._depth[e]!==-999&&this._depth[e]!==i)throw new be("assigned depths do not match",this.getCoordinate());this._depth[e]=i}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,i=0;i<2;i++)this._label.isArea(i)&&this._label.getLocation(i,z.LEFT)===k.INTERIOR&&this._label.getLocation(i,z.RIGHT)===k.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){R(t,"print",this,1).call(this,e),e.print(" "+this._depth[z.LEFT]+"/"+this._depth[z.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,k.EXTERIOR),l=!this._label.isArea(1)||this._label.allPositionsEqual(1,k.EXTERIOR);return e&&i&&l}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,i){var l=this.getEdge().getDepthDelta();this._isForward||(l=-l);var d=1;e===z.LEFT&&(d=-1);var v=z.opposite(e),x=i+l*d;this.setDepth(e,i),this.setDepth(v,x)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],i=arguments[1];if(Xr.constructor_.call(this,e),this._isForward=i,i)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var l=e.getNumPoints()-1;this.init(e.getCoordinate(l),e.getCoordinate(l-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,i){return e===k.EXTERIOR&&i===k.INTERIOR?1:e===k.INTERIOR&&i===k.EXTERIOR?-1:0}}])}(Xr),Kr=function(){return p(function r(){a(this,r)},[{key:"createNode",value:function(r){return new Ri(r,null)}}])}(),hr=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(r){r.println("Edges:");for(var t=0;t<this._edges.size();t++){r.println("edge "+t+":");var e=this._edges.get(t);e.print(r),e.eiList.print(r)}}},{key:"find",value:function(r){return this._nodes.find(r)}},{key:"addNode",value:function(){if(arguments[0]instanceof Ri){var r=arguments[0];return this._nodes.addNode(r)}if(arguments[0]instanceof A){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var r=this._nodes.iterator();r.hasNext();)r.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(r){Je.out.println(r)}},{key:"isBoundaryNode",value:function(r,t){var e=this._nodes.find(t);if(e===null)return!1;var i=e.getLabel();return i!==null&&i.getLocation(r)===k.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var r=this._nodes.iterator();r.hasNext();)r.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(r,t,e,i){return!!r.equals(e)&&kt.index(r,t,i)===kt.COLLINEAR&&Se.quadrant(r,t)===Se.quadrant(e,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(r){Je.out.print(r)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(r,t){for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e),l=i.getCoordinates();if(this.matchInSameDirection(r,t,l[0],l[1])||this.matchInSameDirection(r,t,l[l.length-1],l[l.length-2]))return i}return null}},{key:"insertEdge",value:function(r){this._edges.add(r)}},{key:"findEdgeEnd",value:function(r){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===r)return e}return null}},{key:"addEdges",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var i=new jr(e,!0),l=new jr(e,!1);i.setSym(l),l.setSym(i),this.add(i),this.add(l)}}},{key:"add",value:function(r){this._nodes.add(r),this._edgeEndList.add(r)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(r,t){for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e),l=i.getCoordinates();if(r.equals(l[0])&&t.equals(l[1]))return i}return null}}],[{key:"constructor_",value:function(){if(this._edges=new mt,this._nodes=null,this._edgeEndList=new mt,arguments.length===0)this._nodes=new On(new Kr);else if(arguments.length===1){var r=arguments[0];this._nodes=new On(r)}}},{key:"linkResultDirectedEdges",value:function(r){for(var t=r.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}])}(),Go=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"sortShellsAndHoles",value:function(t,e,i){for(var l=t.iterator();l.hasNext();){var d=l.next();d.isHole()?i.add(d):e.add(d)}}},{key:"computePolygons",value:function(t){for(var e=new mt,i=t.iterator();i.hasNext();){var l=i.next().toPolygon(this._geometryFactory);e.add(l)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var i=e.iterator();i.hasNext();){var l=i.next();if(l.getShell()===null){var d=r.findEdgeRingContaining(l,t);if(d===null)throw new be("unable to assign hole to a shell",l.getCoordinate(0));l.setShell(d)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,i){for(var l=new mt,d=t.iterator();d.hasNext();){var v=d.next();if(v.getMaxNodeDegree()>2){v.linkDirectedEdgesForMinimalEdgeRings();var x=v.buildMinimalRings(),b=this.findShell(x);b!==null?(this.placePolygonHoles(b,x),e.add(b)):i.addAll(x)}else l.add(v)}return l}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new mt,i=t.iterator();i.hasNext();){var l=i.next();if(l.isInResult()&&l.getLabel().isArea()&&l.getEdgeRing()===null){var d=new dn(l,this._geometryFactory);e.add(d),d.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var i=e.iterator();i.hasNext();){var l=i.next();l.isHole()&&l.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,i=null,l=t.iterator();l.hasNext();){var d=l.next();d.isHole()||(i=d,e++)}return vt.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i}},{key:"add",value:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],i=arguments[1];hr.linkResultDirectedEdges(i);var l=this.buildMaximalEdgeRings(e),d=new mt,v=this.buildMinimalEdgeRings(l,this._shellList,d);this.sortShellsAndHoles(v,this._shellList,d),this.placeFreeHoles(this._shellList,d)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new mt;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var i=t.getLinearRing(),l=i.getEnvelopeInternal(),d=i.getCoordinateN(0),v=null,x=null,b=e.iterator();b.hasNext();){var P=b.next(),O=P.getLinearRing(),F=O.getEnvelopeInternal();if(!F.equals(l)&&F.contains(l)){d=me.ptNotInList(i.getCoordinates(),O.getCoordinates());var Y=!1;fi.isInRing(d,O.getCoordinates())&&(Y=!0),Y&&(v===null||x.contains(F))&&(x=(v=P).getLinearRing().getEnvelopeInternal())}}return v}}])}(),$r=function(){return p(function r(){a(this,r)},[{key:"getBounds",value:function(){}}])}(),zt=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[$r,ft]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var r=arguments[0],t=arguments[1];this._bounds=r,this._item=t}}])}(),cr=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var r=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),r}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(r){for(var t=null,e=this._items.get(r);2*r<=this._size&&((t=2*r)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);r=t)this._items.set(r,this._items.get(t));this._items.set(r,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(r){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,r);r.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,r)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new mt,this._items.add(null)}}])}(),rn=function(){return p(function r(){a(this,r)},[{key:"insert",value:function(r,t){}},{key:"remove",value:function(r,t){}},{key:"query",value:function(){}}])}(),Pe=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(r){vt.isTrue(this._bounds===null),this._childBoundables.add(r)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[$r,ft]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new mt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var r=arguments[0];this._level=r}}}}])}(),$n={reverseOrder:function(){return{compare:function(r,t){return t.compareTo(r)}}},min:function(r){return $n.sort(r),r.get(0)},sort:function(r,t){var e=r.toArray();t?Te.sort(e,t):Te.sort(e);for(var i=r.iterator(),l=0,d=e.length;l<d;l++)i.next(),i.set(e[l])},singletonList:function(r){var t=new mt;return t.add(r),t}},Uo=function(){function r(){a(this,r)}return p(r,null,[{key:"maxDistance",value:function(t,e,i,l,d,v,x,b){var P=r.distance(t,e,d,v);return P=Math.max(P,r.distance(t,e,x,b)),P=Math.max(P,r.distance(i,l,d,v)),P=Math.max(P,r.distance(i,l,x,b))}},{key:"distance",value:function(t,e,i,l){var d=i-t,v=l-e;return Math.sqrt(d*d+v*v)}},{key:"maximumDistance",value:function(t,e){var i=Math.min(t.getMinX(),e.getMinX()),l=Math.min(t.getMinY(),e.getMinY()),d=Math.max(t.getMaxX(),e.getMaxX()),v=Math.max(t.getMaxY(),e.getMaxY());return r.distance(i,l,d,v)}},{key:"minMaxDistance",value:function(t,e){var i=t.getMinX(),l=t.getMinY(),d=t.getMaxX(),v=t.getMaxY(),x=e.getMinX(),b=e.getMinY(),P=e.getMaxX(),O=e.getMaxY(),F=r.maxDistance(i,l,i,v,x,b,x,O);return F=Math.min(F,r.maxDistance(i,l,i,v,x,b,P,b)),F=Math.min(F,r.maxDistance(i,l,i,v,P,O,x,O)),F=Math.min(F,r.maxDistance(i,l,i,v,P,O,P,b)),F=Math.min(F,r.maxDistance(i,l,d,l,x,b,x,O)),F=Math.min(F,r.maxDistance(i,l,d,l,x,b,P,b)),F=Math.min(F,r.maxDistance(i,l,d,l,P,O,x,O)),F=Math.min(F,r.maxDistance(i,l,d,l,P,O,P,b)),F=Math.min(F,r.maxDistance(d,v,i,v,x,b,x,O)),F=Math.min(F,r.maxDistance(d,v,i,v,x,b,P,b)),F=Math.min(F,r.maxDistance(d,v,i,v,P,O,x,O)),F=Math.min(F,r.maxDistance(d,v,i,v,P,O,P,b)),F=Math.min(F,r.maxDistance(d,v,d,l,x,b,x,O)),F=Math.min(F,r.maxDistance(d,v,d,l,x,b,P,b)),F=Math.min(F,r.maxDistance(d,v,d,l,P,O,x,O)),F=Math.min(F,r.maxDistance(d,v,d,l,P,O,P,b))}}])}(),Rn=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"maximumDistance",value:function(){return Uo.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var i=r.isComposite(this._boundable1),l=r.isComposite(this._boundable2);if(i&&l)return r.area(this._boundable1)>r.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(l)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new tt("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(r.isComposite(this._boundable1)||r.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,e,i,l,d){for(var v=t.getChildBoundables().iterator();v.hasNext();){var x=v.next(),b=null;(b=i?new r(e,x,this._itemDistance):new r(x,e,this._itemDistance)).getDistance()<d&&l.add(b)}}},{key:"getBoundable",value:function(t){return t===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Pe}}])}(),zs=function(){return p(function r(){a(this,r)},[{key:"visitItem",value:function(r){}}])}(),Jn=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"queryInternal",value:function(){if(Q(arguments[2],zs)&&arguments[0]instanceof Object&&arguments[1]instanceof Pe)for(var t=arguments[0],e=arguments[2],i=arguments[1].getChildBoundables(),l=0;l<i.size();l++){var d=i.get(l);this.getIntersectsOp().intersects(d.getBounds(),t)&&(d instanceof Pe?this.queryInternal(t,d,e):d instanceof zt?e.visitItem(d.getItem()):vt.shouldNeverReachHere())}else if(Q(arguments[2],Lt)&&arguments[0]instanceof Object&&arguments[1]instanceof Pe)for(var v=arguments[0],x=arguments[2],b=arguments[1].getChildBoundables(),P=0;P<b.size();P++){var O=b.get(P);this.getIntersectsOp().intersects(O.getBounds(),v)&&(O instanceof Pe?this.queryInternal(v,O,x):O instanceof zt?x.add(O.getItem()):vt.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();i instanceof Pe?t+=this.size(i):i instanceof zt&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var i=null,l=t.getChildBoundables().iterator();l.hasNext();){var d=l.next();d instanceof zt&&d.getItem()===e&&(i=d)}return i!==null&&(t.getChildBoundables().remove(i),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new mt:t}if(arguments.length===1){for(var e=arguments[0],i=new mt,l=e.getChildBoundables().iterator();l.hasNext();){var d=l.next();if(d instanceof Pe){var v=this.itemsTree(d);v!==null&&i.add(v)}else d instanceof zt?i.add(d.getItem()):vt.shouldNeverReachHere()}return i.size()<=0?null:i}}},{key:"insert",value:function(t,e){vt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new zt(t,e))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var t=arguments[0],e=new mt;return this.boundablesAtLevel(t,this._root,e),e}if(arguments.length===3){var i=arguments[0],l=arguments[1],d=arguments[2];if(vt.isTrue(i>-2),l.getLevel()===i)return d.add(l),null;for(var v=l.getChildBoundables().iterator();v.hasNext();){var x=v.next();x instanceof Pe?this.boundablesAtLevel(i,x,d):(vt.isTrue(x instanceof zt),i===-1&&d.add(x))}return null}}},{key:"query",value:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new mt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(arguments.length===2){var i=arguments[0],l=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.queryInternal(i,this._root,l)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(arguments.length===3){var i=arguments[0],l=arguments[1],d=arguments[2],v=this.removeItem(l,d);if(v)return!0;for(var x=null,b=l.getChildBoundables().iterator();b.hasNext();){var P=b.next();if(this.getIntersectsOp().intersects(P.getBounds(),i)&&P instanceof Pe&&(v=this.remove(i,P,d))){x=P;break}}return x!==null&&x.getChildBoundables().isEmpty()&&l.getChildBoundables().remove(x),v}}},{key:"createHigherLevels",value:function(t,e){vt.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,e+1);return i.size()===1?i.get(0):this.createHigherLevels(i,e+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();if(i instanceof Pe){var l=this.depth(i);l>t&&(t=l)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){vt.isTrue(!t.isEmpty());var i=new mt;i.add(this.createNode(e));var l=new mt(t);$n.sort(l,this.getComparator());for(var d=l.iterator();d.hasNext();){var v=d.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(v)}return i}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[ft]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new mt,this._nodeCapacity=null,arguments.length===0)r.constructor_.call(this,r.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];vt.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();Jn.IntersectsOp=function(){},Jn.DEFAULT_NODE_CAPACITY=10;var Zo=function(){return p(function r(){a(this,r)},[{key:"distance",value:function(r,t){}}])}(),gn=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,i){vt.isTrue(e.length>0);for(var l=new mt,d=0;d<e.length;d++)l.addAll(this.createParentBoundablesFromVerticalSlice(e[d],i));return l}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var e=arguments[0],i=arguments[1];return this.nearestNeighbourK(e,q.POSITIVE_INFINITY,i)}if(arguments.length===3){var l=arguments[0],d=arguments[2],v=arguments[1],x=new cr;x.add(l);for(var b=new cr;!x.isEmpty()&&v>=0;){var P=x.poll(),O=P.getDistance();if(O>=v)break;P.isLeaves()?b.size()<d?b.add(P):(b.peek().getDistance()>O&&(b.poll(),b.add(P)),v=b.peek().getDistance()):P.expandToQueue(x,v)}return t.getItems(b)}}},{key:"createNode",value:function(e){return new fr(e)}},{key:"size",value:function(){return arguments.length===0?R(t,"size",this,1).call(this):R(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Xt))return R(t,"insert",this,1).apply(this,arguments);var e=arguments[0],i=arguments[1];if(e.isNull())return null;R(t,"insert",this,1).call(this,e,i)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,i){for(var l=Math.trunc(Math.ceil(e.size()/i)),d=new Array(i).fill(null),v=e.iterator(),x=0;x<i;x++){d[x]=new mt;for(var b=0;v.hasNext()&&b<l;){var P=v.next();d[x].add(P),b++}}return d}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];return R(t,"query",this,1).call(this,e)}if(arguments.length===2){var i=arguments[0],l=arguments[1];R(t,"query",this,1).call(this,i,l)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,i){return R(t,"createParentBoundables",this,1).call(this,e,i)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Xt){var e=arguments[0],i=arguments[1];return R(t,"remove",this,1).call(this,e,i)}return R(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?R(t,"depth",this,1).call(this):R(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,i){vt.isTrue(!e.isEmpty());var l=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),d=new mt(e);$n.sort(d,t.xComparator);var v=this.verticalSlices(d,Math.trunc(Math.ceil(Math.sqrt(l))));return this.createParentBoundablesFromVerticalSlices(v,i)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Q(arguments[0],Zo)){var e=arguments[0];if(this.isEmpty())return null;var i=new Rn(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(i)}if(arguments[0]instanceof Rn){var l=arguments[0],d=q.POSITIVE_INFINITY,v=null,x=new cr;for(x.add(l);!x.isEmpty()&&d>0;){var b=x.poll(),P=b.getDistance();if(P>=d)break;b.isLeaves()?(d=P,v=b):b.expandToQueue(x,d)}return v===null?null:[v.getBoundable(0).getItem(),v.getBoundable(1).getItem()]}}else{if(arguments.length===2){var O=arguments[0],F=arguments[1];if(this.isEmpty()||O.isEmpty())return null;var Y=new Rn(this.getRoot(),O.getRoot(),F);return this.nearestNeighbour(Y)}if(arguments.length===3){var ut=arguments[2],pt=new zt(arguments[0],arguments[1]),Et=new Rn(this.getRoot(),pt,ut);return this.nearestNeighbour(Et)[0]}if(arguments.length===4){var Wt=arguments[2],Zt=arguments[3],oe=new zt(arguments[0],arguments[1]),ce=new Rn(this.getRoot(),oe,Wt);return this.nearestNeighbourK(ce,Zt)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var e=arguments[0],i=arguments[1],l=q.POSITIVE_INFINITY,d=new cr;for(d.add(e);!d.isEmpty();){var v=d.poll(),x=v.getDistance();if(x>i)return!1;if(v.maximumDistance()<=i)return!0;if(v.isLeaves()){if((l=x)<=i)return!0}else v.expandToQueue(d,l)}return!1}if(arguments.length===3){var b=arguments[0],P=arguments[1],O=arguments[2],F=new Rn(this.getRoot(),b.getRoot(),P);return this.isWithinDistance(F,O)}}},{key:"interfaces_",get:function(){return[rn,ft]}}],[{key:"constructor_",value:function(){if(arguments.length===0)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];Jn.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,i){return(e+i)/2}},{key:"getItems",value:function(e){for(var i=new Array(e.size()).fill(null),l=0;!e.isEmpty();){var d=e.poll();i[l]=d.getBoundable(0).getItem(),l++}return i}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(Jn),fr=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"computeBounds",value:function(){for(var e=null,i=this.getChildBoundables().iterator();i.hasNext();){var l=i.next();e===null?e=new Xt(l.getBounds()):e.expandToInclude(l.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];Pe.constructor_.call(this,e)}}])}(Pe);gn.STRtreeNode=fr,gn.xComparator=new(function(){return p(function r(){a(this,r)},[{key:"interfaces_",get:function(){return[Ct]}},{key:"compare",value:function(r,t){return Jn.compareDoubles(gn.centreX(r.getBounds()),gn.centreX(t.getBounds()))}}])}()),gn.yComparator=new(function(){return p(function r(){a(this,r)},[{key:"interfaces_",get:function(){return[Ct]}},{key:"compare",value:function(r,t){return Jn.compareDoubles(gn.centreY(r.getBounds()),gn.centreY(t.getBounds()))}}])}()),gn.intersectsOp=new(function(){return p(function r(){a(this,r)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(r,t){return r.intersects(t)}}])}()),gn.DEFAULT_NODE_CAPACITY=10;var Ho=function(){function r(){a(this,r)}return p(r,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,i){if(e.equals2D(i))return 0;var l=r.relativeSign(e.x,i.x),d=r.relativeSign(e.y,i.y);switch(t){case 0:return r.compareValue(l,d);case 1:return r.compareValue(d,l);case 2:return r.compareValue(d,-l);case 3:return r.compareValue(-l,d);case 4:return r.compareValue(-l,-d);case 5:return r.compareValue(-d,-l);case 6:return r.compareValue(-d,l);case 7:return r.compareValue(l,-d)}return vt.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),_n=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(r){r.print(this.coord),r.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(r){var t=r;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?Ho.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(r){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===r}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var r=arguments[0],t=arguments[1],e=arguments[2],i=arguments[3];this._segString=r,this.coord=new A(t),this.segmentIndex=e,this._segmentOctant=i,this._isInterior=!t.equals2D(r.getCoordinate(e))}}])}(),qo=function(){return p(function r(){a(this,r)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Fs=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var r=new Ci;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var i=t.next();this.addEdgeCoordinates(e,i,r),e=i}return r.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var r=new mt;this.findCollapsesFromInsertedNodes(r),this.findCollapsesFromExistingVertices(r);for(var t=r.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(r,t){var e=t.segmentIndex-r.segmentIndex+2;if(e===2)return[new A(r.coord),new A(t.coord)];var i=this._edge.getCoordinate(t.segmentIndex),l=t.isInterior()||!t.coord.equals2D(i);l||e--;var d=new Array(e).fill(null),v=0;d[v++]=new A(r.coord);for(var x=r.segmentIndex+1;x<=t.segmentIndex;x++)d[v++]=this._edge.getCoordinate(x);return l&&(d[v]=new A(t.coord)),d}},{key:"print",value:function(r){r.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"findCollapsesFromExistingVertices",value:function(r){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var i=this._edge.getCoordinate(t+2);e.equals2D(i)&&r.add(Gt.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(r,t,e){var i=this.createSplitEdgePts(r,t);e.add(i,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(r){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var i=t.next(),l=this.createSplitEdge(e,i);r.add(l),e=i}}},{key:"findCollapseIndex",value:function(r,t,e){if(!r.coord.equals2D(t.coord))return!1;var i=t.segmentIndex-r.segmentIndex;return t.isInterior()||i--,i===1&&(e[0]=r.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(r){for(var t=new Array(1).fill(null),e=this.iterator(),i=e.next();e.hasNext();){var l=e.next();this.findCollapseIndex(i,l,t)&&r.add(Gt.valueOf(t[0])),i=l}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var r=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(r),r)}},{key:"createSplitEdge",value:function(r,t){var e=this.createSplitEdgePts(r,t);return new bn(e,this._edge.getData())}},{key:"add",value:function(r,t){var e=new _n(this._edge,r,t,this._edge.getSegmentOctant(t)),i=this._nodeMap.get(e);return i!==null?(vt.isTrue(i.coord.equals2D(r),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(r){var t=this._edge.getCoordinates(),e=r.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new Dt("bad split edge start point at "+e);var i=r.get(r.size()-1).getCoordinates(),l=i[i.length-1];if(!l.equals2D(t[t.length-1]))throw new Dt("bad split edge end point at "+l)}}],[{key:"constructor_",value:function(){this._nodeMap=new fe,this._edge=null;var r=arguments[0];this._edge=r}}])}(),Dn=function(){function r(){a(this,r)}return p(r,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new tt("Cannot compute the octant for point ( "+t+", "+e+" )");var i=Math.abs(t),l=Math.abs(e);return t>=0?e>=0?i>=l?0:1:i>=l?7:6:e>=0?i>=l?3:2:i>=l?4:5}if(arguments[0]instanceof A&&arguments[1]instanceof A){var d=arguments[0],v=arguments[1],x=v.x-d.x,b=v.y-d.y;if(x===0&&b===0)throw new tt("Cannot compute the octant for two identical points "+d);return r.octant(x,b)}}}])}(),Bs=function(){return p(function r(){a(this,r)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(r){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(r){}},{key:"getData",value:function(){}}])}(),Gs=function(){return p(function r(){a(this,r)},[{key:"addIntersection",value:function(r,t){}},{key:"interfaces_",get:function(){return[Bs]}}])}(),bn=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:Dn.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var i=arguments[1],l=arguments[3],d=new A(arguments[0].getIntersection(l));this.addIntersection(d,i)}}},{key:"toString",value:function(){return Oi.toLineString(new Mi(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var i=e,l=i+1;if(l<this._pts.length){var d=this._pts[l];t.equals2D(d)&&(i=l)}return this._nodeList.add(t,i)}},{key:"addIntersections",value:function(t,e,i){for(var l=0;l<t.getIntersectionNum();l++)this.addIntersection(t,e,i,l)}},{key:"interfaces_",get:function(){return[Gs]}}],[{key:"constructor_",value:function(){this._nodeList=new Fs(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var t=arguments[0],e=new mt;return r.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var i=arguments[1],l=arguments[0].iterator();l.hasNext();)l.next().getNodeList().addSplitEdges(i)}}])}(),Ze=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof r){var t=arguments[0],e=kt.index(this.p0,this.p1,t.p0),i=kt.index(this.p0,this.p1,t.p1);return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof A){var l=arguments[0];return kt.index(this.p0,this.p1,l)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new En;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof A){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new A(t);var e=this.projectionFactor(t),i=new A;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof r){var l=arguments[0],d=this.projectionFactor(l.p0),v=this.projectionFactor(l.p1);if(d>=1&&v>=1||d<=0&&v<=0)return null;var x=this.project(l.p0);d<0&&(x=this.p0),d>1&&(x=this.p1);var b=this.project(l.p1);return v<0&&(b=this.p0),v>1&&(b=this.p1),new r(x,b)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return t===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return nn.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return r.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,l=e*e+i*i;return l<=0?q.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/l}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var i=new Array(2).fill(null),l=q.MAX_VALUE,d=null,v=this.closestPoint(t.p0);l=v.distance(t.p0),i[0]=v,i[1]=t.p0;var x=this.closestPoint(t.p1);(d=x.distance(t.p1))<l&&(l=d,i[0]=x,i[1]=t.p1);var b=t.closestPoint(this.p0);(d=b.distance(this.p0))<l&&(l=d,i[0]=this.p0,i[1]=b);var P=t.closestPoint(this.p1);return(d=P.distance(this.p1))<l&&(l=d,i[0]=this.p1,i[1]=P),i}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,i=this.p0.compareTo(e.p0);return i!==0?i:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return Ar.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),l=this.p0.y+t*(this.p1.y-this.p0.y),d=this.p1.x-this.p0.x,v=this.p1.y-this.p0.y,x=Math.sqrt(d*d+v*v),b=0,P=0;if(e!==0){if(x<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");b=e*d/x,P=e*v/x}return new A(i-P,l+b)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],i=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||q.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),i=this.p0.getX()-this.p1.getX(),l=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),d=e*e+i*i,v=e*e-i*i,x=t.getX(),b=t.getY();return new A((-v*x-2*e*i*b-2*e*l)/d,(v*b-2*e*i*x-2*i*l)/d)}},{key:"distance",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return nn.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof A){var e=arguments[0];return nn.pointToSegment(e,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new A;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=q.doubleToLongBits(this.p0.x);t^=31*q.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),i=q.doubleToLongBits(this.p1.x);return i^=31*q.doubleToLongBits(this.p1.y),e^(Math.trunc(i)^Math.trunc(i>>32))}},{key:"interfaces_",get:function(){return[et,ft]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)r.constructor_.call(this,new A,new A);else if(arguments.length===1){var t=arguments[0];r.constructor_.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],i=arguments[1];this.p0=e,this.p1=i}else if(arguments.length===4){var l=arguments[0],d=arguments[1],v=arguments[2],x=arguments[3];r.constructor_.call(this,new A(l,d),new A(v,x))}}},{key:"midPoint",value:function(t,e){return new A((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),Us=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var r=arguments[1],t=arguments[2],e=arguments[3];arguments[0].getLineSegment(r,this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Ze,this._overlapSeg2=new Ze}}])}(),Jr=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(r,t){t.p0=this._pts[r],t.p1=this._pts[r+1]}},{key:"computeSelect",value:function(r,t,e,i){var l=this._pts[t],d=this._pts[e];if(e-t==1)return i.select(this,t),null;if(!r.intersects(l,d))return null;var v=Math.trunc((t+e)/2);t<v&&this.computeSelect(r,t,v,i),v<e&&this.computeSelect(r,v,e,i)}},{key:"getCoordinates",value:function(){for(var r=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)r[t++]=this._pts[e];return r}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var r=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,r,r._start,r._end,t)}else if(arguments.length===6){var e=arguments[0],i=arguments[1],l=arguments[2],d=arguments[3],v=arguments[4],x=arguments[5];if(i-e==1&&v-d==1)return x.overlap(this,e,l,d),null;if(!this.overlaps(e,i,l,d,v))return null;var b=Math.trunc((e+i)/2),P=Math.trunc((d+v)/2);e<b&&(d<P&&this.computeOverlaps(e,b,l,d,P,x),P<v&&this.computeOverlaps(e,b,l,P,v,x)),b<i&&(d<P&&this.computeOverlaps(b,i,l,d,P,x),P<v&&this.computeOverlaps(b,i,l,P,v,x))}}},{key:"setId",value:function(r){this._id=r}},{key:"select",value:function(r,t){this.computeSelect(r,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(this._env===null){var r=this._pts[this._start],t=this._pts[this._end];this._env=new Xt(r,t)}return this._env}},{key:"overlaps",value:function(r,t,e,i,l){return Xt.intersects(this._pts[r],this._pts[t],e._pts[i],e._pts[l])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var r=arguments[0],t=arguments[1],e=arguments[2],i=arguments[3];this._pts=r,this._start=t,this._end=e,this._context=i}}])}(),Yo=function(){function r(){a(this,r)}return p(r,null,[{key:"findChainEnd",value:function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var l=Se.quadrant(t[i],t[i+1]),d=e+1;d<t.length&&!(!t[d-1].equals2D(t[d])&&Se.quadrant(t[d-1],t[d])!==l);)d++;return d-1}},{key:"getChains",value:function(){if(arguments.length===1){var t=arguments[0];return r.getChains(t,null)}if(arguments.length===2){var e=arguments[0],i=arguments[1],l=new mt,d=0;do{var v=r.findChainEnd(e,d),x=new Jr(e,d,v,i);l.add(x),d=v}while(d<e.length-1);return l}}}])}(),Qr=function(){return p(function r(){a(this,r)},[{key:"computeNodes",value:function(r){}},{key:"getNodedSubstrings",value:function(){}}])}(),dr=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(r){this._segInt=r}},{key:"interfaces_",get:function(){return[Qr]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.setSegmentIntersector(r)}}}}])}(),ts=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return bn.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var i=Yo.getChains(e.getCoordinates(),e).iterator();i.hasNext();){var l=i.next();l.setId(this._idCounter++),this._index.insert(l.getEnvelope(),l),this._monoChains.add(l)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var i=e.iterator();i.hasNext();)this.add(i.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new es(this._segInt),i=this._monoChains.iterator();i.hasNext();)for(var l=i.next(),d=this._index.query(l.getEnvelope()).iterator();d.hasNext();){var v=d.next();if(v.getId()>l.getId()&&(l.computeOverlaps(v,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new mt,this._index=new gn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var e=arguments[0];dr.constructor_.call(this,e)}}}}])}(dr),es=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"overlap",value:function(){if(arguments.length!==4)return R(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],i=arguments[2],l=arguments[3],d=arguments[0].getContext(),v=i.getContext();this._si.processIntersections(d,e,v,l)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}])}(Us);ts.SegmentOverlapAction=es;var Qe=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"isDeletable",value:function(t,e,i,l){var d=this._inputLine[t],v=this._inputLine[e],x=this._inputLine[i];return!!this.isConcave(d,v,x)&&!!this.isShallow(d,v,x,l)&&this.isShallowSampled(d,v,t,i,l)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e),l=!1;i<this._inputLine.length;){var d=!1;this.isDeletable(t,e,i,this._distanceTol)&&(this._isDeleted[e]=r.DELETE,d=!0,l=!0),t=d?i:e,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e)}return l}},{key:"isShallowConcavity",value:function(t,e,i,l){return kt.index(t,e,i)===this._angleOrientation&&nn.pointToSegment(e,t,i)<l}},{key:"isShallowSampled",value:function(t,e,i,l,d){var v=Math.trunc((l-i)/r.NUM_PTS_TO_CHECK);v<=0&&(v=1);for(var x=i;x<l;x+=v)if(!this.isShallow(t,e,this._inputLine[x],d))return!1;return!0}},{key:"isConcave",value:function(t,e,i){var l=kt.index(t,e,i)===this._angleOrientation;return l}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=kt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===r.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,i,l){return nn.pointToSegment(e,t,i)<l}},{key:"collapseLine",value:function(){for(var t=new Ci,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==r.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=kt.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,e){return new r(t).simplify(e)}}])}();Qe.INIT=0,Qe.DELETE=1,Qe.KEEP=1,Qe.NUM_PTS_TO_CHECK=10;var Ai=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getCoordinates",value:function(){return this._ptList.toArray(r.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new A(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(var l=t.length-1;l>=0;l--)this.addPt(t[l])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return new cn().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new A(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new mt}}])}();Ai.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var ye=function(){function r(){a(this,r)}return p(r,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=r.PI_TIMES_2;for(;t<=-Math.PI;)t+=r.PI_TIMES_2;return t}},{key:"angle",value:function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],i=arguments[1],l=i.x-e.x,d=i.y-e.y;return Math.atan2(d,l)}}},{key:"isAcute",value:function(t,e,i){var l=t.x-e.x,d=t.y-e.y;return l*(i.x-e.x)+d*(i.y-e.y)>0}},{key:"isObtuse",value:function(t,e,i){var l=t.x-e.x,d=t.y-e.y;return l*(i.x-e.x)+d*(i.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,i){var l=r.angle(e,t),d=r.angle(e,i);return Math.abs(d-l)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=r.PI_TIMES_2;t>=r.PI_TIMES_2&&(t=0)}else{for(;t>=r.PI_TIMES_2;)t-=r.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,i){var l=r.angle(e,t),d=r.angle(e,i);return r.diff(l,d)}},{key:"diff",value:function(t,e){var i=null;return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var i=Math.sin(e-t);return i>0?r.COUNTERCLOCKWISE:i<0?r.CLOCKWISE:r.NONE}},{key:"angleBetweenOriented",value:function(t,e,i){var l=r.angle(e,t),d=r.angle(e,i)-l;return d<=-Math.PI?d+r.PI_TIMES_2:d>Math.PI?d-r.PI_TIMES_2:d}}])}();ye.PI_TIMES_2=2*Math.PI,ye.PI_OVER_2=Math.PI/2,ye.PI_OVER_4=Math.PI/4,ye.COUNTERCLOCKWISE=kt.COUNTERCLOCKWISE,ye.CLOCKWISE=kt.CLOCKWISE,ye.NONE=kt.COLLINEAR;var zi=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=kt.index(this._s0,this._s1,this._s2),l=i===kt.CLOCKWISE&&this._side===z.LEFT||i===kt.COUNTERCLOCKWISE&&this._side===z.RIGHT;i===0?this.addCollinear(e):l?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)}},{key:"addLineEndCap",value:function(t,e){var i=new Ze(t,e),l=new Ze;this.computeOffsetSegment(i,z.LEFT,this._distance,l);var d=new Ze;this.computeOffsetSegment(i,z.RIGHT,this._distance,d);var v=e.x-t.x,x=e.y-t.y,b=Math.atan2(x,v);switch(this._bufParams.getEndCapStyle()){case H.CAP_ROUND:this._segList.addPt(l.p1),this.addDirectedFillet(e,b+Math.PI/2,b-Math.PI/2,kt.CLOCKWISE,this._distance),this._segList.addPt(d.p1);break;case H.CAP_FLAT:this._segList.addPt(l.p1),this._segList.addPt(d.p1);break;case H.CAP_SQUARE:var P=new A;P.x=Math.abs(this._distance)*Math.cos(b),P.y=Math.abs(this._distance)*Math.sin(b);var O=new A(l.p1.x+P.x,l.p1.y+P.y),F=new A(d.p1.x+P.x,d.p1.y+P.y);this._segList.addPt(O),this._segList.addPt(F)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,i,l){var d=Ar.intersection(e.p0,e.p1,i.p0,i.p1);if(d!==null&&(l<=0?1:d.distance(t)/Math.abs(l))<=this._bufParams.getMitreLimit())return this._segList.addPt(d),null;this.addLimitedMitreJoin(e,i,l,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*r.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===H.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===H.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new A(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new A(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new A(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new A(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,i,l,d){var v=e.x-t.x,x=e.y-t.y,b=Math.atan2(x,v),P=i.x-t.x,O=i.y-t.y,F=Math.atan2(O,P);l===kt.CLOCKWISE?b<=F&&(b+=2*Math.PI):b>=F&&(b-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,b,F,l,d),this._segList.addPt(i)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,i,l){var d=this._seg0.p1,v=ye.angle(d,this._seg0.p0),x=ye.angleBetweenOriented(this._seg0.p0,d,this._seg1.p1)/2,b=ye.normalize(v+x),P=ye.normalize(b+Math.PI),O=l*i,F=i-O*Math.abs(Math.sin(x)),Y=d.x+O*Math.cos(P),ut=d.y+O*Math.sin(P),pt=new A(Y,ut),Et=new Ze(d,pt),Wt=Et.pointAlongOffset(1,F),Zt=Et.pointAlongOffset(1,-F);this._side===z.LEFT?(this._segList.addPt(Wt),this._segList.addPt(Zt)):(this._segList.addPt(Zt),this._segList.addPt(Wt))}},{key:"addDirectedFillet",value:function(t,e,i,l,d){var v=l===kt.CLOCKWISE?-1:1,x=Math.abs(e-i),b=Math.trunc(x/this._filletAngleQuantum+.5);if(b<1)return null;for(var P=x/b,O=new A,F=0;F<b;F++){var Y=e+v*F*P;O.x=t.x+d*Math.cos(Y),O.y=t.y+d*Math.sin(Y),this._segList.addPt(O)}}},{key:"computeOffsetSegment",value:function(t,e,i,l){var d=e===z.LEFT?1:-1,v=t.p1.x-t.p0.x,x=t.p1.y-t.p0.y,b=Math.sqrt(v*v+x*x),P=d*i*v/b,O=d*i*x/b;l.p0.x=t.p0.x-O,l.p0.y=t.p0.y+P,l.p1.x=t.p1.x-O,l.p1.y=t.p1.y+P}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*r.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new A((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var l=new A((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(l)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new A(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ai,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*r.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===H.JOIN_BEVEL||this._bufParams.getJoinStyle()===H.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,kt.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ze,this._seg1=new Ze,this._offset0=new Ze,this._offset1=new Ze,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new En,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===H.JOIN_ROUND&&(this._closingSegLengthFactor=r.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}}])}();zi.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,zi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,zi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,zi.MAX_CLOSING_SEG_LEN_FACTOR=80;var Fi=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,e===0)return null;var i=e<0,l=Math.abs(e),d=this.getSegGen(l);t.length<=1?this.computePointCurve(t[0],d):this.computeOffsetCurve(t,i,d);var v=d.getCoordinates();return i&&me.reverse(v),v}},{key:"computeSingleSidedBufferCurve",value:function(t,e,i){var l=this.simplifyTolerance(this._distance);if(e){i.addSegments(t,!0);var d=Qe.simplify(t,-l),v=d.length-1;i.initSideSegments(d[v],d[v-1],z.LEFT),i.addFirstSegment();for(var x=v-2;x>=0;x--)i.addNextSegment(d[x],!0)}else{i.addSegments(t,!1);var b=Qe.simplify(t,l),P=b.length-1;i.initSideSegments(b[0],b[1],z.LEFT),i.addFirstSegment();for(var O=2;O<=P;O++)i.addNextSegment(b[O],!0)}i.addLastSegment(),i.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,i){var l=this.simplifyTolerance(this._distance);e===z.RIGHT&&(l=-l);var d=Qe.simplify(t,l),v=d.length-1;i.initSideSegments(d[v-1],d[0],e);for(var x=1;x<=v;x++){var b=x!==1;i.addNextSegment(d[x],b)}i.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var i=this.simplifyTolerance(this._distance),l=Qe.simplify(t,i),d=l.length-1;e.initSideSegments(l[0],l[1],z.LEFT);for(var v=2;v<=d;v++)e.addNextSegment(l[v],!0);e.addLastSegment(),e.addLineEndCap(l[d-1],l[d]);var x=Qe.simplify(t,-i),b=x.length-1;e.initSideSegments(x[b],x[b-1],z.LEFT);for(var P=b-2;P>=0;P--)e.addNextSegment(x[P],!0);e.addLastSegment(),e.addLineEndCap(x[1],x[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case H.CAP_ROUND:e.createCircle(t);break;case H.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var i=Math.abs(e),l=this.getSegGen(i);if(t.length<=1)this.computePointCurve(t[0],l);else if(this._bufParams.isSingleSided()){var d=e<0;this.computeSingleSidedBufferCurve(t,d,l)}else this.computeLineBufferCurve(t,l);return l.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(i===0)return r.copyCoordinates(t);var l=this.getSegGen(i);return this.computeRingBufferCurve(t,e,l),l.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,i){var l=this.simplifyTolerance(this._distance);if(e){var d=Qe.simplify(t,-l),v=d.length-1;i.initSideSegments(d[v],d[v-1],z.LEFT),i.addFirstSegment();for(var x=v-2;x>=0;x--)i.addNextSegment(d[x],!0)}else{var b=Qe.simplify(t,l),P=b.length-1;i.initSideSegments(b[0],b[1],z.LEFT),i.addFirstSegment();for(var O=2;O<=P;O++)i.addNextSegment(b[O],!0)}i.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return t===0||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new zi(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new A(t[i]);return e}}])}(),He=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var r=arguments[0],t=new mt,e=this._subgraphs.iterator();e.hasNext();){var i=e.next(),l=i.getEnvelope();r.y<l.getMinY()||r.y>l.getMaxY()||this.findStabbedSegments(r,i.getDirectedEdges(),t)}return t}if(arguments.length===3){if(Q(arguments[2],Lt)&&arguments[0]instanceof A&&arguments[1]instanceof jr){for(var d=arguments[0],v=arguments[1],x=arguments[2],b=v.getEdge().getCoordinates(),P=0;P<b.length-1;P++)if(this._seg.p0=b[P],this._seg.p1=b[P+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<d.x||this._seg.isHorizontal()||d.y<this._seg.p0.y||d.y>this._seg.p1.y||kt.index(this._seg.p0,this._seg.p1,d)===kt.RIGHT)){var O=v.getDepth(z.LEFT);this._seg.p0.equals(b[P])||(O=v.getDepth(z.RIGHT));var F=new ns(this._seg,O);x.add(F)}}else if(Q(arguments[2],Lt)&&arguments[0]instanceof A&&Q(arguments[1],Lt))for(var Y=arguments[0],ut=arguments[2],pt=arguments[1].iterator();pt.hasNext();){var Et=pt.next();Et.isForward()&&this.findStabbedSegments(Y,Et,ut)}}}},{key:"getDepth",value:function(r){var t=this.findStabbedSegments(r);return t.size()===0?0:$n.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Ze;var r=arguments[0];this._subgraphs=r}}])}(),ns=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(r){var t=r;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return e!==0||(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))!==0?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(r,t){var e=r.p0.compareTo(t.p0);return e!==0?e:r.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var r=arguments[0],t=arguments[1];this._upwardSeg=new Ze(r),this._leftDepth=t}}])}();He.DepthSegment=ns;var is=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,null,[{key:"constructor_",value:function(){V.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(V),rs=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getY",value:function(){var t=this.y/this.w;if(q.isNaN(t)||q.isInfinite(t))throw new is;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(q.isNaN(t)||q.isInfinite(t))throw new is;return t}},{key:"getCoordinate",value:function(){var t=new A;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],i=arguments[1];this.x=e,this.y=i,this.w=1}else if(arguments[0]instanceof r&&arguments[1]instanceof r){var l=arguments[0],d=arguments[1];this.x=l.y*d.w-d.y*l.w,this.y=d.x*l.w-l.x*d.w,this.w=l.x*d.y-d.x*l.y}else if(arguments[0]instanceof A&&arguments[1]instanceof A){var v=arguments[0],x=arguments[1];this.x=v.y-x.y,this.y=x.x-v.x,this.w=v.x*x.y-x.x*v.y}}else if(arguments.length===3){var b=arguments[0],P=arguments[1],O=arguments[2];this.x=b,this.y=P,this.w=O}else if(arguments.length===4){var F=arguments[0],Y=arguments[1],ut=arguments[2],pt=arguments[3],Et=F.y-Y.y,Wt=Y.x-F.x,Zt=F.x*Y.y-Y.x*F.y,oe=ut.y-pt.y,ce=pt.x-ut.x,Ee=ut.x*pt.y-pt.x*ut.y;this.x=Wt*Ee-ce*Zt,this.y=oe*Zt-Et*Ee,this.w=Et*ce-oe*Wt}}}])}(),ss=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"area",value:function(){return r.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return r.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(t===null)throw new tt("Supplied point is null.");return r.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return r.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return r.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return r.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return r.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return r.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return r.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.p0=t,this.p1=e,this.p2=i}},{key:"area",value:function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)}},{key:"signedArea",value:function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2}},{key:"det",value:function(t,e,i,l){return t*l-e*i}},{key:"interpolateZ",value:function(t,e,i,l){var d=e.x,v=e.y,x=i.x-d,b=l.x-d,P=i.y-v,O=l.y-v,F=x*O-b*P,Y=t.x-d,ut=t.y-v,pt=(O*Y-b*ut)/F,Et=(-P*Y+x*ut)/F;return e.getZ()+pt*(i.getZ()-e.getZ())+Et*(l.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,i){var l=t.distance(e),d=e.distance(i),v=i.distance(t),x=l;return d>x&&(x=d),v>x&&(x=v),x}},{key:"circumcentreDD",value:function(t,e,i){var l=at.valueOf(t.x).subtract(i.x),d=at.valueOf(t.y).subtract(i.y),v=at.valueOf(e.x).subtract(i.x),x=at.valueOf(e.y).subtract(i.y),b=at.determinant(l,d,v,x).multiply(2),P=l.sqr().add(d.sqr()),O=v.sqr().add(x.sqr()),F=at.determinant(d,P,x,O),Y=at.determinant(l,P,v,O),ut=at.valueOf(i.x).subtract(F.divide(b)).doubleValue(),pt=at.valueOf(i.y).add(Y.divide(b)).doubleValue();return new A(ut,pt)}},{key:"isAcute",value:function(t,e,i){return!!ye.isAcute(t,e,i)&&!!ye.isAcute(e,i,t)&&!!ye.isAcute(i,t,e)}},{key:"circumcentre",value:function(t,e,i){var l=i.x,d=i.y,v=t.x-l,x=t.y-d,b=e.x-l,P=e.y-d,O=2*r.det(v,x,b,P),F=r.det(x,v*v+x*x,P,b*b+P*P),Y=r.det(v,v*v+x*x,b,b*b+P*P);return new A(l-F/O,d+Y/O)}},{key:"perpendicularBisector",value:function(t,e){var i=e.x-t.x,l=e.y-t.y,d=new rs(t.x+i/2,t.y+l/2,1),v=new rs(t.x-l+i/2,t.y+i+l/2,1);return new rs(d,v)}},{key:"angleBisector",value:function(t,e,i){var l=e.distance(t),d=l/(l+e.distance(i)),v=i.x-t.x,x=i.y-t.y;return new A(t.x+d*v,t.y+d*x)}},{key:"area3D",value:function(t,e,i){var l=e.x-t.x,d=e.y-t.y,v=e.getZ()-t.getZ(),x=i.x-t.x,b=i.y-t.y,P=i.getZ()-t.getZ(),O=d*P-v*b,F=v*x-l*P,Y=l*b-d*x,ut=O*O+F*F+Y*Y,pt=Math.sqrt(ut)/2;return pt}},{key:"centroid",value:function(t,e,i){var l=(t.x+e.x+i.x)/3,d=(t.y+e.y+i.y)/3;return new A(l,d)}},{key:"inCentre",value:function(t,e,i){var l=e.distance(i),d=t.distance(i),v=t.distance(e),x=l+d+v,b=(l*t.x+d*e.x+v*i.x)/x,P=(l*t.y+d*e.y+v*i.y)/x;return new A(b,P)}}])}(),os=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(r,t,e,i,l){if(t===0&&r.length<hn.MINIMUM_VALID_SIZE)return null;var d=i,v=l;r.length>=hn.MINIMUM_VALID_SIZE&&kt.isCCW(r)&&(d=l,v=i,e=z.opposite(e));var x=this._curveBuilder.getRingCurve(r,e,t);this.addCurve(x,d,v)}},{key:"addRingBothSides",value:function(r,t){this.addRingSide(r,t,z.LEFT,k.EXTERIOR,k.INTERIOR),this.addRingSide(r,t,z.RIGHT,k.INTERIOR,k.EXTERIOR)}},{key:"addPoint",value:function(r){if(this._distance<=0)return null;var t=r.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,k.EXTERIOR,k.INTERIOR)}},{key:"addPolygon",value:function(r){var t=this._distance,e=z.LEFT;this._distance<0&&(t=-this._distance,e=z.RIGHT);var i=r.getExteriorRing(),l=me.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&l.length<3)return null;this.addRingSide(l,t,e,k.EXTERIOR,k.INTERIOR);for(var d=0;d<r.getNumInteriorRing();d++){var v=r.getInteriorRingN(d),x=me.removeRepeatedPoints(v.getCoordinates());this._distance>0&&this.isErodedCompletely(v,-this._distance)||this.addRingSide(x,t,z.opposite(e),k.INTERIOR,k.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(r,t){var e=new ss(r[0],r[1],r[2]),i=e.inCentre();return nn.pointToSegment(i,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(r){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=me.removeRepeatedPoints(r.getCoordinates());if(me.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,k.EXTERIOR,k.INTERIOR)}}},{key:"addCurve",value:function(r,t,e){if(r===null||r.length<2)return null;var i=new bn(r,new ze(0,k.BOUNDARY,t,e));this._curveList.add(i)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(r){if(r.isEmpty())return null;if(r instanceof Pi)this.addPolygon(r);else if(r instanceof Si)this.addLineString(r);else if(r instanceof Fr)this.addPoint(r);else if(r instanceof tr)this.addCollection(r);else if(r instanceof rr)this.addCollection(r);else if(r instanceof Zr)this.addCollection(r);else{if(!(r instanceof Oe))throw new j(r.getGeometryType());this.addCollection(r)}}},{key:"isErodedCompletely",value:function(r,t){var e=r.getCoordinates();if(e.length<4)return t<0;if(e.length===4)return this.isTriangleErodedCompletely(e,t);var i=r.getEnvelopeInternal(),l=Math.min(i.getHeight(),i.getWidth());return t<0&&2*Math.abs(t)>l}},{key:"addCollection",value:function(r){for(var t=0;t<r.getNumGeometries();t++){var e=r.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new mt;var r=arguments[0],t=arguments[1],e=arguments[2];this._inputGeom=r,this._distance=t,this._curveBuilder=e}}])}(),Vo=function(){return p(function r(){a(this,r)},[{key:"locate",value:function(r){}}])}(),Wo=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,r.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new U;var t=this._parent.getGeometryN(this._index++);return t instanceof Oe?(this._subcollectionIterator=new r(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new j(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[qo]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof Oe)}}])}(),Zs=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"locate",value:function(t){return r.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[Vo]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return k.EXTERIOR;var i=e.getExteriorRing(),l=r.locatePointInRing(t,i);if(l!==k.INTERIOR)return l;for(var d=0;d<e.getNumInteriorRing();d++){var v=e.getInteriorRingN(d),x=r.locatePointInRing(t,v);if(x===k.BOUNDARY)return k.BOUNDARY;if(x===k.INTERIOR)return k.EXTERIOR}return k.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?fi.locateInRing(t,e.getCoordinates()):k.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return k.EXTERIOR!==r.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof Pi)return r.locatePointInPolygon(t,e);if(e instanceof Oe)for(var i=new Wo(e);i.hasNext();){var l=i.next();if(l!==e){var d=r.locateInGeometry(t,l);if(d!==k.EXTERIOR)return d}}return k.EXTERIOR}},{key:"isContained",value:function(t,e){return k.EXTERIOR!==r.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?k.EXTERIOR:e.getEnvelopeInternal().intersects(t)?r.locateInGeometry(t,e):k.EXTERIOR}}])}(),Xo=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(r){this.getEdges();var t=this._edgeList.indexOf(r),e=t-1;return t===0&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(r){for(var t=k.NONE,e=this.iterator();e.hasNext();){var i=e.next().getLabel();i.isArea(r)&&i.getLocation(r,z.LEFT)!==k.NONE&&(t=i.getLocation(r,z.LEFT))}if(t===k.NONE)return null;for(var l=t,d=this.iterator();d.hasNext();){var v=d.next(),x=v.getLabel();if(x.getLocation(r,z.ON)===k.NONE&&x.setLocation(r,z.ON,l),x.isArea(r)){var b=x.getLocation(r,z.LEFT),P=x.getLocation(r,z.RIGHT);if(P!==k.NONE){if(P!==l)throw new be("side location conflict",v.getCoordinate());b===k.NONE&&vt.shouldNeverReachHere("found single null side (at "+v.getCoordinate()+")"),l=b}else vt.isTrue(x.getLocation(r,z.LEFT)===k.NONE,"found single null side"),x.setLocation(r,z.RIGHT,l),x.setLocation(r,z.LEFT,l)}}}},{key:"getCoordinate",value:function(){var r=this.iterator();return r.hasNext()?r.next().getCoordinate():null}},{key:"print",value:function(r){Je.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"isAreaLabelsConsistent",value:function(r){return this.computeEdgeEndLabels(r.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(r){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,i=t.get(e).getLabel().getLocation(r,z.LEFT);vt.isTrue(i!==k.NONE,"Found unlabelled area edge");for(var l=i,d=this.iterator();d.hasNext();){var v=d.next().getLabel();vt.isTrue(v.isArea(r),"Found non-area edge");var x=v.getLocation(r,z.LEFT),b=v.getLocation(r,z.RIGHT);if(x===b||b!==l)return!1;l=x}return!0}},{key:"findIndex",value:function(r){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===r)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new mt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(r,t,e){return this._ptInAreaLocation[r]===k.NONE&&(this._ptInAreaLocation[r]=Zs.locate(t,e[r].getGeometry())),this._ptInAreaLocation[r]}},{key:"toString",value:function(){var r=new Tt;r.append("EdgeEndStar:   "+this.getCoordinate()),r.append(`
`);for(var t=this.iterator();t.hasNext();){var e=t.next();r.append(e),r.append(`
`)}return r.toString()}},{key:"computeEdgeEndLabels",value:function(r){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(r)}},{key:"computeLabelling",value:function(r){this.computeEdgeEndLabels(r[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var i=e.next().getLabel(),l=0;l<2;l++)i.isLine(l)&&i.getLocation(l)===k.BOUNDARY&&(t[l]=!0);for(var d=this.iterator();d.hasNext();)for(var v=d.next(),x=v.getLabel(),b=0;b<2;b++)if(x.isAnyNull(b)){var P=k.NONE;if(t[b])P=k.EXTERIOR;else{var O=v.getCoordinate();P=this.getLocation(b,O,r)}x.setAllLocationsIfNull(b,P)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(r,t){this._edgeMap.put(r,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new fe,this._edgeList=null,this._ptInAreaLocation=[k.NONE,k.NONE]}}])}(),sn=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,i=null,l=this._SCANNING_FOR_INCOMING,d=0;d<this._resultAreaEdgeList.size();d++){var v=this._resultAreaEdgeList.get(d),x=v.getSym();if(v.getLabel().isArea())switch(e===null&&v.isInResult()&&(e=v),l){case this._SCANNING_FOR_INCOMING:if(!x.isInResult())continue;i=x,l=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!v.isInResult())continue;i.setNext(v),l=this._SCANNING_FOR_INCOMING}}if(l===this._LINKING_TO_OUTGOING){if(e===null)throw new be("no outgoing dirEdge found",this.getCoordinate());vt.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),i.setNext(e)}}},{key:"insert",value:function(e){var i=e;this.insertEdgeEnd(i,i)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),i=e.size();if(i<1)return null;var l=e.get(0);if(i===1)return l;var d=e.get(i-1),v=l.getQuadrant(),x=d.getQuadrant();return Se.isNorthern(v)&&Se.isNorthern(x)?l:Se.isNorthern(v)||Se.isNorthern(x)?l.getDy()!==0?l:d.getDy()!==0?d:(vt.shouldNeverReachHere("found two horizontal edges incident on node"),null):d}},{key:"print",value:function(e){Je.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var l=i.next();e.print("out "),l.print(e),e.println(),e.print("in "),l.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new mt;for(var e=this.iterator();e.hasNext();){var i=e.next();(i.isInResult()||i.getSym().isInResult())&&this._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var i=this.iterator();i.hasNext();){var l=i.next().getLabel();l.setAllLocationsIfNull(0,e.getLocation(0)),l.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,i=null,l=this._edgeList.size()-1;l>=0;l--){var d=this._edgeList.get(l),v=d.getSym();i===null&&(i=v),e!==null&&v.setNext(e),e=d}i.setNext(e)}},{key:"computeDepths",value:function(){if(arguments.length===1){var e=arguments[0],i=this.findIndex(e),l=e.getDepth(z.LEFT),d=e.getDepth(z.RIGHT),v=this.computeDepths(i+1,this._edgeList.size(),l);if(this.computeDepths(0,i,v)!==d)throw new be("depth mismatch at "+e.getCoordinate())}else if(arguments.length===3){for(var x=arguments[1],b=arguments[2],P=arguments[0];P<x;P++){var O=this._edgeList.get(P);O.setEdgeDepths(z.RIGHT,b),b=O.getDepth(z.LEFT)}return b}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var i=e.next();i.getLabel().merge(i.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var i=null,l=null,d=this._SCANNING_FOR_INCOMING,v=this._resultAreaEdgeList.size()-1;v>=0;v--){var x=this._resultAreaEdgeList.get(v),b=x.getSym();switch(i===null&&x.getEdgeRing()===e&&(i=x),d){case this._SCANNING_FOR_INCOMING:if(b.getEdgeRing()!==e)continue;l=b,d=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(x.getEdgeRing()!==e)continue;l.setNextMin(x),d=this._SCANNING_FOR_INCOMING}}d===this._LINKING_TO_OUTGOING&&(vt.isTrue(i!==null,"found null for first outgoing dirEdge"),vt.isTrue(i.getEdgeRing()===e,"unable to link last incoming dirEdge"),l.setNextMin(i))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var e=0,i=this.iterator();i.hasNext();)i.next().isInResult()&&e++;return e}if(arguments.length===1){for(var l=arguments[0],d=0,v=this.iterator();v.hasNext();)v.next().getEdgeRing()===l&&d++;return d}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=k.NONE,i=this.iterator();i.hasNext();){var l=i.next(),d=l.getSym();if(!l.isLineEdge()){if(l.isInResult()){e=k.INTERIOR;break}if(d.isInResult()){e=k.EXTERIOR;break}}}if(e===k.NONE)return null;for(var v=e,x=this.iterator();x.hasNext();){var b=x.next(),P=b.getSym();b.isLineEdge()?b.getEdge().setCovered(v===k.INTERIOR):(b.isInResult()&&(v=k.EXTERIOR),P.isInResult()&&(v=k.INTERIOR))}}},{key:"computeLabelling",value:function(e){R(t,"computeLabelling",this,1).call(this,e),this._label=new ze(k.NONE);for(var i=this.iterator();i.hasNext();)for(var l=i.next().getEdge().getLabel(),d=0;d<2;d++){var v=l.getLocation(d);v!==k.INTERIOR&&v!==k.BOUNDARY||this._label.setLocation(d,k.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Xo),gi=function(r){function t(){return a(this,t),g(this,t)}return I(t,r),p(t,[{key:"createNode",value:function(e){return new Ri(e,new sn)}}])}(Kr),Hs=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"compareTo",value:function(t){var e=t;return r.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=r.orientation(t)}},{key:"orientation",value:function(t){return me.increasingDirection(t)===1}},{key:"compareOriented",value:function(t,e,i,l){for(var d=e?1:-1,v=l?1:-1,x=e?t.length:-1,b=l?i.length:-1,P=e?0:t.length-1,O=l?0:i.length-1;;){var F=t[P].compareTo(i[O]);if(F!==0)return F;var Y=(P+=d)===x,ut=(O+=v)===b;if(Y&&!ut)return-1;if(!Y&&ut)return 1;if(Y&&ut)return 0}}}])}(),Tn=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"print",value:function(r){r.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&r.print(","),r.print("(");for(var i=e.getCoordinates(),l=0;l<i.length;l++)l>0&&r.print(","),r.print(i[l].x+" "+i[l].y);r.println(")")}r.print(")  ")}},{key:"addAll",value:function(r){for(var t=r.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(r){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(r))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(r){return this._edges.get(r)}},{key:"findEqualEdge",value:function(r){var t=new Hs(r.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(r){this._edges.add(r);var t=new Hs(r.getCoordinates());this._ocaMap.put(t,r)}}],[{key:"constructor_",value:function(){this._edges=new mt,this._ocaMap=new fe}}])}(),qs=function(){return p(function r(){a(this,r)},[{key:"processIntersections",value:function(r,t,e,i){}},{key:"isDone",value:function(){}}])}(),_i=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"isTrivialIntersection",value:function(t,e,i,l){if(t===i&&this._li.getIntersectionNum()===1){if(r.isAdjacentSegments(e,l))return!0;if(t.isClosed()){var d=t.size()-1;if(e===0&&l===d||l===0&&e===d)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,i,l){if(t===i&&e===l)return null;this.numTests++;var d=t.getCoordinates()[e],v=t.getCoordinates()[e+1],x=i.getCoordinates()[l],b=i.getCoordinates()[l+1];this._li.computeIntersection(d,v,x,b),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,l)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,l,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[qs]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return Math.abs(t-e)===1}}])}(),jo=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(r){r.print(this.coord),r.print(" seg # = "+this.segmentIndex),r.println(" dist = "+this.dist)}},{key:"compareTo",value:function(r){var t=r;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(r){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===r}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(r,t){return this.segmentIndex<r?-1:this.segmentIndex>r?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var r=arguments[0],t=arguments[1],e=arguments[2];this.coord=new A(r),this.segmentIndex=t,this.dist=e}}])}(),Bi=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"print",value:function(r){r.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(r){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var i=t.next(),l=this.createSplitEdge(e,i);r.add(l),e=i}}},{key:"addEndpoints",value:function(){var r=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[r],r,0)}},{key:"createSplitEdge",value:function(r,t){var e=t.segmentIndex-r.segmentIndex+2,i=this.edge.pts[t.segmentIndex],l=t.dist>0||!t.coord.equals2D(i);l||e--;var d=new Array(e).fill(null),v=0;d[v++]=new A(r.coord);for(var x=r.segmentIndex+1;x<=t.segmentIndex;x++)d[v++]=this.edge.pts[x];return l&&(d[v]=t.coord),new Vs(d,new ze(this.edge._label))}},{key:"add",value:function(r,t,e){var i=new jo(r,t,e),l=this._nodeMap.get(i);return l!==null?l:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(r){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(r))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new fe,this.edge=null;var r=arguments[0];this.edge=r}}])}(),Ys=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])||r.isTrue(this._matrix[k.INTERIOR][k.BOUNDARY])||r.isTrue(this._matrix[k.BOUNDARY][k.INTERIOR])||r.isTrue(this._matrix[k.BOUNDARY][k.BOUNDARY]))&&this._matrix[k.EXTERIOR][k.INTERIOR]===ot.FALSE&&this._matrix[k.EXTERIOR][k.BOUNDARY]===ot.FALSE}},{key:"isCoveredBy",value:function(){return(r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])||r.isTrue(this._matrix[k.INTERIOR][k.BOUNDARY])||r.isTrue(this._matrix[k.BOUNDARY][k.INTERIOR])||r.isTrue(this._matrix[k.BOUNDARY][k.BOUNDARY]))&&this._matrix[k.INTERIOR][k.EXTERIOR]===ot.FALSE&&this._matrix[k.BOUNDARY][k.EXTERIOR]===ot.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var i=Math.trunc(e/3),l=e%3;this._matrix[i][l]=ot.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this._matrix[d][v]=x}}},{key:"isContains",value:function(){return r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&this._matrix[k.EXTERIOR][k.INTERIOR]===ot.FALSE&&this._matrix[k.EXTERIOR][k.BOUNDARY]===ot.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var i=Math.trunc(e/3),l=e%3;this.setAtLeast(i,l,ot.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var d=arguments[0],v=arguments[1],x=arguments[2];this._matrix[d][v]<x&&(this._matrix[d][v]=x)}}},{key:"setAtLeastIfValid",value:function(t,e,i){t>=0&&e>=0&&this.setAtLeast(t,e,i)}},{key:"isWithin",value:function(){return r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&this._matrix[k.INTERIOR][k.EXTERIOR]===ot.FALSE&&this._matrix[k.BOUNDARY][k.EXTERIOR]===ot.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===ot.A&&e===ot.A||t===ot.L&&e===ot.L||t===ot.L&&e===ot.A||t===ot.P&&e===ot.A||t===ot.P&&e===ot.L)&&this._matrix[k.INTERIOR][k.INTERIOR]===ot.FALSE&&(r.isTrue(this._matrix[k.INTERIOR][k.BOUNDARY])||r.isTrue(this._matrix[k.BOUNDARY][k.INTERIOR])||r.isTrue(this._matrix[k.BOUNDARY][k.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===ot.P&&e===ot.P||t===ot.A&&e===ot.A?r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&r.isTrue(this._matrix[k.INTERIOR][k.EXTERIOR])&&r.isTrue(this._matrix[k.EXTERIOR][k.INTERIOR]):t===ot.L&&e===ot.L&&this._matrix[k.INTERIOR][k.INTERIOR]===1&&r.isTrue(this._matrix[k.INTERIOR][k.EXTERIOR])&&r.isTrue(this._matrix[k.EXTERIOR][k.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&this._matrix[k.INTERIOR][k.EXTERIOR]===ot.FALSE&&this._matrix[k.BOUNDARY][k.EXTERIOR]===ot.FALSE&&this._matrix[k.EXTERIOR][k.INTERIOR]===ot.FALSE&&this._matrix[k.EXTERIOR][k.BOUNDARY]===ot.FALSE}},{key:"toString",value:function(){for(var t=new ir("123456789"),e=0;e<3;e++)for(var i=0;i<3;i++)t.setCharAt(3*e+i,ot.toDimensionSymbol(this._matrix[e][i]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var i=0;i<3;i++)this._matrix[e][i]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(t.length!==9)throw new tt("Should be length 9: "+t);for(var e=0;e<3;e++)for(var i=0;i<3;i++)if(!r.matches(this._matrix[e][i],t.charAt(3*e+i)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var i=0;i<3;i++)this.setAtLeast(e,i,t.get(e,i))}},{key:"isDisjoint",value:function(){return this._matrix[k.INTERIOR][k.INTERIOR]===ot.FALSE&&this._matrix[k.INTERIOR][k.BOUNDARY]===ot.FALSE&&this._matrix[k.BOUNDARY][k.INTERIOR]===ot.FALSE&&this._matrix[k.BOUNDARY][k.BOUNDARY]===ot.FALSE}},{key:"isCrosses",value:function(t,e){return t===ot.P&&e===ot.L||t===ot.P&&e===ot.A||t===ot.L&&e===ot.A?r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&r.isTrue(this._matrix[k.INTERIOR][k.EXTERIOR]):t===ot.L&&e===ot.P||t===ot.A&&e===ot.P||t===ot.A&&e===ot.L?r.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&r.isTrue(this._matrix[k.EXTERIOR][k.INTERIOR]):t===ot.L&&e===ot.L&&this._matrix[k.INTERIOR][k.INTERIOR]===0}},{key:"interfaces_",get:function(){return[_t]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(ot.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];r.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof r){var e=arguments[0];r.constructor_.call(this),this._matrix[k.INTERIOR][k.INTERIOR]=e._matrix[k.INTERIOR][k.INTERIOR],this._matrix[k.INTERIOR][k.BOUNDARY]=e._matrix[k.INTERIOR][k.BOUNDARY],this._matrix[k.INTERIOR][k.EXTERIOR]=e._matrix[k.INTERIOR][k.EXTERIOR],this._matrix[k.BOUNDARY][k.INTERIOR]=e._matrix[k.BOUNDARY][k.INTERIOR],this._matrix[k.BOUNDARY][k.BOUNDARY]=e._matrix[k.BOUNDARY][k.BOUNDARY],this._matrix[k.BOUNDARY][k.EXTERIOR]=e._matrix[k.BOUNDARY][k.EXTERIOR],this._matrix[k.EXTERIOR][k.INTERIOR]=e._matrix[k.EXTERIOR][k.INTERIOR],this._matrix[k.EXTERIOR][k.BOUNDARY]=e._matrix[k.EXTERIOR][k.BOUNDARY],this._matrix[k.EXTERIOR][k.EXTERIOR]=e._matrix[k.EXTERIOR][k.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===ot.SYM_DONTCARE||e===ot.SYM_TRUE&&(t>=0||t===ot.TRUE)||e===ot.SYM_FALSE&&t===ot.FALSE||e===ot.SYM_P&&t===ot.P||e===ot.SYM_L&&t===ot.L||e===ot.SYM_A&&t===ot.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var i=arguments[1];return new r(arguments[0]).matches(i)}}},{key:"isTrue",value:function(t){return t>=0||t===ot.TRUE}}])}(),gr=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return t===null||t.length===0?null:(this.ensureCapacity(this._size+t.length),Je.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=Te.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return Je.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)r.constructor_.call(this,10);else if(arguments.length===1){var t=arguments[0];this._data=new Array(t).fill(null)}}}])}(),Ko=function(){function r(){a(this,r)}return p(r,[{key:"getChainStartIndices",value:function(t){var e=0,i=new gr(Math.trunc(t.length/2));i.add(e);do{var l=this.findChainEnd(t,e);i.add(l),e=l}while(e<t.length-1);return i.toArray()}},{key:"findChainEnd",value:function(t,e){for(var i=Se.quadrant(t[e],t[e+1]),l=e+1;l<t.length&&Se.quadrant(t[l-1],t[l])===i;)l++;return l-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,i=new mt;i.add(e);do{var l=this.findChainEnd(t,e);i.add(l),e=l}while(e<t.length-1);return r.toIntArray(i)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e}}])}(),An=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(r){var t=this.pts[this.startIndex[r]].x,e=this.pts[this.startIndex[r+1]].x;return t>e?t:e}},{key:"getMinX",value:function(r){var t=this.pts[this.startIndex[r]].x,e=this.pts[this.startIndex[r+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var r=arguments[0],t=arguments[1],e=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[r],this.startIndex[r+1],t,t.startIndex[e],t.startIndex[e+1],i)}else if(arguments.length===6){var l=arguments[0],d=arguments[1],v=arguments[2],x=arguments[3],b=arguments[4],P=arguments[5];if(d-l==1&&b-x==1)return P.addIntersections(this.e,l,v.e,x),null;if(!this.overlaps(l,d,v,x,b))return null;var O=Math.trunc((l+d)/2),F=Math.trunc((x+b)/2);l<O&&(x<F&&this.computeIntersectsForChain(l,O,v,x,F,P),F<b&&this.computeIntersectsForChain(l,O,v,F,b,P)),O<d&&(x<F&&this.computeIntersectsForChain(O,d,v,x,F,P),F<b&&this.computeIntersectsForChain(O,d,v,F,b,P))}}},{key:"overlaps",value:function(r,t,e,i,l){return Xt.intersects(this.pts[r],this.pts[t],e.pts[i],e.pts[l])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(r,t){for(var e=0;e<this.startIndex.length-1;e++)for(var i=0;i<r.startIndex.length-1;i++)this.computeIntersectsForChain(e,r,i,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var r=arguments[0];this.e=r,this.pts=r.getCoordinates();var t=new Ko;this.startIndex=t.getChainStartIndices(this.pts)}}])}(),Gi=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,i){this._depth[t][e]=i}},{key:"isNull",value:function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==r.NULL_VALUE)return!1;return!0}if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===r.NULL_VALUE}if(arguments.length===2){var l=arguments[0],d=arguments[1];return this._depth[l][d]===r.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var i=1;i<3;i++){var l=0;this._depth[t][i]>e&&(l=1),this._depth[t][i]=l}}}},{key:"getDelta",value:function(t){return this._depth[t][z.RIGHT]-this._depth[t][z.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?k.EXTERIOR:k.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var i=1;i<3;i++){var l=t.getLocation(e,i);l!==k.EXTERIOR&&l!==k.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=r.depthAtLocation(l):this._depth[e][i]+=r.depthAtLocation(l))}else if(arguments.length===3){var d=arguments[0],v=arguments[1];arguments[2]===k.INTERIOR&&this._depth[d][v]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=r.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===k.EXTERIOR?0:t===k.INTERIOR?1:r.NULL_VALUE}}])}();Gi.NULL_VALUE=-1;var Vs=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,ze.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var i=e;if(this.pts.length!==i.pts.length)return!1;for(var l=!0,d=!0,v=this.pts.length,x=0;x<this.pts.length;x++)if(this.pts[x].equals2D(i.pts[x])||(l=!1),this.pts[x].equals2D(i.pts[--v])||(d=!1),!l&&!d)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&e.print(","),e.print(this.pts[i].x+" "+this.pts[i].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)e.print(this.pts[i]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new An(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Xt;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,i,l,d){var v=new A(e.getIntersection(d)),x=i,b=e.getEdgeDistance(l,d),P=x+1;if(P<this.pts.length){var O=this.pts[P];v.equals2D(O)&&(x=P,b=0)}this.eiList.add(v,x,b)}},{key:"toString",value:function(){var e=new ir;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&e.append(","),e.append(this.pts[i].x+" "+this.pts[i].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!this.pts[i].equals2D(e.pts[i]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,i,l){for(var d=0;d<e.getIntersectionNum();d++)this.addIntersection(e,i,l,d)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Bi(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Gi,this._depthDelta=0,arguments.length===1){var e=arguments[0];t.constructor_.call(this,e,null)}else if(arguments.length===2){var i=arguments[0],l=arguments[1];this.pts=i,this._label=l}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Ys&&arguments[0]instanceof ze))return R(t,"updateIM",this).apply(this,arguments);var e=arguments[0],i=arguments[1];i.setAtLeastIfValid(e.getLocation(0,z.ON),e.getLocation(1,z.ON),1),e.isArea()&&(i.setAtLeastIfValid(e.getLocation(0,z.LEFT),e.getLocation(1,z.LEFT),2),i.setAtLeastIfValid(e.getLocation(0,z.RIGHT),e.getLocation(1,z.RIGHT),2))}}])}(se),_r=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var i=e.getLabel(),l=t.getLabel();e.isPointwiseEqual(t)||(l=new ze(t.getLabel())).flip(),i.merge(l);var d=r.depthDelta(l),v=e.getDepthDelta()+d;e.setDepthDelta(v)}else this._edgeList.add(t),t.setDepthDelta(r.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var i=new mt,l=t.iterator();l.hasNext();){var d=l.next(),v=d.getRightmostCoordinate(),x=new He(i).getDepth(v);d.computeDepth(x),d.findResultEdges(),i.add(d),e.add(d.getDirectedEdges(),d.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new mt,i=t.getNodes().iterator();i.hasNext();){var l=i.next();if(!l.isVisited()){var d=new Cn;d.create(l),e.add(d)}}return $n.sort(e,$n.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new ts,i=new En;return i.setPrecisionModel(t),e.setSegmentIntersector(new _i(i)),e}},{key:"buffer",value:function(t,e){var i=this._workingPrecisionModel;i===null&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();var l=new Fi(i,this._bufParams),d=new os(t,e,l).getCurves();if(d.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(d,i),this._graph=new hr(new gi),this._graph.addEdges(this._edgeList.getEdges());var v=this.createSubgraphs(this._graph),x=new Go(this._geomFact);this.buildSubgraphs(v,x);var b=x.getPolygons();return b.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(b)}},{key:"computeNodedEdges",value:function(t,e){var i=this.getNoder(e);i.computeNodes(t);for(var l=i.getNodedSubstrings().iterator();l.hasNext();){var d=l.next(),v=d.getCoordinates();if(v.length!==2||!v[0].equals2D(v[1])){var x=d.getData(),b=new Vs(d.getCoordinates(),new ze(x));this.insertUniqueEdge(b)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Tn;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,z.LEFT),i=t.getLocation(0,z.RIGHT);return e===k.INTERIOR&&i===k.EXTERIOR?1:e===k.EXTERIOR&&i===k.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new cn,i=new mt;t.hasNext();){var l=t.next(),d=e.createLineString(l.getCoordinates());i.add(d)}return e.buildGeometry(i)}}])}(),$o=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"rescale",value:function(){if(Q(arguments[0],N))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],l=0;l<i.length;l++)i[l].x=i[l].x/this._scaleFactor+this._offsetX,i[l].y=i[l].y/this._scaleFactor+this._offsetY;i.length===2&&i[0].equals2D(i[1])&&Je.out.println(i)}}},{key:"scale",value:function(){if(Q(arguments[0],N)){for(var t=arguments[0],e=new mt(t.size()),i=t.iterator();i.hasNext();){var l=i.next();e.add(new bn(this.scale(l.getCoordinates()),l.getData()))}return e}if(arguments[0]instanceof Array){for(var d=arguments[0],v=new Array(d.length).fill(null),x=0;x<d.length;x++)v[x]=new A(Math.round((d[x].x-this._offsetX)*this._scaleFactor),Math.round((d[x].y-this._offsetY)*this._scaleFactor),d[x].getZ());return me.removeRepeatedPoints(v)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[Qr]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];r.constructor_.call(this,t,e,0,0)}else if(arguments.length===4){var i=arguments[0],l=arguments[1];this._noder=i,this._scaleFactor=l,this._isScaled=!this.isIntegerPrecision()}}}])}(),mn=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(arguments.length===2){for(var i=arguments[0],l=arguments[1].iterator();l.hasNext();)for(var d=l.next().getCoordinates(),v=1;v<d.length-1;v++)if(d[v].equals(i))throw new Dt("found endpt/interior pt intersection at index "+v+" :pt "+i)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this._segStrings.iterator();i.hasNext();){var l=i.next();this.checkInteriorIntersections(e,l)}else if(arguments.length===2)for(var d=arguments[0],v=arguments[1],x=d.getCoordinates(),b=v.getCoordinates(),P=0;P<x.length-1;P++)for(var O=0;O<b.length-1;O++)this.checkInteriorIntersections(d,P,v,O);else if(arguments.length===4){var F=arguments[0],Y=arguments[1],ut=arguments[2],pt=arguments[3];if(F===ut&&Y===pt)return null;var Et=F.getCoordinates()[Y],Wt=F.getCoordinates()[Y+1],Zt=ut.getCoordinates()[pt],oe=ut.getCoordinates()[pt+1];if(this._li.computeIntersection(Et,Wt,Zt,oe),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Et,Wt)||this.hasInteriorIntersection(this._li,Zt,oe)))throw new Dt("found non-noded intersection at "+Et+"-"+Wt+" and "+Zt+"-"+oe)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var i=arguments[0].getCoordinates(),l=0;l<i.length-2;l++)this.checkCollapse(i[l],i[l+1],i[l+2])}},{key:"hasInteriorIntersection",value:function(t,e,i){for(var l=0;l<t.getIntersectionNum();l++){var d=t.getIntersection(l);if(!d.equals(e)&&!d.equals(i))return!0}return!1}},{key:"checkCollapse",value:function(t,e,i){if(t.equals(i))throw new Dt("found non-noded collapse at "+r.fact.createLineString([t,e,i]))}}],[{key:"constructor_",value:function(){this._li=new En,this._segStrings=null;var t=arguments[0];this._segStrings=t}}])}();mn.fact=new cn;var as=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"intersectsScaled",value:function(t,e){var i=Math.min(t.x,e.x),l=Math.max(t.x,e.x),d=Math.min(t.y,e.y),v=Math.max(t.y,e.y),x=this._maxx<i||this._minx>l||this._maxy<d||this._miny>v;if(x)return!1;var b=this.intersectsToleranceSquare(t,e);return vt.isTrue(!(x&&b),"Found bad envelope test"),b}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new A(this._maxx,this._maxy),this._corner[1]=new A(this._minx,this._maxy),this._corner[2]=new A(this._minx,this._miny),this._corner[3]=new A(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var t=r.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Xt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(t,e){var i=!1,l=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(l=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!i||!l)||!!t.equals(this._pt)||!!e.equals(this._pt))))}},{key:"addSnappedNode",value:function(t,e){var i=t.getCoordinate(e),l=t.getCoordinate(e+1);return!!this.intersects(i,l)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new tt("Scale factor must be non-zero");e!==1&&(this._pt=new A(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new A,this._p1Scaled=new A),this.initCorners(this._pt)}}])}();as.SAFE_ENV_EXPANSION_FACTOR=.75;var mi=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var r=arguments[1];arguments[0].getLineSegment(r,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Ze}}])}(),Ws=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var r=arguments[0];return this.snap(r,null,-1)}if(arguments.length===3){var t=arguments[0],e=arguments[1],i=arguments[2],l=t.getSafeEnvelope(),d=new pn(t,e,i);return this._index.query(l,new(function(){return p(function v(){a(this,v)},[{key:"interfaces_",get:function(){return[zs]}},{key:"visitItem",value:function(v){v.select(l,d)}}])}())),d.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var r=arguments[0];this._index=r}}])}(),pn=function(r){function t(){var e;return a(this,t),e=g(this,t),t.constructor_.apply(e,arguments),e}return I(t,r),p(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Jr))return R(t,"select",this,1).apply(this,arguments);var e=arguments[1],i=arguments[0].getContext();if(this._parentEdge===i&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(i,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],i=arguments[1],l=arguments[2];this._hotPixel=e,this._parentEdge=i,this._hotPixelVertexIndex=l}}])}(mi);Ws.HotPixelSnapAction=pn;var mr=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(r,t,e,i){if(r===e&&t===i)return null;var l=r.getCoordinates()[t],d=r.getCoordinates()[t+1],v=e.getCoordinates()[i],x=e.getCoordinates()[i+1];if(this._li.computeIntersection(l,d,v,x),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var b=0;b<this._li.getIntersectionNum();b++)this._interiorIntersections.add(this._li.getIntersection(b));r.addIntersections(this._li,t,0),e.addIntersections(this._li,i,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[qs]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var r=arguments[0];this._li=r,this._interiorIntersections=new mt}}])}(),Xs=function(){return p(function r(){a(this,r),r.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(r){var t=bn.getNodedSubstrings(r),e=new mn(t);try{e.checkValid()}catch(i){if(!(i instanceof V))throw i;i.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return bn.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(r,t){var e=this.findInteriorIntersections(r,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(r)}},{key:"findInteriorIntersections",value:function(r,t){var e=new mr(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(r),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Q(arguments[0],N))for(var r=arguments[0].iterator();r.hasNext();){var t=r.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof bn)for(var e=arguments[0],i=e.getCoordinates(),l=0;l<i.length;l++){var d=new as(i[l],this._scaleFactor,this._li);this._pointSnapper.snap(d,e,l)&&e.addIntersection(i[l],l)}}},{key:"computeNodes",value:function(r){this._nodedSegStrings=r,this._noder=new ts,this._pointSnapper=new Ws(this._noder.getIndex()),this.snapRound(r,this._li)}},{key:"computeIntersectionSnaps",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next(),i=new as(e,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:"interfaces_",get:function(){return[Qr]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var r=arguments[0];this._pm=r,this._li=new En,this._li.setPrecisionModel(r),this._scaleFactor=r.getScale()}}])}(),zn=function(){function r(){a(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"bufferFixedPrecision",value:function(t){var e=new $o(new Xs(new Re(1)),t.getScale()),i=new _r(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var t=r.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(d){if(!(d instanceof be))throw d;this._saveException=d}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var e=arguments[0],i=r.precisionScaleFactor(this._argGeom,this._distance,e),l=new Re(i);this.bufferFixedPrecision(l)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Re.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new _r(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof Dt))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new H,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],i=arguments[1];this._argGeom=e,this._bufParams=i}}},{key:"bufferOp",value:function(){if(arguments.length===2){var t=arguments[1];return new r(arguments[0]).getResultGeometry(t)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof xt&&typeof arguments[1]=="number"){var e=arguments[1],i=arguments[2],l=new r(arguments[0]);return l.setQuadrantSegments(i),l.getResultGeometry(e)}if(arguments[2]instanceof H&&arguments[0]instanceof xt&&typeof arguments[1]=="number"){var d=arguments[1];return new r(arguments[0],arguments[2]).getResultGeometry(d)}}else if(arguments.length===4){var v=arguments[1],x=arguments[2],b=arguments[3],P=new r(arguments[0]);return P.setQuadrantSegments(x),P.setEndCapStyle(b),P.getResultGeometry(v)}}},{key:"precisionScaleFactor",value:function(t,e,i){var l=t.getEnvelopeInternal(),d=ai.max(Math.abs(l.getMaxX()),Math.abs(l.getMaxY()),Math.abs(l.getMinX()),Math.abs(l.getMinY()))+2*(e>0?e:0),v=i-Math.trunc(Math.log(d)/Math.log(10)+1);return Math.pow(10,v)}}])}();zn.CAP_ROUND=H.CAP_ROUND,zn.CAP_BUTT=H.CAP_FLAT,zn.CAP_FLAT=H.CAP_FLAT,zn.CAP_SQUARE=H.CAP_SQUARE,zn.MAX_PRECISION_DIGITS=12;var pr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],vr=function(){return p(function r(t){a(this,r),this.geometryFactory=t||new cn},[{key:"read",value:function(r){var t,e=(t=typeof r=="string"?JSON.parse(r):r).type;if(!De[e])throw new Error("Unknown GeoJSON type: "+t.type);return pr.indexOf(e)!==-1?De[e].call(this,t.coordinates):e==="GeometryCollection"?De[e].call(this,t.geometries):De[e].call(this,t)}},{key:"write",value:function(r){var t=r.getGeometryType();if(!Ae[t])throw new Error("Geometry is not supported");return Ae[t].call(this,r)}}])}(),De={Feature:function(r){var t={};for(var e in r)t[e]=r[e];if(r.geometry){var i=r.geometry.type;if(!De[i])throw new Error("Unknown GeoJSON type: "+r.type);t.geometry=this.read(r.geometry)}return r.bbox&&(t.bbox=De.bbox.call(this,r.bbox)),t},FeatureCollection:function(r){var t={};if(r.features){t.features=[];for(var e=0;e<r.features.length;++e)t.features.push(this.read(r.features[e]))}return r.bbox&&(t.bbox=this.parse.bbox.call(this,r.bbox)),t},coordinates:function(r){for(var t=[],e=0;e<r.length;++e){var i=r[e];t.push(c(A,Z(i)))}return t},bbox:function(r){return this.geometryFactory.createLinearRing([new A(r[0],r[1]),new A(r[2],r[1]),new A(r[2],r[3]),new A(r[0],r[3]),new A(r[0],r[1])])},Point:function(r){var t=c(A,Z(r));return this.geometryFactory.createPoint(t)},MultiPoint:function(r){for(var t=[],e=0;e<r.length;++e)t.push(De.Point.call(this,r[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(r){var t=De.coordinates.call(this,r);return this.geometryFactory.createLineString(t)},MultiLineString:function(r){for(var t=[],e=0;e<r.length;++e)t.push(De.LineString.call(this,r[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(r){for(var t=De.coordinates.call(this,r[0]),e=this.geometryFactory.createLinearRing(t),i=[],l=1;l<r.length;++l){var d=r[l],v=De.coordinates.call(this,d),x=this.geometryFactory.createLinearRing(v);i.push(x)}return this.geometryFactory.createPolygon(e,i)},MultiPolygon:function(r){for(var t=[],e=0;e<r.length;++e){var i=r[e];t.push(De.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(r){for(var t=[],e=0;e<r.length;++e){var i=r[e];t.push(this.read(i))}return this.geometryFactory.createGeometryCollection(t)}},Ae={coordinate:function(r){var t=[r.x,r.y];return r.z&&t.push(r.z),r.m&&t.push(r.m),t},Point:function(r){return{type:"Point",coordinates:Ae.coordinate.call(this,r.getCoordinate())}},MultiPoint:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var i=r._geometries[e],l=Ae.Point.call(this,i);t.push(l.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(r){for(var t=[],e=r.getCoordinates(),i=0;i<e.length;++i){var l=e[i];t.push(Ae.coordinate.call(this,l))}return{type:"LineString",coordinates:t}},MultiLineString:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var i=r._geometries[e],l=Ae.LineString.call(this,i);t.push(l.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(r){var t=[],e=Ae.LineString.call(this,r._shell);t.push(e.coordinates);for(var i=0;i<r._holes.length;++i){var l=r._holes[i],d=Ae.LineString.call(this,l);t.push(d.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var i=r._geometries[e],l=Ae.Polygon.call(this,i);t.push(l.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var i=r._geometries[e],l=i.getGeometryType();t.push(Ae[l].call(this,i))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:zn,GeoJSONReader:function(){return p(function r(t){a(this,r),this.parser=new vr(t||new cn)},[{key:"read",value:function(r){return this.parser.read(r)}}])}(),GeoJSONWriter:function(){return p(function r(){a(this,r),this.parser=new vr(this.geometryFactory)},[{key:"write",value:function(r){return this.parser.write(r)}}])}()}})}(lo)),lo.exports}var Ld=xd();const kd=dh(Ld);function Ti(){return new ko}function ko(){this.reset()}ko.prototype={constructor:ko,reset:function(){this.s=this.t=0},add:function(s){Hu(to,s,this.t),Hu(this,to.s,this.s),this.s?this.t+=to.t:this.s=to.t},valueOf:function(){return this.s}};var to=new ko;function Hu(s,u,f){var g=s.s=u+f,a=g-u,c=g-a;s.t=u-c+(f-a)}var le=1e-6,Jt=Math.PI,Zn=Jt/2,qu=Jt/4,Yn=Jt*2,vi=180/Jt,xn=Jt/180,Me=Math.abs,wd=Math.atan,Nr=Math.atan2,de=Math.cos,ge=Math.sin,Dr=Math.sqrt;function vh(s){return s>1?0:s<-1?Jt:Math.acos(s)}function Ki(s){return s>1?Zn:s<-1?-Zn:Math.asin(s)}function _s(){}function wo(s,u){s&&Vu.hasOwnProperty(s.type)&&Vu[s.type](s,u)}var Yu={Feature:function(s,u){wo(s.geometry,u)},FeatureCollection:function(s,u){for(var f=s.features,g=-1,a=f.length;++g<a;)wo(f[g].geometry,u)}},Vu={Sphere:function(s,u){u.sphere()},Point:function(s,u){s=s.coordinates,u.point(s[0],s[1],s[2])},MultiPoint:function(s,u){for(var f=s.coordinates,g=-1,a=f.length;++g<a;)s=f[g],u.point(s[0],s[1],s[2])},LineString:function(s,u){Sa(s.coordinates,u,0)},MultiLineString:function(s,u){for(var f=s.coordinates,g=-1,a=f.length;++g<a;)Sa(f[g],u,0)},Polygon:function(s,u){Wu(s.coordinates,u)},MultiPolygon:function(s,u){for(var f=s.coordinates,g=-1,a=f.length;++g<a;)Wu(f[g],u)},GeometryCollection:function(s,u){for(var f=s.geometries,g=-1,a=f.length;++g<a;)wo(f[g],u)}};function Sa(s,u,f){var g=-1,a=s.length-f,c;for(u.lineStart();++g<a;)c=s[g],u.point(c[0],c[1],c[2]);u.lineEnd()}function Wu(s,u){var f=-1,g=s.length;for(u.polygonStart();++f<g;)Sa(s[f],u,1);u.polygonEnd()}function Ed(s,u){s&&Yu.hasOwnProperty(s.type)?Yu[s.type](s,u):wo(s,u)}Ti();Ti();function Pa(s){return[Nr(s[1],s[0]),Ki(s[2])]}function Or(s){var u=s[0],f=s[1],g=de(f);return[g*de(u),g*ge(u),ge(f)]}function eo(s,u){return s[0]*u[0]+s[1]*u[1]+s[2]*u[2]}function Eo(s,u){return[s[1]*u[2]-s[2]*u[1],s[2]*u[0]-s[0]*u[2],s[0]*u[1]-s[1]*u[0]]}function fa(s,u){s[0]+=u[0],s[1]+=u[1],s[2]+=u[2]}function no(s,u){return[s[0]*u,s[1]*u,s[2]*u]}function Ca(s){var u=Dr(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]/=u,s[1]/=u,s[2]/=u}Ti();function yh(s,u){function f(g,a){return g=s(g,a),u(g[0],g[1])}return s.invert&&u.invert&&(f.invert=function(g,a){return g=u.invert(g,a),g&&s.invert(g[0],g[1])}),f}function Ma(s,u){return[s>Jt?s-Yn:s<-Jt?s+Yn:s,u]}Ma.invert=Ma;function bd(s,u,f){return(s%=Yn)?u||f?yh(ju(s),Ku(u,f)):ju(s):u||f?Ku(u,f):Ma}function Xu(s){return function(u,f){return u+=s,[u>Jt?u-Yn:u<-Jt?u+Yn:u,f]}}function ju(s){var u=Xu(s);return u.invert=Xu(-s),u}function Ku(s,u){var f=de(s),g=ge(s),a=de(u),c=ge(u);function m(p,w){var S=de(w),E=de(p)*S,I=ge(p)*S,M=ge(w),D=M*f+E*g;return[Nr(I*a-D*c,E*f-M*g),Ki(D*a+I*c)]}return m.invert=function(p,w){var S=de(w),E=de(p)*S,I=ge(p)*S,M=ge(w),D=M*a-I*c;return[Nr(I*a+M*c,E*f+D*g),Ki(D*f-E*g)]},m}function Td(s,u,f,g,a,c){if(f){var m=de(u),p=ge(u),w=g*f;a==null?(a=u+g*Yn,c=u-w/2):(a=$u(m,a),c=$u(m,c),(g>0?a<c:a>c)&&(a+=g*Yn));for(var S,E=a;g>0?E>c:E<c;E-=w)S=Pa([m,-p*de(E),-p*ge(E)]),s.point(S[0],S[1])}}function $u(s,u){u=Or(u),u[0]-=s,Ca(u);var f=vh(-u[1]);return((-u[2]<0?-f:f)+Yn-le)%Yn}function xh(){var s=[],u;return{point:function(f,g){u.push([f,g])},lineStart:function(){s.push(u=[])},lineEnd:_s,rejoin:function(){s.length>1&&s.push(s.pop().concat(s.shift()))},result:function(){var f=s;return s=[],u=null,f}}}function Id(s,u,f,g,a,c){var m=s[0],p=s[1],w=u[0],S=u[1],E=0,I=1,M=w-m,D=S-p,R;if(R=f-m,!(!M&&R>0)){if(R/=M,M<0){if(R<E)return;R<I&&(I=R)}else if(M>0){if(R>I)return;R>E&&(E=R)}if(R=a-m,!(!M&&R<0)){if(R/=M,M<0){if(R>I)return;R>E&&(E=R)}else if(M>0){if(R<E)return;R<I&&(I=R)}if(R=g-p,!(!D&&R>0)){if(R/=D,D<0){if(R<E)return;R<I&&(I=R)}else if(D>0){if(R>I)return;R>E&&(E=R)}if(R=c-p,!(!D&&R<0)){if(R/=D,D<0){if(R>I)return;R>E&&(E=R)}else if(D>0){if(R<E)return;R<I&&(I=R)}return E>0&&(s[0]=m+E*M,s[1]=p+E*D),I<1&&(u[0]=m+I*M,u[1]=p+I*D),!0}}}}}function ho(s,u){return Me(s[0]-u[0])<le&&Me(s[1]-u[1])<le}function io(s,u,f,g){this.x=s,this.z=u,this.o=f,this.e=g,this.v=!1,this.n=this.p=null}function Lh(s,u,f,g,a){var c=[],m=[],p,w;if(s.forEach(function(R){if(!((Z=R.length-1)<=0)){var Z,ct=R[0],ht=R[Z],st;if(ho(ct,ht)){for(a.lineStart(),p=0;p<Z;++p)a.point((ct=R[p])[0],ct[1]);a.lineEnd();return}c.push(st=new io(ct,R,null,!0)),m.push(st.o=new io(ct,null,st,!1)),c.push(st=new io(ht,R,null,!1)),m.push(st.o=new io(ht,null,st,!0))}}),!!c.length){for(m.sort(u),Ju(c),Ju(m),p=0,w=m.length;p<w;++p)m[p].e=f=!f;for(var S=c[0],E,I;;){for(var M=S,D=!0;M.v;)if((M=M.n)===S)return;E=M.z,a.lineStart();do{if(M.v=M.o.v=!0,M.e){if(D)for(p=0,w=E.length;p<w;++p)a.point((I=E[p])[0],I[1]);else g(M.x,M.n.x,1,a);M=M.n}else{if(D)for(E=M.p.z,p=E.length-1;p>=0;--p)a.point((I=E[p])[0],I[1]);else g(M.x,M.p.x,-1,a);M=M.p}M=M.o,E=M.z,D=!D}while(!M.v);a.lineEnd()}}}function Ju(s){if(u=s.length){for(var u,f=0,g=s[0],a;++f<u;)g.n=a=s[f],a.p=g,g=a;g.n=a=s[0],a.p=g}}function kh(s,u){return s<u?-1:s>u?1:s>=u?0:NaN}function Sd(s){return s.length===1&&(s=Pd(s)),{left:function(u,f,g,a){for(g==null&&(g=0),a==null&&(a=u.length);g<a;){var c=g+a>>>1;s(u[c],f)<0?g=c+1:a=c}return g},right:function(u,f,g,a){for(g==null&&(g=0),a==null&&(a=u.length);g<a;){var c=g+a>>>1;s(u[c],f)>0?a=c:g=c+1}return g}}}function Pd(s){return function(u,f){return kh(s(u),f)}}Sd(kh);function wh(s){for(var u=s.length,f,g=-1,a=0,c,m;++g<u;)a+=s[g].length;for(c=new Array(a);--u>=0;)for(m=s[u],f=m.length;--f>=0;)c[--a]=m[f];return c}var ms=1e9,ro=-ms;function Cd(s,u,f,g){function a(S,E){return s<=S&&S<=f&&u<=E&&E<=g}function c(S,E,I,M){var D=0,R=0;if(S==null||(D=m(S,I))!==(R=m(E,I))||w(S,E)<0^I>0)do M.point(D===0||D===3?s:f,D>1?g:u);while((D=(D+I+4)%4)!==R);else M.point(E[0],E[1])}function m(S,E){return Me(S[0]-s)<le?E>0?0:3:Me(S[0]-f)<le?E>0?2:1:Me(S[1]-u)<le?E>0?1:0:E>0?3:2}function p(S,E){return w(S.x,E.x)}function w(S,E){var I=m(S,1),M=m(E,1);return I!==M?I-M:I===0?E[1]-S[1]:I===1?S[0]-E[0]:I===2?S[1]-E[1]:E[0]-S[0]}return function(S){var E=S,I=xh(),M,D,R,Z,ct,ht,st,H,V,tt,W,et={point:_t,lineStart:Mt,lineEnd:ne,polygonStart:Bt,polygonEnd:St};function _t(Rt,yt){a(Rt,yt)&&E.point(Rt,yt)}function ft(){for(var Rt=0,yt=0,bt=D.length;yt<bt;++yt)for(var nt=D[yt],ie=1,q=nt.length,Ct=nt[0],Dt,$t,vt=Ct[0],qt=Ct[1];ie<q;++ie)Dt=vt,$t=qt,Ct=nt[ie],vt=Ct[0],qt=Ct[1],$t<=g?qt>g&&(vt-Dt)*(g-$t)>(qt-$t)*(s-Dt)&&++Rt:qt<=g&&(vt-Dt)*(g-$t)<(qt-$t)*(s-Dt)&&--Rt;return Rt}function Bt(){E=I,M=[],D=[],W=!0}function St(){var Rt=ft(),yt=W&&Rt,bt=(M=wh(M)).length;(yt||bt)&&(S.polygonStart(),yt&&(S.lineStart(),c(null,null,1,S),S.lineEnd()),bt&&Lh(M,p,Rt,c,S),S.polygonEnd()),E=S,M=D=R=null}function Mt(){et.point=it,D&&D.push(R=[]),tt=!0,V=!1,st=H=NaN}function ne(){M&&(it(Z,ct),ht&&V&&I.rejoin(),M.push(I.result())),et.point=_t,V&&E.lineEnd()}function it(Rt,yt){var bt=a(Rt,yt);if(D&&R.push([Rt,yt]),tt)Z=Rt,ct=yt,ht=bt,tt=!1,bt&&(E.lineStart(),E.point(Rt,yt));else if(bt&&V)E.point(Rt,yt);else{var nt=[st=Math.max(ro,Math.min(ms,st)),H=Math.max(ro,Math.min(ms,H))],ie=[Rt=Math.max(ro,Math.min(ms,Rt)),yt=Math.max(ro,Math.min(ms,yt))];Id(nt,ie,s,u,f,g)?(V||(E.lineStart(),E.point(nt[0],nt[1])),E.point(ie[0],ie[1]),bt||E.lineEnd(),W=!1):bt&&(E.lineStart(),E.point(Rt,yt),W=!1)}st=Rt,H=yt,V=bt}return et}}var da=Ti();function Md(s,u){var f=u[0],g=u[1],a=[ge(f),-de(f),0],c=0,m=0;da.reset();for(var p=0,w=s.length;p<w;++p)if(E=(S=s[p]).length)for(var S,E,I=S[E-1],M=I[0],D=I[1]/2+qu,R=ge(D),Z=de(D),ct=0;ct<E;++ct,M=st,R=V,Z=tt,I=ht){var ht=S[ct],st=ht[0],H=ht[1]/2+qu,V=ge(H),tt=de(H),W=st-M,et=W>=0?1:-1,_t=et*W,ft=_t>Jt,Bt=R*V;if(da.add(Nr(Bt*et*ge(_t),Z*tt+Bt*de(_t))),c+=ft?W+et*Yn:W,ft^M>=f^st>=f){var St=Eo(Or(I),Or(ht));Ca(St);var Mt=Eo(a,St);Ca(Mt);var ne=(ft^W>=0?-1:1)*Ki(Mt[2]);(g>ne||g===ne&&(St[0]||St[1]))&&(m+=ft^W>=0?1:-1)}}return(c<-le||c<le&&da<-le)^m&1}Ti();function Qu(s){return s}Ti();Ti();var Rr=1/0,bo=Rr,Ss=-Rr,To=Ss,tl={point:Nd,lineStart:_s,lineEnd:_s,polygonStart:_s,polygonEnd:_s,result:function(){var s=[[Rr,bo],[Ss,To]];return Ss=To=-(bo=Rr=1/0),s}};function Nd(s,u){s<Rr&&(Rr=s),s>Ss&&(Ss=s),u<bo&&(bo=u),u>To&&(To=u)}Ti();function Eh(s,u,f,g){return function(a,c){var m=u(c),p=a.invert(g[0],g[1]),w=xh(),S=u(w),E=!1,I,M,D,R={point:Z,lineStart:ht,lineEnd:st,polygonStart:function(){R.point=H,R.lineStart=V,R.lineEnd=tt,M=[],I=[]},polygonEnd:function(){R.point=Z,R.lineStart=ht,R.lineEnd=st,M=wh(M);var W=Md(I,p);M.length?(E||(c.polygonStart(),E=!0),Lh(M,Rd,W,f,c)):W&&(E||(c.polygonStart(),E=!0),c.lineStart(),f(null,null,1,c),c.lineEnd()),E&&(c.polygonEnd(),E=!1),M=I=null},sphere:function(){c.polygonStart(),c.lineStart(),f(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function Z(W,et){var _t=a(W,et);s(W=_t[0],et=_t[1])&&c.point(W,et)}function ct(W,et){var _t=a(W,et);m.point(_t[0],_t[1])}function ht(){R.point=ct,m.lineStart()}function st(){R.point=Z,m.lineEnd()}function H(W,et){D.push([W,et]);var _t=a(W,et);S.point(_t[0],_t[1])}function V(){S.lineStart(),D=[]}function tt(){H(D[0][0],D[0][1]),S.lineEnd();var W=S.clean(),et=w.result(),_t,ft=et.length,Bt,St,Mt;if(D.pop(),I.push(D),D=null,!!ft){if(W&1){if(St=et[0],(Bt=St.length-1)>0){for(E||(c.polygonStart(),E=!0),c.lineStart(),_t=0;_t<Bt;++_t)c.point((Mt=St[_t])[0],Mt[1]);c.lineEnd()}return}ft>1&&W&2&&et.push(et.pop().concat(et.shift())),M.push(et.filter(Od))}}return R}}function Od(s){return s.length>1}function Rd(s,u){return((s=s.x)[0]<0?s[1]-Zn-le:Zn-s[1])-((u=u.x)[0]<0?u[1]-Zn-le:Zn-u[1])}const el=Eh(function(){return!0},Dd,zd,[-Jt,-Zn]);function Dd(s){var u=NaN,f=NaN,g=NaN,a;return{lineStart:function(){s.lineStart(),a=1},point:function(c,m){var p=c>0?Jt:-Jt,w=Me(c-u);Me(w-Jt)<le?(s.point(u,f=(f+m)/2>0?Zn:-Zn),s.point(g,f),s.lineEnd(),s.lineStart(),s.point(p,f),s.point(c,f),a=0):g!==p&&w>=Jt&&(Me(u-g)<le&&(u-=g*le),Me(c-p)<le&&(c-=p*le),f=Ad(u,f,c,m),s.point(g,f),s.lineEnd(),s.lineStart(),s.point(p,f),a=0),s.point(u=c,f=m),g=p},lineEnd:function(){s.lineEnd(),u=f=NaN},clean:function(){return 2-a}}}function Ad(s,u,f,g){var a,c,m=ge(s-f);return Me(m)>le?wd((ge(u)*(c=de(g))*ge(f)-ge(g)*(a=de(u))*ge(s))/(a*c*m)):(u+g)/2}function zd(s,u,f,g){var a;if(s==null)a=f*Zn,g.point(-Jt,a),g.point(0,a),g.point(Jt,a),g.point(Jt,0),g.point(Jt,-a),g.point(0,-a),g.point(-Jt,-a),g.point(-Jt,0),g.point(-Jt,a);else if(Me(s[0]-u[0])>le){var c=s[0]<u[0]?Jt:-Jt;a=f*c/2,g.point(-c,a),g.point(0,a),g.point(c,a)}else g.point(u[0],u[1])}function Fd(s,u){var f=de(s),g=f>0,a=Me(f)>le;function c(E,I,M,D){Td(D,s,u,M,E,I)}function m(E,I){return de(E)*de(I)>f}function p(E){var I,M,D,R,Z;return{lineStart:function(){R=D=!1,Z=1},point:function(ct,ht){var st=[ct,ht],H,V=m(ct,ht),tt=g?V?0:S(ct,ht):V?S(ct+(ct<0?Jt:-Jt),ht):0;if(!I&&(R=D=V)&&E.lineStart(),V!==D&&(H=w(I,st),(!H||ho(I,H)||ho(st,H))&&(st[0]+=le,st[1]+=le,V=m(st[0],st[1]))),V!==D)Z=0,V?(E.lineStart(),H=w(st,I),E.point(H[0],H[1])):(H=w(I,st),E.point(H[0],H[1]),E.lineEnd()),I=H;else if(a&&I&&g^V){var W;!(tt&M)&&(W=w(st,I,!0))&&(Z=0,g?(E.lineStart(),E.point(W[0][0],W[0][1]),E.point(W[1][0],W[1][1]),E.lineEnd()):(E.point(W[1][0],W[1][1]),E.lineEnd(),E.lineStart(),E.point(W[0][0],W[0][1])))}V&&(!I||!ho(I,st))&&E.point(st[0],st[1]),I=st,D=V,M=tt},lineEnd:function(){D&&E.lineEnd(),I=null},clean:function(){return Z|(R&&D)<<1}}}function w(E,I,M){var D=Or(E),R=Or(I),Z=[1,0,0],ct=Eo(D,R),ht=eo(ct,ct),st=ct[0],H=ht-st*st;if(!H)return!M&&E;var V=f*ht/H,tt=-f*st/H,W=Eo(Z,ct),et=no(Z,V),_t=no(ct,tt);fa(et,_t);var ft=W,Bt=eo(et,ft),St=eo(ft,ft),Mt=Bt*Bt-St*(eo(et,et)-1);if(!(Mt<0)){var ne=Dr(Mt),it=no(ft,(-Bt-ne)/St);if(fa(it,et),it=Pa(it),!M)return it;var Rt=E[0],yt=I[0],bt=E[1],nt=I[1],ie;yt<Rt&&(ie=Rt,Rt=yt,yt=ie);var q=yt-Rt,Ct=Me(q-Jt)<le,Dt=Ct||q<le;if(!Ct&&nt<bt&&(ie=bt,bt=nt,nt=ie),Dt?Ct?bt+nt>0^it[1]<(Me(it[0]-Rt)<le?bt:nt):bt<=it[1]&&it[1]<=nt:q>Jt^(Rt<=it[0]&&it[0]<=yt)){var $t=no(ft,(-Bt+ne)/St);return fa($t,et),[it,Pa($t)]}}}function S(E,I){var M=g?s:Jt-s,D=0;return E<-M?D|=1:E>M&&(D|=2),I<-M?D|=4:I>M&&(D|=8),D}return Eh(m,p,c,g?[0,-s]:[-Jt,s-Jt])}function bh(s){return function(u){var f=new Na;for(var g in s)f[g]=s[g];return f.stream=u,f}}function Na(){}Na.prototype={constructor:Na,point:function(s,u){this.stream.point(s,u)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Th(s,u,f){var g=u[1][0]-u[0][0],a=u[1][1]-u[0][1],c=s.clipExtent&&s.clipExtent();s.scale(150).translate([0,0]),c!=null&&s.clipExtent(null),Ed(f,s.stream(tl));var m=tl.result(),p=Math.min(g/(m[1][0]-m[0][0]),a/(m[1][1]-m[0][1])),w=+u[0][0]+(g-p*(m[1][0]+m[0][0]))/2,S=+u[0][1]+(a-p*(m[1][1]+m[0][1]))/2;return c!=null&&s.clipExtent(c),s.scale(p*150).translate([w,S])}function Bd(s,u,f){return Th(s,[[0,0],u],f)}var nl=16,Gd=de(30*xn);function il(s,u){return+u?Zd(s,u):Ud(s)}function Ud(s){return bh({point:function(u,f){u=s(u,f),this.stream.point(u[0],u[1])}})}function Zd(s,u){function f(g,a,c,m,p,w,S,E,I,M,D,R,Z,ct){var ht=S-g,st=E-a,H=ht*ht+st*st;if(H>4*u&&Z--){var V=m+M,tt=p+D,W=w+R,et=Dr(V*V+tt*tt+W*W),_t=Ki(W/=et),ft=Me(Me(W)-1)<le||Me(c-I)<le?(c+I)/2:Nr(tt,V),Bt=s(ft,_t),St=Bt[0],Mt=Bt[1],ne=St-g,it=Mt-a,Rt=st*ne-ht*it;(Rt*Rt/H>u||Me((ht*ne+st*it)/H-.5)>.3||m*M+p*D+w*R<Gd)&&(f(g,a,c,m,p,w,St,Mt,ft,V/=et,tt/=et,W,Z,ct),ct.point(St,Mt),f(St,Mt,ft,V,tt,W,S,E,I,M,D,R,Z,ct))}}return function(g){var a,c,m,p,w,S,E,I,M,D,R,Z,ct={point:ht,lineStart:st,lineEnd:V,polygonStart:function(){g.polygonStart(),ct.lineStart=tt},polygonEnd:function(){g.polygonEnd(),ct.lineStart=st}};function ht(_t,ft){_t=s(_t,ft),g.point(_t[0],_t[1])}function st(){I=NaN,ct.point=H,g.lineStart()}function H(_t,ft){var Bt=Or([_t,ft]),St=s(_t,ft);f(I,M,E,D,R,Z,I=St[0],M=St[1],E=_t,D=Bt[0],R=Bt[1],Z=Bt[2],nl,g),g.point(I,M)}function V(){ct.point=ht,g.lineEnd()}function tt(){st(),ct.point=W,ct.lineEnd=et}function W(_t,ft){H(a=_t,ft),c=I,m=M,p=D,w=R,S=Z,ct.point=H}function et(){f(I,M,E,D,R,Z,c,m,a,p,w,S,nl,g),ct.lineEnd=V,V()}return ct}}var Hd=bh({point:function(s,u){this.stream.point(s*xn,u*xn)}});function qd(s){return Yd(function(){return s})()}function Yd(s){var u,f=150,g=480,a=250,c,m,p=0,w=0,S=0,E=0,I=0,M,D,R=null,Z=el,ct=null,ht,st,H,V=Qu,tt=.5,W=il(St,tt),et,_t;function ft(it){return it=D(it[0]*xn,it[1]*xn),[it[0]*f+c,m-it[1]*f]}function Bt(it){return it=D.invert((it[0]-c)/f,(m-it[1])/f),it&&[it[0]*vi,it[1]*vi]}function St(it,Rt){return it=u(it,Rt),[it[0]*f+c,m-it[1]*f]}ft.stream=function(it){return et&&_t===it?et:et=Hd(Z(M,W(V(_t=it))))},ft.clipAngle=function(it){return arguments.length?(Z=+it?Fd(R=it*xn,6*xn):(R=null,el),ne()):R*vi},ft.clipExtent=function(it){return arguments.length?(V=it==null?(ct=ht=st=H=null,Qu):Cd(ct=+it[0][0],ht=+it[0][1],st=+it[1][0],H=+it[1][1]),ne()):ct==null?null:[[ct,ht],[st,H]]},ft.scale=function(it){return arguments.length?(f=+it,Mt()):f},ft.translate=function(it){return arguments.length?(g=+it[0],a=+it[1],Mt()):[g,a]},ft.center=function(it){return arguments.length?(p=it[0]%360*xn,w=it[1]%360*xn,Mt()):[p*vi,w*vi]},ft.rotate=function(it){return arguments.length?(S=it[0]%360*xn,E=it[1]%360*xn,I=it.length>2?it[2]%360*xn:0,Mt()):[S*vi,E*vi,I*vi]},ft.precision=function(it){return arguments.length?(W=il(St,tt=it*it),ne()):Dr(tt)},ft.fitExtent=function(it,Rt){return Th(ft,it,Rt)},ft.fitSize=function(it,Rt){return Bd(ft,it,Rt)};function Mt(){D=yh(M=bd(S,E,I),u);var it=u(p,w);return c=g-it[0]*f,m=a+it[1]*f,ne()}function ne(){return et=_t=null,ft}return function(){return u=s.apply(this,arguments),ft.invert=u.invert&&Bt,Mt()}}function Ih(s){return function(u,f){var g=de(u),a=de(f),c=s(g*a);return[c*a*ge(u),c*ge(f)]}}function Sh(s){return function(u,f){var g=Dr(u*u+f*f),a=s(g),c=ge(a),m=de(a);return[Nr(u*c,g*m),Ki(g&&f*c/g)]}}var Vd=Ih(function(s){return Dr(2/(1+s))});Vd.invert=Sh(function(s){return 2*Ki(s/2)});var Ph=Ih(function(s){return(s=vh(s))&&s/ge(s)});Ph.invert=Sh(function(s){return s});function Wd(){return qd(Ph).scale(79.4188).clipAngle(180-.001)}function rl(s,u){return[s,u]}rl.invert=rl;var{BufferOp:Xd,GeoJSONReader:jd,GeoJSONWriter:Kd}=kd;function $d(s,u,f){f=f||{};var g=f.units||"kilometers",a=f.steps||8;if(!s)throw new Error("geojson is required");if(typeof f!="object")throw new Error("options must be an object");if(typeof a!="number")throw new Error("steps must be an number");if(u===void 0)throw new Error("radius is required");if(a<=0)throw new Error("steps must be greater than 0");var c=[];switch(s.type){case"GeometryCollection":return ph(s,function(m){var p=co(m,u,g,a);p&&c.push(p)}),Ia(c);case"FeatureCollection":return Uu(s,function(m){var p=co(m,u,g,a);p&&Uu(p,function(w){w&&c.push(w)})}),Ia(c)}return co(s,u,g,a)}function co(s,u,f,g){var a=s.properties||{},c=s.type==="Feature"?s.geometry:s;if(c.type==="GeometryCollection"){var m=[];return ph(s,function(Z){var ct=co(Z,u,f,g);ct&&m.push(ct)}),Ia(m)}var p=Jd(c),w={type:c.type,coordinates:Mh(c.coordinates,p)},S=new jd,E=S.read(w),I=_d(md(u,f),"meters"),M=Xd.bufferOp(E,I,g),D=new Kd;if(M=D.write(M),!Ch(M.coordinates)){var R={type:M.type,coordinates:Nh(M.coordinates,p)};return _h(R,a)}}function Ch(s){return Array.isArray(s[0])?Ch(s[0]):isNaN(s[0])}function Mh(s,u){return typeof s[0]!="object"?u(s):s.map(function(f){return Mh(f,u)})}function Nh(s,u){return typeof s[0]!="object"?u.invert(s):s.map(function(f){return Nh(f,u)})}function Jd(s){var u=vd(s).geometry.coordinates,f=[-u[0],-u[1]];return Wd().rotate(f).scale(en)}var fs={exports:{}},sl;function Qd(){if(sl)return fs.exports;sl=1,fs.exports=f,fs.exports.parse=f,fs.exports.stringify=g;var s=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,u=new RegExp("^"+s.source+"(\\s"+s.source+"){1,}");function f(a){var c=a.split(";"),m=c.pop(),p=(c.shift()||"").split("=").pop(),w=0;function S(W){var et=m.substring(w).match(W);return et?(w+=et[0].length,et[0]):null}function E(W){return W&&p.match(/\d+/)&&(W.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+p}}),W}function I(){S(/^\s*/)}function M(){I();for(var W=0,et=[],_t=[et],ft=et,Bt;Bt=S(/^(\()/)||S(/^(\))/)||S(/^(,)/)||S(u);){if(Bt==="(")_t.push(ft),ft=[],_t[_t.length-1].push(ft),W++;else if(Bt===")"){if(ft.length===0||(ft=_t.pop(),!ft))return null;if(W--,W===0)break}else if(Bt===",")ft=[],_t[_t.length-1].push(ft);else if(!Bt.split(/\s/g).some(isNaN))Array.prototype.push.apply(ft,Bt.split(/\s/g).map(parseFloat));else return null;I()}return W!==0?null:et}function D(){for(var W=[],et,_t;_t=S(u)||S(/^(,)/);)_t===","?(W.push(et),et=[]):_t.split(/\s/g).some(isNaN)||(et||(et=[]),Array.prototype.push.apply(et,_t.split(/\s/g).map(parseFloat))),I();if(et)W.push(et);else return null;return W.length?W:null}function R(){if(!S(/^(point(\sz)?)/i)||(I(),!S(/^(\()/)))return null;var W=D();return!W||(I(),!S(/^(\))/))?null:{type:"Point",coordinates:W[0]}}function Z(){if(!S(/^(multipoint)/i))return null;I();var W=m.substring(m.indexOf("(")+1,m.length-1).replace(/\(/g,"").replace(/\)/g,"");m="MULTIPOINT ("+W+")";var et=M();return et?(I(),{type:"MultiPoint",coordinates:et}):null}function ct(){if(!S(/^(multilinestring)/i))return null;I();var W=M();return W?(I(),{type:"MultiLineString",coordinates:W}):null}function ht(){if(!S(/^(linestring(\sz)?)/i)||(I(),!S(/^(\()/)))return null;var W=D();return!W||!S(/^(\))/)?null:{type:"LineString",coordinates:W}}function st(){if(!S(/^(polygon(\sz)?)/i))return null;I();var W=M();return W?{type:"Polygon",coordinates:W}:null}function H(){if(!S(/^(multipolygon)/i))return null;I();var W=M();return W?{type:"MultiPolygon",coordinates:W}:null}function V(){var W=[],et;if(!S(/^(geometrycollection)/i)||(I(),!S(/^(\()/)))return null;for(;et=tt();)W.push(et),I(),S(/^(,)/),I();return S(/^(\))/)?{type:"GeometryCollection",geometries:W}:null}function tt(){return R()||ht()||st()||Z()||ct()||H()||V()}return E(tt())}function g(a){a.type==="Feature"&&(a=a.geometry);function c(E){return E.join(" ")}function m(E){return E.map(c).join(", ")}function p(E){return E.map(m).map(S).join(", ")}function w(E){return E.map(p).map(S).join(", ")}function S(E){return"("+E+")"}switch(a.type){case"Point":return"POINT ("+c(a.coordinates)+")";case"LineString":return"LINESTRING ("+m(a.coordinates)+")";case"Polygon":return"POLYGON ("+p(a.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+m(a.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+w(a.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+p(a.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+a.geometries.map(g).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return fs.exports}var ol=Qd();function tg(s){return{_onZoomEnd:function(){this._markers!=null&&this._updateGuide()},position:"topleft",draw:{polygon:{drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{}},circlemarker:!1,circle:!1,rectangle:{shapeOptions:{clickable:!1}}},edit:{featureGroup:s,remove:!1}}}const Oh=(s,u)=>{const f=s.__vccOpts||s;for(const[g,a]of u)f[g]=a;return f},eg={id:"map"},ng={__name:"Map",props:{radius:{type:Number,default:10}},emits:["wkt","geojson"],setup(s,{emit:u}){const f=s,g=fu(),a=fu(new kr.FeatureGroup),c=ve(f.radius);ja(()=>{c.value=f.radius});const m=u;return Ul(()=>{g.value=kr.map("map").setView([51.505,-.09],13),kr.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(g.value),g.value.addLayer(a.value),g.value.addControl(new kr.Control.Draw(tg(a.value))),g.value.on(kr.Draw.Event.CREATED,function(p){let w=p.layer;a.value.clearLayers(),a.value.addLayer(w);let S=ol.stringify(w.toGeoJSON());if(p.layerType=="marker"||p.layerType=="polyline"){var E=$d(w.toGeoJSON(),c.value);S=ol.stringify(E),kr.geoJSON().addTo(a.value).addData(E)}m("geojson",w.toGeoJSON()),m("wkt",S)})}),(p,w)=>(We(),Pn("div",eg))}},ig=Oh(ng,[["__scopeId","data-v-fb390192"]]);function rg(s){const u="https://api.gbif.org/v1/species/"+s+"/media";return fetch(u,{method:"GET"}).then(function(f){return f.json()}).then(function(f){if(f.results.length>0)return f.results[0].identifier})}const sg={key:0},og={class:"d-flex justify-content-center"},ag={class:"d-flex justify-content-center"},ug={class:"spinner-border",role:"status"},lg={class:"visually-hidden"},hg={__name:"Loading",props:{loadingStatus:Boolean,loadingMessage:String},setup(s){const u=s;ri(u,()=>{f.value=u.loadingStatus});const f=ve(u.loadingStatus!=null?u.loadingStatus:!1),g=ve(u.loadingMessage!=null?u.loadingMessage:"Chargement ");return(a,c)=>f.value?(We(),Pn("div",sg,[Ot("div",og,[Ot("h3",null,Wi(g.value),1)]),Ot("div",ag,[Ot("div",ug,[Ot("span",lg,Wi(g.value),1)])])])):Ea("",!0)}};function Rh(s,u={},f=null,g=null){let a=`https://api.gbif.org/v1/occurrence/search?geometry=${s}`;a+=f?`&limit=${f}`:"",a+=g?`&offset=${g}`:"";for(const[c,m]of Object.entries(u))a+=`&${c}=${m}`;return fetch(a).then(c=>c.json())}function cg(s){return Rh(s,{},1).then(u=>u.count)}function fg(s,u={},f={limit:300,maxPage:10}){return cg(s).then(async function(g){let a=Math.ceil(g/f.limit);a>f.maxPage&&(a=f.maxPage);let c=[];for(let p=0;p<a;p++){const w=p*f.limit;c.push(Rh(s,u,f.limit,w))}let m={};return await Promise.all(c).then(p=>{p.map(w=>w.results).forEach(w=>{w.forEach(S=>{let E=(m[S.species]||{}).occCount||0;m[S.species]={lat:S.decimalLatitude,lng:S.decimalLongitude,acceptedScientificName:S.acceptedScientificName,eventDate:S.eventDate,gbifID:S.gbifID,taxonKey:S.taxonKey,occCount:E+1}})})}),m})}const dg={class:"card mb-3"},gg={class:"row"},_g={class:"col-md-4 p-0"},mg=["src","alt"],pg={class:"col-md-8"},vg={class:"card-body"},yg={class:"card-title"},xg={class:"card-text"},Lg={class:"text-body-secondary"},kg={__name:"Taxon",props:{name:String,imageUrl:String,description:String,observationDate:String,count:Number},setup(s){const u=s;return(f,g)=>(We(),Pn("div",dg,[Ot("div",gg,[Ot("div",_g,[Ot("img",{src:u.imageUrl,class:"card-img-top",alt:u.imageUrl},null,8,mg)]),Ot("div",pg,[Ot("div",vg,[Ot("h5",yg,Wi(u.name),1),Ot("p",xg,[Ot("small",Lg,"Observ le : "+Wi(u.observationDate),1)])])])])]))}},wg={"aria-label":"..."},Eg={class:"pagination"},bg=["onClick"],Tg={class:"page-link"},Ig={__name:"Pagination",props:{itemPerPage:Number,pageIndex:Number,totalItems:Number},emits:["page"],setup(s,{emit:u}){const f=s,g=ve(f.pageIndex),a=ve(f.itemPerPage),c=ve(f.totalItems);ri(f,()=>{a.value=f.itemPerPage,g.value=f.pageIndex,c.value=f.totalItems});const m=u;ri(g,()=>{m("page",g.value)});function p(D){return D==g.value?"page-item active":"page-item"}function w(D,R=False){return R?D==0?"page-item disabled":"page-item":D==I.value-1?"page-item disabled":"page-item"}function S(){g.value<=I.value-1&&g.value++}function E(){g.value>0&&g.value--}const I=Lo(()=>Math.ceil(c.value/a.value)),M=Lo(()=>{if(I.value>5){const D=g.value>0?0:1;let R=[];for(let Z=D;Z<5;Z++)R.push(g.value+Z);return R}return I.value});return(D,R)=>(We(),Pn("nav",wg,[Ot("ul",Eg,[Ot("li",{onClick:R[0]||(R[0]=Z=>g.value!=0?E():""),id:"previous",class:Ir(w(g.value,!0))},R[2]||(R[2]=[Ot("a",{class:"page-link"},"Previous",-1)]),2),(We(!0),Pn(In,null,Hl(M.value,Z=>(We(),Pn("li",{key:Z,class:Ir(p(Z-1)),onClick:ct=>g.value=Z-1},[Ot("a",Tg,Wi(Z),1)],10,bg))),128)),Ot("li",{id:"next",onClick:R[1]||(R[1]=Z=>g.value<I.value-1?S():""),class:Ir(w(g.value,!1))},R[3]||(R[3]=[Ot("a",{class:"page-link",href:"#"},"Next",-1)]),2)])]))}},Sg={id:"liste-taxons",class:"mb-3"},Pg={key:0,id:"no-observation-message"},Cg={class:"row",id:"species-listing"},Mg={class:"d-flex justify-content-center m-3"},Ng={__name:"ListeTaxon",props:{wkt:String,itemPerPage:Number,dateMin:String,dateMax:String},setup(s){const u=ve(null),f=ve(null),g=ve(null),a=s;ja(()=>{u.value=a.wkt,f.value=a.dateMin,g.value=a.dateMax});const c=ve([]),m=ve(!1),p=ve(0),w=ve(a.itemPerPage?a.itemPerPage:10),S=Lo(()=>c.value.sort((I,M)=>M.occCount-I.occCount).slice(p.value*w.value,(p.value+1)*w.value));function E(I){m.value=!0,c.value=[];let M={};f.value&&g.value&&(M={eventDate:`${f.value},${g.value}`}),fg(I,M,{maxPage:2,limit:300}).then(D=>{Object.values(D).forEach(R=>{rg(R.taxonKey).then(Z=>{R.media=Z,c.value.push(R)})}),m.value=!1})}return ri(a,()=>{u.value=a.wkt}),ri(u,()=>{u.value&&E(u.value)}),(I,M)=>(We(),Pn("div",Sg,[M[2]||(M[2]=Ot("h2",{class:"col-12 text-center mb-3 mt-0 p-3"},[Ot("i",{class:"bi bi-search"}),yo(" Taxons observes ")],-1)),ln(hg,{loadingStatus:m.value},null,8,["loadingStatus"]),S.value.length==0&&!m.value?(We(),Pn("div",Pg,M[1]||(M[1]=[Ot("h4",{class:"col-12 text-center mb-3 mt-0 p-3"},[Ot("i",{class:"bi bi-pin-map"}),yo(" Dessiner une gomtrie sur la carte ")],-1)]))):Ea("",!0),Ot("div",Cg,[(We(!0),Pn(In,null,Hl(S.value,D=>(We(),vo(kg,{name:D.acceptedScientificName,imageUrl:D.media,description:D.acceptedScientificName,observationDate:D.eventDate,count:D.occCount},null,8,["name","imageUrl","description","observationDate","count"]))),256))]),Ot("div",Mg,[S.value.length>0?(We(),vo(Ig,{key:0,pageIndex:p.value,"total-items":c.value.length,itemPerPage:w.value,onPage:M[0]||(M[0]=D=>p.value=D)},null,8,["pageIndex","total-items","itemPerPage"])):Ea("",!0)])]))}},Og={class:"row g-3 mb-3",id:"filters"},Rg={class:"col-12 col-md-4 col-lg-3"},Dg={for:"radius",class:"form-label"},Ag={class:"col-12 col-md-4 col-lg-3"},zg={class:"col-12 col-md-4 col-lg-3"},Fg={__name:"Filters",props:{radius:Number,dateMin:Date,dateMax:Date},emits:["radius","dateMin","dateMax"],setup(s,{emit:u}){const f=ve(10),g=ve(null),a=ve(null);ve(300),ve(10);const c=s;ja(()=>{f.value=c.radius,g.value=c.dateMin,a.value=c.dateMax});const m=u;return ri([f,g,a],()=>{m("radius",f.value),m("dateMin",g.value),m("dateMax",a.value)}),(p,w)=>(We(),Pn("div",Og,[w[5]||(w[5]=Ot("div",{class:"col-12 col-md-12 col-lg-1",id:"filtersTitle"},[Ot("h3",null,[Ot("i",{class:"bi bi-filter"}),yo(" Filtres")])],-1)),Ot("div",Rg,[Ot("label",Dg,"Buffer Size: "+Wi(f.value)+" km",1),ra(Ot("input",{type:"range",class:"form-range",min:"0",max:"100","onUpdate:modelValue":w[0]||(w[0]=S=>f.value=S),id:"radius"},null,512),[[ca,f.value]])]),Ot("div",Ag,[w[3]||(w[3]=Ot("label",{for:"startDate"},"Date Min",-1)),ra(Ot("input",{id:"startDate",class:"form-control",type:"date","onUpdate:modelValue":w[1]||(w[1]=S=>g.value=S)},null,512),[[ca,g.value]])]),Ot("div",zg,[w[4]||(w[4]=Ot("label",{for:"endDate"},"Date Max",-1)),ra(Ot("input",{id:"endDate",class:"form-control",type:"date","onUpdate:modelValue":w[2]||(w[2]=S=>a.value=S)},null,512),[[ca,a.value]])])]))}},Bg={class:"container-fluid"},Gg={class:"row"},Ug={class:"col m-2 mt-1 mb-3"},Zg={class:"row"},Hg={class:"col-12 col-lg-6 col-md-6"},qg={class:"col-12 col-lg-6 col-md-6"},Yg={__name:"MainPage",setup(s){const u=ve(1),f=ve(""),g=ve(null),a=ve(null);return(c,m)=>(We(),Pn("div",Bg,[m[4]||(m[4]=Ot("h1",{id:"title",class:"col-12 text-center m-3"},"Taxons around me",-1)),Ot("div",Gg,[Ot("div",Ug,[ln(Fg,{radius:u.value,onDateMin:m[0]||(m[0]=p=>g.value=p),onDateMax:m[1]||(m[1]=p=>a.value=p),onRadius:m[2]||(m[2]=p=>u.value=parseInt(p))},null,8,["radius"])])]),Ot("div",Zg,[Ot("div",Hg,[ln(ig,{radius:u.value,onWkt:m[3]||(m[3]=p=>f.value=p)},null,8,["radius"])]),Ot("div",qg,[ln(Ng,{wkt:f.value,dateMin:g.value,dateMax:a.value,itemPerPage:10},null,8,["wkt","dateMin","dateMax"])])])]))}},Vg=Oh(Yg,[["__scopeId","data-v-b75a888c"]]),Wg={__name:"App",setup(s){return(u,f)=>(We(),vo(Vg))}};ud(Wg).mount("#app");
